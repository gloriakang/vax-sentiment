(function(d,g){var f=d.jQuery||d.Cowboy||(d.Cowboy={}),e;f.throttle=e=function(m,l,a,b){var c,n=0;if(typeof l!=="boolean"){b=a;a=l;l=g}function k(){var p=this,h=+new Date()-n,q=arguments;function i(){n=+new Date();a.apply(p,q)}function j(){c=g}if(b&&!c){i()}c&&clearTimeout(c);if(b===g&&h>m){i()}else{if(l!==true){c=setTimeout(b?j:i,b===g?m-h:m)}}}if(f.guid){k.guid=a.guid=a.guid||f.guid++}return k};f.debounce=function(c,b,a){return a===g?e(c,b,false):e(c,a,b!==false)}})(this);
(function(x){x.transit={version:"0.9.9",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var E=document.createElement("div");var r={};function G(a){if(a in E.style){return a}var b=["Moz","Webkit","O","ms"];var e=a.charAt(0).toUpperCase()+a.substr(1);if(a in E.style){return a}for(var c=0;c<b.length;++c){var d=b[c]+e;if(d in E.style){return d}}}function D(){E.style[r.transform]="";E.style[r.transform]="rotateY(90deg)";return E.style[r.transform]!==""}var H=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;r.transition=G("transition");r.transitionDelay=G("transitionDelay");r.transform=G("transform");r.transformOrigin=G("transformOrigin");r.transform3d=D();var z={transition:"transitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var C=r.transitionEnd=z[r.transition]||null;for(var s in r){if(r.hasOwnProperty(s)&&typeof x.support[s]==="undefined"){x.support[s]=r[s]}}E=null;x.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};x.cssHooks["transit:transform"]={get:function(a){return x(a).data("transform")||new y()},set:function(b,c){var a=c;if(!(a instanceof y)){a=new y(a)}if(r.transform==="WebkitTransform"&&!H){b.style[r.transform]=a.toString(true)}else{b.style[r.transform]=a.toString()}x(b).data("transform",a)}};x.cssHooks.transform={set:x.cssHooks["transit:transform"].set};if(x.fn.jquery<"1.8"){x.cssHooks.transformOrigin={get:function(a){return a.style[r.transformOrigin]},set:function(b,a){b.style[r.transformOrigin]=a}};x.cssHooks.transition={get:function(a){return a.style[r.transition]},set:function(b,a){b.style[r.transition]=a}}}u("scale");u("translate");u("rotate");u("rotateX");u("rotateY");u("rotate3d");u("perspective");u("skewX");u("skewY");u("x",true);u("y",true);function y(a){if(typeof a==="string"){this.parse(a)}return this}y.prototype={setFromString:function(a,b){var c=(typeof b==="string")?b.split(","):(b.constructor===Array)?b:[b];c.unshift(a);y.prototype.set.apply(this,c)},set:function(a){var b=Array.prototype.slice.apply(arguments,[1]);if(this.setter[a]){this.setter[a].apply(this,b)}else{this[a]=b.join(",")}},get:function(a){if(this.getter[a]){return this.getter[a].apply(this)}else{return this[a]||0}},setter:{rotate:function(a){this.rotate=t(a,"deg")},rotateX:function(a){this.rotateX=t(a,"deg")},rotateY:function(a){this.rotateY=t(a,"deg")},scale:function(b,a){if(a===undefined){a=b}this.scale=b+","+a},skewX:function(a){this.skewX=t(a,"deg")},skewY:function(a){this.skewY=t(a,"deg")},perspective:function(a){this.perspective=t(a,"px")},x:function(a){this.set("translate",a,null)},y:function(a){this.set("translate",null,a)},translate:function(b,a){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(b!==null&&b!==undefined){this._translateX=t(b,"px")}if(a!==null&&a!==undefined){this._translateY=t(a,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var a=(this.scale||"1,1").split(",");if(a[0]){a[0]=parseFloat(a[0])}if(a[1]){a[1]=parseFloat(a[1])}return(a[0]===a[1])?a[0]:a},rotate3d:function(){var a=(this.rotate3d||"0,0,0,0deg").split(",");for(var b=0;b<=3;++b){if(a[b]){a[b]=parseFloat(a[b])}}if(a[3]){a[3]=t(a[3],"deg")}return a}},parse:function(a){var b=this;a.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,c,d){b.setFromString(c,d)})},toString:function(a){var b=[];for(var c in this){if(this.hasOwnProperty(c)){if((!r.transform3d)&&((c==="rotateX")||(c==="rotateY")||(c==="perspective")||(c==="transformOrigin"))){continue}if(c[0]!=="_"){if(a&&(c==="scale")){b.push(c+"3d("+this[c]+",1)")}else{if(a&&(c==="translate")){b.push(c+"3d("+this[c]+",0)")}else{b.push(c+"("+this[c]+")")}}}}}return b.join(" ")}};function v(b,c,a){if(c===true){b.queue(a)}else{if(c){b.queue(c,a)}else{a()}}}function A(a){var b=[];x.each(a,function(c){c=x.camelCase(c);c=x.transit.propertyMap[c]||x.cssProps[c]||c;c=F(c);if(x.inArray(c,b)===-1){b.push(c)}});return b}function B(f,c,a,g){var e=A(f);if(x.cssEase[a]){a=x.cssEase[a]}var b=""+w(c)+" "+a;if(parseInt(g,10)>0){b+=" "+w(g)}var d=[];x.each(e,function(h,i){d.push(i+" "+b)});return d.join(", ")}x.fn.transition=x.fn.transit=function(f,n,g,c){var b=this;var k=0;var i=true;if(typeof n==="function"){c=n;n=undefined}if(typeof g==="function"){c=g;g=undefined}if(typeof f.easing!=="undefined"){g=f.easing;delete f.easing}if(typeof f.duration!=="undefined"){n=f.duration;delete f.duration}if(typeof f.complete!=="undefined"){c=f.complete;delete f.complete}if(typeof f.queue!=="undefined"){i=f.queue;delete f.queue}if(typeof f.delay!=="undefined"){k=f.delay;delete f.delay}if(typeof n==="undefined"){n=x.fx.speeds._default}if(typeof g==="undefined"){g=x.cssEase._default}n=w(n);var m=B(f,n,g,k);var d=x.transit.enabled&&r.transition;var l=d?(parseInt(n,10)+parseInt(k,10)):0;if(l===0){var e=function(o){b.css(f);if(c){c.apply(b)}if(o){o()}};v(b,i,e);return b}var h={};var a=function(o){var p=false;var q=function(){if(p){b.unbind(C,q)}if(l>0){b.each(function(){this.style[r.transition]=(h[this]||null)})}if(typeof c==="function"){c.apply(b)}if(typeof o==="function"){o()}};if((l>0)&&(C)&&(x.transit.useTransitionEnd)){p=true;b.bind(C,q)}else{window.setTimeout(q,l)}b.each(function(){if(l>0){this.style[r.transition]=m}x(this).css(f)})};var j=function(o){this.offsetWidth;a(o)};v(b,i,j);return this};function u(a,b){if(!b){x.cssNumber[a]=true}x.transit.propertyMap[a]=r.transform;x.cssHooks[a]={get:function(c){var d=x(c).css("transit:transform");return d.get(a)},set:function(d,c){var e=x(d).css("transit:transform");e.setFromString(a,c);x(d).css({"transit:transform":e})}}}function F(a){return a.replace(/([A-Z])/g,function(b){return"-"+b.toLowerCase()})}function t(a,b){if((typeof a==="string")&&(!a.match(/^[\-0-9\.]+$/))){return a}else{return""+a+b}}function w(a){var b=a;if(x.fx.speeds[b]){b=x.fx.speeds[b]}return t(b,"ms")}x.transit.getTransitionValue=B})(jQuery);(function(d,f,g,h){var e=encodeURIComponent,i=h.protocol,j=h.hostname,c=/\.sandbox\./.test(j)||h.search.match("track=sandbox"),b,a;d.mmTrack=function(k){if(c){if(f.console){console.info("jQuery.mmTrack: Comscore tracking is disabled in sandbox.")}}else{var p=f.s_265,l="",r="",n="",m="",q="",o="?title="+e(g.title),t;if(p||k){if(k.isInternational){q="&omni=2&pfxID="+p.pfxID+"&sprop17="+p.prop17+"&sprop21="+p.prop21}else{q="&omni=1"}if(k.s_account){l="&s_account="+k.s_account}else{if(f.s_account){l="&s_account="+f.s_account}}if(k.channel){r="&s_channel="+k.channel}else{if(p.channel){r="&s_channel="+p.channel}}if(k.prop1){n=k.prop1+"/"}else{if(p.prop1){n=p.prop1+"/"}}if(k.prop2){m=k.prop2+"/"}else{if(p.prop2){m=p.prop2+"/"}}if(k.pageName){o="?title="+e(k.pageName)}else{if(p.channel){o="?title="+e(p.pageName)}}}if(!b){b=g.createElement("iframe");a=b.style;b.id="aol-mmtrack";a.display="none";d(g.body).append(b)}var s={};d.each(k,function(u,w){if(typeof k[u]==="string"){if(u.match(/^prop/gi)&&w!==""){s["s"+u.toLowerCase()]=w}else{if(u.match(/^eVar/gi)&&w!==""){var v=u.toLowerCase();s[v]=w}else{if(u==="account"||u==="channel"||u==="pageName"||u==="products"||u==="events"){s[u]=w}}}}});t=i+"//"+(k.host||j)+"/mm_track/"+n+m+o+q+"&"+d.param(s);b.src=t+"&ts="+(+new Date());if(f.bN_cfg){f.bN.view()}else{if(f.console){console.info("AOL DataLayer Beacon is not configured.")}}}}})(jQuery,window,document,location);(function(a){a.xml2json=function(d){function b(e,f){a.each(e,function(j,h){if(h.nodeType===7){return}var g={};var i=h.nodeName;if(h.nodeType===3||h.nodeType===4){if(!h.nodeValue.match(/^\n$/)){g=a.trim(h.nodeValue)}else{return}}else{g=b(h.childNodes,{})}if(h.attributes!==null&&h.attributes.length>0){g.attributes=c(h.attributes)}if(!(i in f)){if(i!=="#text"&&i!=="#cdata-section"){f[i]=g}else{f=g}}else{if(!a.isArray(f[i])){f[i]=[f[i]]}f[i].push(g)}});return f}function c(e){if(!e){return{}}var f={};a.each(e,function(h,g){f[g.nodeName]=g.nodeValue});return f}return b(d.childNodes,{})}}(jQuery));(function(a){a.knotData=function(d){var f=d.source;var e=d.type;var g=d.callback||a.noop;var c=(function(){try{return a(f)}catch(h){return a()}}());var b=function(j,i){var h={url:j,success:function(l,k,m){if(e){i=e}if(!i){var n=m.getResponseHeader("content-type")||null;i=n&&n.split("/")[1].split(";")[0]}switch(i){case"html":f=a(l);break;case"xml":f=a.xml2json(l);break;default:f=l;break}g(f,i)},error:function(l,k){if(k==="parsererror"||i==="jsonp"){return}b(j,"jsonp")}};if(i){h.dataType=i}a.ajax(h)};if(typeof f==="string"){if(c.length>0){if(c.children().length>0){f=c;e="html";g(f,e)}else{if(c.html()===""){b(c.data("src"))}else{f=a.parseJSON(c.html());g(f,"json")}}}else{b(f)}}else{if(typeof f==="function"){f=f();g(f,e)}else{g(f,e)}}}}(jQuery));(function(b){function a(d){try{return(d instanceof HTMLElement)}catch(c){return(typeof d==="object")&&(d.nodeType)}}b.knotLookup=function(j,i){var d=b(j);var h="";if(!d.length){return h}if(d.context||a(d[0])){if(typeof i==="string"){var g=i.match(/\[[a-zA-Z0-9\-=]*\]$/);if(g){if(g[0].match(/\=/)){h=d.find(i)}else{var c=g[0].slice(1,g[0].length-1);var f=i.split(g[0])[0];if(c!=="text"&&c!=="html"){if(f!==""){h=d.find(f).attr(c)}else{h=d.attr(c)}}else{if(c==="text"){if(f!==""){h=d.find(f).text()}else{h=d.text()}}else{if(c==="html"){if(f!==""){h=d.find(f).html()}else{h=d.html()}}}}}}else{var e=d.find(i);if(e.length>0){h=e}}}}else{h=j;if(typeof i==="string"){b.each(i.split(/\./),function(k,l){if(h&&typeof h!=="string"){if(l in h){h=h[l]}else{h=""}}else{h=""}})}}if(b.isFunction(i)){h=i(j)}if(typeof h==="undefined"){h=""}return h}}(jQuery));(function(a){a.knot=function(b,c){this.$element=a(c);this.entryArray=[];this.slideCount=0;this.activeSlide=0;this.entries=[];this.isFullscreen=false;this.busy=false;this._create(b);this._getData()};a.knot.settings={build:true,hideData:true,thumbnails:false,thumbnailsOnly:false,thumbWidth:80,thumbHeight:80,loopThumbs:false,infiniteLoop:false,defaultType:"photo",effect:"translate",activeSlide:0,transitionSpeed:600,fullscreenThumbs:false,launchFullscreen:false,roundImageSize:true,restrictSize:false,showEndCard:false,preloadVideo:true,updateHash:true,trackingId:0,isInternational:0,galleryId:1,alwaysTrack:false,supressTracking:false,firstTrack:true,onNextSlide:a.noop,onPrevSlide:a.noop,onSlideChange:a.noop,onSlideChangeComplete:a.noop,onSlideLoad:a.noop,onThumbClick:a.noop,onEnterFullscreen:a.noop,onExitFullscreen:a.noop,onUiBuilt:a.noop,onKnotInit:a.noop,bindEvents:a.noop};a.knot.prototype={_create:function(b){this.$element.addClass("aol-knot-wrapper");this.options=this.original=a.extend(true,{},a.knot.settings,b);this.omnitureConfig={host:this.options.omnitureHost||window.location.hostname,pageName:this.options.slideshowTitle||document.title,prop1:this.name||"default",prop2:"gallery",channel:this.options.trackingId,isInternational:this.options.isInternational}},_getData:function(){var c=this;var b=this.options.dataType||"jsonp";var e=0;var d=function(g,f){c.original=c.options;c.options.data=g;if(f==="html"&&c.options.hideData){a(c.options.data).hide()}c.entryArray=a.knotLookup(c.options.data,c.options.contentMap.entryArray.path);c.slideCount=c.entryArray.length;c.addSlides(c.entryArray);if(c.options.contentMap.endCard){e=a.knotLookup(c.options.data,c.options.contentMap.endCard.entryArray.path);if(c.options.showEndCard&&e.length>0){c._createEndCard(e)}}c._init()};a.knotData({source:this.options.data,type:b,callback:d})},_addSlide:function(d,e,c){var b={slides:c.slideCount,index:d};a.each(c.options.contentMap,function(f,g){b[f]=a.knotLookup(e,g.path);if(f==="entryArray"||f==="endCard"){return}if(g.override){b[f]=g.override}});b.viewed=false;b.roundImageSize=c.options.roundImageSize;b.restrictSize=c.options.restrictSize;if(!b.type||b.type===""){b.type=c.options.defaultType}c.entries.push(b)},_createEndCard:function(e){var c=this;var b=[];a.each(e,function(g,h){var f={index:g};a.each(c.options.contentMap.endCard,function(i,j){if(i==="entryArray"){return}f[i]=a.knotLookup(h,j.path);if(j.override){f[i]=j.override}});b.push(f)});var d={slides:c.slideCount,index:c.entryArray.length,entries:b,type:"endcard",mediaId:"endcard"+c.options.galleryId,thumbnail:b[0].thumbnail,caption:"",title:""};c.entries.push(d);c._updateTotalSlides()},_updateTotalSlides:function(){var b=this;b.slideCount=b.entries.length;a.each(this.entries,function(c,d){this.slideCount=b.slideCount})},_bindTracking:function(){var b=this;this.$element.bind("slideTransitionComplete.knot",function(c){if(b.options.firstTrack){b.options.firstTrack=false;return false}if(!b.options.supressTracking&&!b.options.firstTrack){if(a(c.target).closest(".aol-knot-fullscreen-wrapper").length>0&&b.isFullscreen){b._track()}else{if(a(c.target).closest(".aol-knot-fullscreen-wrapper").length<1&&!b.isFullscreen){b._track()}}}}).bind("knotUiBuilt.knot",function(){b.entries[b.activeSlide].viewed=true})},_track:function(){if(typeof a.mmTrack==="function"&&window.s_265){var d=this;this.omnitureConfig=a.extend({},window.s_265,this.omnitureConfig);var c=d.$fullscreenContainer&&d.isFullscreen?d.$fullscreenContainer:d.$element;if(((c.width()*c.height())<(400*600))&&!d.options.alwaysTrack){return}var b=0;a.each(d.entries,function(g){if(d.entries[g].viewed){b+=1}});b=Math.round((b/d.slideCount)*100);d.omnitureConfig.prop52="photo_"+b;var f="";var e=d.options.data.slides;if(e&&e[d.activeSlide].data&&e[d.activeSlide].data.video_type){f=e[d.activeSlide].data.video_type}if(f!==""){if(f==="aolon"){f="5min"}d.omnitureConfig.prop62="video_"+f}else{d.omnitureConfig.prop62=""}d.omnitureConfig.prop1=d.entries[d.activeSlide].type+"+";d.omnitureConfig.prop1+=d.isFullscreen?"fullscreen":"slideshow";a.mmTrack(d.omnitureConfig)}},_init:function(){this.created=true;this.$element.trigger("knotReady",this);this.options.onKnotInit();if(this.options.build){this._bindTracking();this.build()}},option:function(b,c){if(a.isPlainObject(b)){this.options=a.extend(true,this.options,b)}},addSlides:function(c){var b=this;a.each(c,function(d){b._addSlide(d,c[d],b)})},build:function(){var b=this;this.options.$knotElement=this.$element;var d=window.location.hash.match(/slide=[a-zA-z0-9]*/gi);var c=false;if(d&&d.length>0){d=d[0].split("=")[1];a.each(this.entries,function(g,e){var f=e["media-id"]||e.mediaId||"";if(f===d||f.toString()===d){d=e.index;c=true;return false}});if(!c){d=0}this.options.activeSlide=d}if(window.location.hash.match(/fullscreen&/)&&c){b.launchFullscreen=true}this.activeSlide=this.options.activeSlide;if(a.knotUi&&!this.options.thumbnailsOnly&&!this.options.fullscreenOnly){this.$element.knotUi(this)}else{if(this.options.thumbnailsOnly&&a.knotThumbs){this.$element.knotThumbs(this)}else{if(a.knotUi&&a.knotFullscreen&&this.options.fullscreenOnly){this.$element.knotFullscreen(this)}}}},destroy:function(){this.$element.removeData("knot").removeClass().unbind(".knot").undelegate(".knot").empty().trigger("knotDestroyed")}};a.fn.knot=function(c){if(typeof c==="string"){var b=Array.prototype.slice.call(arguments,1);this.each(function(){var d=a.data(this,"knot");if(!d){a.error('Cannot call methods on knot prior to initialization; Attempted to call method "'+c+'"');return}if(!a.isFunction(d[c])||c.charAt(0)==="_"){a.error('No such method "'+c+'" for knot instance');return}d[c].apply(d,b)})}else{this.each(function(){var d=a.data(this,"knot");if(d){d.destroy();d=undefined;a.data(this,"knot",new a.knot(c,this))}else{a.data(this,"knot",new a.knot(c,this))}})}return this}}(jQuery));(function(c){var d=function(f){return(Math.round(f/100)*100)};var e=function(f){return(Math.floor(f/100)*100)};var b="http://o.aolcdn.com/dims-global/dims3/GLOB/resize/";var a={image:function(i,q){var j=i.data("photo_src")||i.data("photoSrc");if(!i||!j){return}if(j.match("{size}")){var k=i.data("index");k.photo_src=k.photo_src.replace("{size}","l");i.data(k)}var l=d(i.height())>100?d(i.height()):100;var p=d(i.width())>100?d(i.width()):100;if(!i.data("roundImageSize")){p=i.width();l=i.height()}var g=new Image();var o=!i.data("restrictSize")?"":">";var f=b+p+"x"+l+o+"/"+j;if(i.data("downloadEnabled")){i.prepend('<img class="aol-knot-download-image" data-dl-src="'+j+'" width="'+p+'" height="'+l+'"/>')}if(i.data("noDims")||j.match(/\.gif([\?]|$|#)/)){f=j}var n=function(r){var h=r.type==="error"?i.data("src"):f;i.css({backgroundImage:"url("+h+")",backgroundPosition:"50% 50%",backgroundRepeat:i.data("type")!=="tweet"?"no-repeat":"repeat"});if(q){q(i)}};var m=function(h,r){return function(s){if(typeof s==="undefined"||s===null){s={type:h}}r.call(this,s)}};g.onerror=m("error",n);g.onload=m("load",n);g.src=f},comic:function(j,l){var g=[];c.each(j.data("frames"),function(m,o){var n=c(o).data("frame-src").split("crop/")[1].split("/")[0];g[m]={width:Number(n.split("x")[0]),height:Number(n.split("x")[1].split(/[\-\+]/g)[0]),left:n.match(/[\-\+][0-9]*/g)?Number(n.match(/[\-\+][0-9]*/g)[0]):0,top:n.match(/[\-\+][0-9]*/g)?Number(n.match(/[\-\+][0-9]*/g)[1]):0,index:m}});if(j&&(typeof j.data("photo_src")==="undefined"||typeof j.data("photoSrc")==="undefined")){return}var i=new Image();var k="http://o.aolcdn.com/dims-global/dims3/GLOB/"+(j.data("photo_src")||j.data("photoSrc"));var f=c.extend(true,{},j.data());var h=j.parent();f.frames=g;i.onload=function(){j.css({top:(h.height()-g[0].height)/2,left:(h.width-g[0].width)/2,background:"url("+k+") "+-g[0].left+"px "+-g[0].top+"px no-repeat",width:g[0].width,height:g[0].height}).data(f);if(l){l(j)}};i.onerror=function(){j.css({background:"url("+k+") "+-g[0].left+"px "+-g[0].top+"px no-repeat",width:g[0].width,height:g[0].height}).data(f);if(l){l(j)}};i.src=k},video:function(j,k){var h=j.data("player");var i=c(h);var g;var f;j.empty();if(h.match("<script")){g=h.match(/src=["|'].*['|"]/)[0].split(/['|"]/)[1].split(/['|"]/)[0];g=g.replace(/(\?|&|&amp;)width=[0-9]*/gi,"$1width="+j.width()).replace(/(\?|&|&amp;)height=[0-9]*/gi,"$1height="+j.height());f=document.createElement("script");f.type="text/javascript";f.src=g;j[0].appendChild(f)}else{j.html(i.css({width:j.width(),height:j.height()}).attr("width",j.width()).attr("height",j.height()))}if(k){k(j)}},audio:function(f,g){f.html(f.data("player"));if(g){g(f)}},quote:function(f,h){if(!f.data("text")||!f.data("quoteSource")){return}var g=['<div class="aol-knot-slide-quote-outer" style="height:',f.height(),'px">','<div class="aol-knot-slide-quote-middle">','<div class="aol-knot-slide-quote-inner">',"<p>",f.data("text"),"</p>","<h3>- ",f.data("quoteSource"),"</h3>","</div>","</div>","</div>"];f.html(g.join(""));if(h){h(f)}},tweet:function(i,j){var g=c('<div class="aol-knot-tweet-wrapper"></div>');var f=i.data("tweet_link")||i.data("tweetLink");if(!f){return}g.append('<blockquote class="twitter-tweet"><a href="'+f+'"></a></blockquote>').css({visibility:"hidden"});i.html(g);c.knotRender("image",i);var h=function(){if(g.children().first().hasClass("twitter-tweet-rendered")&&g.height()>50){g.css({marginTop:(i.height()-g.height())/2,visibility:"visible"});return}setTimeout(h,50)};c.getScript("//platform.twitter.com/widgets.js",h);if(j){j(i)}},text:function(f,h){var g=['<div class="aol-knot-slide-text-outer" style="height:',f.height(),'px">','<div class="aol-knot-slide-text-middle">','<div class="aol-knot-slide-text-inner">',"<h2>",f.data("title"),"</h2>","<p>",f.data("body"),"</p>","</div>","</div>","</div>"];f.html(g.join(""));if(h){h(f)}},html:function(f,g){f.html(f.data("html"));if(g){g(f)}},embed:function(f,g){f.html(f.data("embed"));if(f.data("async")&&f.data("async")!==""){c.getScript(f.data("async"))}if(g){g(f)}},endcard:function(l,m){var g=l.data("entries");var j=Math.round(l.width()/4);var i=j/l.width();var f=Math.round(l.height()*i);var k=Math.floor(j/10);var h=c("<div/>",{html:(function(){var n=['<ul class="aol-knot-endcard-wrapper">'];c.each(g,function(o,p){n.push(['<li class="aol-knot-endcard-item">','<a href="',p.url,'">','<p><img src="',b,j,"x",f,"/",p.photoSrc,'" style="margin:auto !important" /></p>',"<h5>",p.title,"</h5>","</a>","</li>"].join(""))});n.push("</ul>");return n.join("")}())});l.delegate("a","click",function(n){n.stopImmediatePropagation()}).append(h).find("li").css({width:j,margin:k,height:f+100}).find("p").css({height:f});if(m){m(l)}},ad:function(j,k){var g=Math.round(Math.random()*100000000);var i=j.data();i.adId="knotAdSlide-"+g;j.data(i);var f=c('<div id="knotAdSlide-'+g+'"></div>');j.append(f);var h=i;if(window.htmlAdWH&&h.magicNumber&&h.adId){window.htmlAdWH(h.magicNumber,"RR","RR","ajax",h.adId)}f.css({marginTop:(j.height()-f.height())/2}).bind("click",function(l){l.stopImmediatePropagation()});if(k){k(j)}},add:function(f,g){if(typeof f==="string"&&typeof g==="function"){a[f]=g}}};a.photo=a.image;c.knotRender=function(f){if(a[f]){return a[f].apply(this,Array.prototype.slice.call(arguments,1))}else{c.error('Method "'+f+'" does not exist in render.')}}}(jQuery));(function(b){var a=(function(){var c=document.createElement("div").style;if("MozTransition" in c){return false}return"transition" in c||"WebkitTransition" in c||"MozTransition" in c||"msTransition" in c||"OTransition" in c}());b.knotUi=function(d,c){this.$element=b(c);this.$container={};this.$before={};this.$wrapper={};this.$loading={};this.$ul={};this.$info={};this.$title={};this.$slideTitle={};this.$caption={};this.$prev={};this.$next={};this.$after={};this.$fullscreen={};this.$slides={};this.$fauxUl=false;this.refreshMin=1;this.refreshMax=10;this.refreshStatus=0;this.activeSlide=0;this.name="slideshow";this.textHeight=60;this.preloading={};this.firstSlideChange=true;this._check(d);this._create(this.options);this.buildUi()};b.knotUi.settings={};b.knotUi.prototype={_check:function(c){if(c.options){this.options=c.options}this.context=c},_create:function(c){this.options=b.extend(true,{},b.knotUi.settings,c);if(this.options.name){this.name=this.options.name}if(!b.isArray(this.options.refreshDivId)){this.options.refreshDivId=[this.options.refreshDivId]}if(!b.isArray(this.options.fullscreenRefreshDivId)){this.options.fullscreenRefreshDivId=[this.options.fullscreenRefreshDivId]}},destroy:function(){this.$element.removeData("knotUi").unbind(".knotui").undelegate(".knotui").empty().trigger("knotUiDestroyed")},option:function(c,d){if(b.isPlainObject(c)){this.options=b.extend(true,this.options,c)}},buildUi:function(){var i,e,g=[],d,h=this;this.$container=b("<div/>",{"class":"aol-knot-slide-container"});this.$slideshowTitle=b("<div/>",{"class":"aol-knot-slideshow-title"}).html(this.options.slideshowTitle);this.$wrapper=b("<div/>",{"class":"aol-knot-slide-wrapper"});this.$loading=b("<div/>",{"class":"aol-knot-slide-loading"});this.$ul=b("<ul/>",{"class":"aol-knot-slides "+this.options.effect});this.$info=b("<div/>",{"class":"aol-knot-slide-info"});this.$slideTitle=b("<div/>",{"class":"aol-knot-slide-title"});this.$caption=b("<div/>",{"class":"aol-knot-slide-caption"});this.$prev=b(['<div class="aol-knot-nav-prev aol-knot-nav-outer"><div class="aol-knot-nav-middle">','<div class="aol-knot-nav-inner"><i class="aol-knot-nav-prev-icon icon-angle-left">',"</i></div></div></div>"].join(""));this.$next=b(['<div class="aol-knot-nav-next aol-knot-nav-outer"><div class="aol-knot-nav-middle">','<div class="aol-knot-nav-inner"><i class="aol-knot-nav-next-icon icon-angle-right">',"</i></div></div></div>"].join(""));this.$slides=b();if(typeof this.options.contentMap.entryArray.html==="function"){this.entryFunction=this.options.contentMap.entryArray.html}else{this.entryFunction=function(j){return b("<li/>",{"class":"aol-knot-slide aol-knot-slide-"+j.type}).data(j)}}b.each(this.context.entries,function(j,k){if(h.options.downloadEnabled){k.downloadEnabled=true}if(h.options.noDims){k.noDims=true}i=h.entryFunction(k,h.$element);i.data(k);h.$slides=h.$slides.add(i)});if(this.options.before){if(typeof this.options.before==="function"){this.$before=this.options.before()}else{this.$before=b(this.options.before)}this.$element.append(this.$before)}this.$ul.append(this.$slides);this.$wrapper.append(this.$ul).append(this.$loading);this.$container.append(this.$wrapper).append(this.$prev).append(this.$next);this.$info.append(this.$slideTitle).append(this.$caption);this.$element.append(this.$slideshowTitle).append(this.$container).append(this.$info);if(this.options.after){if(typeof this.options.after==="function"){this.$after=this.options.after()}else{this.$after=b(this.options.after)}this.$element.append(this.$after)}this.$container.css({textAlign:"center",height:this.options.wrapperHeight?this.options.wrapperHeight:(445/670)*this.$element.width(),width:this.$element.width()});this.$slides.css({width:this.$wrapper.width(),height:this.$wrapper.height()});if(a){this.$ul.css({width:(this.context.slideCount)*this.$wrapper.width(),x:(this.$wrapper.width()-this.$slides.first().width())/2})}else{this.$ul.css({width:(this.context.slideCount)*this.$wrapper.width(),marginLeft:(this.$wrapper.width()-this.$slides.first().width())/2})}this.$prev.add(this.$next).css({lineHeight:this.$wrapper.outerHeight()+"px"});this.context.$uiContainer=this.$container;this.bindEvents();var f=function(){h.$wrapper.find("ul").not(":first").remove();h.$fauxUl=h.$ul.clone(true);var j={position:"absolute",top:0};if(a){if(h.options.activeSlide===0){j.x=-(h.$fauxUl.width())}else{j.x=-(h.$fauxUl.width()+h.$wrapper.width())}}else{if(h.options.activeSlide===0){j.marginLeft=-(h.$fauxUl.width())}else{j.marginLeft=-(h.$fauxUl.width()+h.$wrapper.width())}}h.$fauxUl.css(j).children().removeClass("aol-knot-active-slide");h.$ul.after(h.$fauxUl);h.$wrapper.css({overflow:"visible"});h.$element.unbind("preloadComplete",c)};var c=function(k,j){if(j===h.$slides.length-1&&h.options.infiniteLoop){setTimeout(f,100)}};h.$element.bind("preloadComplete",c);this.showSlide(this.options.activeSlide,null,function(){if(h.options.infiniteLoop&&(h.options.activeSlide===0||h.options.activeSlide===1)){f()}});if(this.options.fullscreen&&b.knotFullscreen){this.$element.knotFullscreen(this.context)}if(this.options.thumbnails&&b.knotThumbs){this.$element.knotThumbs(this.context)}if(this.options.flyout&&b.knotFlyout){this.$element.knotFlyout(this.context)}this.$element.trigger("knotUiBuilt",this);this.options.onUiBuilt(this)},bindEvents:function(){var d=this;var c=b.throttle(300,function(f){if(f.which){switch(f.which){case 39:case 32:f.preventDefault();d.context.$element.trigger("showNextSlide");break;case 37:f.preventDefault();d.context.$element.trigger("showPrevSlide");break}}});this.$element.delegate(".aol-knot-nav-next, .aol-knot-nav-next-icon, .aol-knot-active-slide, .aol-knot-download-image","click.knotui",function(f){f.stopImmediatePropagation();d.context.$element.trigger("showNextSlide")}).delegate(".aol-knot-nav-prev, .aol-knot-nav-prev-icon","click.knotui",function(f){f.stopImmediatePropagation();d.context.$element.trigger("showPrevSlide")}).bind("slideChange.knotui",function(h,g,f){d.showSlide(g,f)}).bind("showNextSlide.knotui",function(){d.showNextSlide()}).bind("showPrevSlide.knotui",function(){d.showPrevSlide()}).bind("mouseenter.knotui",function(){b(document).bind("keydown.knotui",c);d.$element.bind("mouseleave.knotui",function(){b(document).unbind("keydown.knotui",c)})}).bind("enterFullscreen.knotui",function(){if(d.context.entries[d.context.activeSlide].type==="video"){d.unloadSlide(d.context.activeSlide)}}).bind("exitFullscreen.knotui",function(){d.showSlide(d.context.activeSlide,null,null)}).bind("slideTransitionStart.knotui",function(){d.context.entries[d.context.activeSlide].viewed=true}).bind("knotDestroyed.knotui",function(){d.destroy()});if(this.options.downloadEnabled){this.$element.bind("contextmenu.knotui dragstart.knotui",function(g){var f=b(g.target);if(f.is(".aol-knot-download-image")){g.target.src=f.data("dl-src")}}).bind("mousedown.knotui",b.debounce(10,function(g){var f=b(g.target);if(f.is(".aol-knot-download-image")){g.target.src=f.data("dl-src")}}))}if("ontouchstart" in window){this.bindTouch()}return this},bindTouch:function(){var l=this;var j=0;var o=0;var p=0;var n=0;var k=0;var i=0;var e=this.$ul;var c;var h;var g=this.$slides.first().width();var f=false;e.bind("touchstart",function(q){if(l.context.busy){return}j=q.originalEvent.changedTouches[0].pageX;o=parseInt(e.css("x"),0);p=q.originalEvent.changedTouches[0].pageX;n=q.originalEvent.changedTouches[0].pageY;k=0;i=0;c=new Date();h=c.getTime();e.bind("touchend",d);e.bind("touchmove",m)});var m=function(q){if(l.context.busy){return}var r=q.originalEvent.changedTouches[0].pageX-j;j=q.originalEvent.changedTouches[0].pageX;i=q.originalEvent.changedTouches[0].pageY-n;k=q.originalEvent.changedTouches[0].pageX-p;if(Math.abs(i)<Math.abs(k+40)&&Math.abs(k)>40){q.preventDefault();e.css({x:parseInt(e.css("x"),0)+r})}};var d=function(w){w.preventDefault();if(l.context.busy){return}e.unbind("touchend",d);e.unbind("touchmove",m);c=new Date();h=c.getTime()-h;var s=parseInt(e.css("x"),0);var v=Math.round(Math.abs(s/g));var u=g/4;var y=g*(v);var t=Math.round(y+u);var x=Math.round(y-u);var q=Math.abs(Math.abs(o)-Math.abs(s));var r=Math.round(Math.abs(600-((((g-q)/(600-h)))*600)));l.options.transitionSpeed=Math.max(150,Math.min(r,600));if(l.activeSlide===v){if(t<Math.abs(s)){v+=1}if(Math.abs(s)<x){v-=1}}if(s>0){v=0}if(v<0||v>=l.context.slideCount){if(v<0){v=0}else{v=l.context.slideCount-1}}l.$wrapper.trigger("slideChange",[v,null])}},showNextSlide:function(){var d="left";var c=this.activeSlide;if(this.options.infiniteLoop&&(c+1===this.$slides.length-1||c+1===this.$slides.length||c+1===this.$slides.length+1||c===0)){this.showFauxUl(c,d);return false}if(c+1>=this.$slides.length){c=0}else{c+=1}this.$element.trigger("slideChange",[c,d]);this.options.onNextSlide()},showPrevSlide:function(){var d="right";var c=this.activeSlide;if(this.options.infiniteLoop&&(c===1||c===0||c===this.$slides.length-1)){this.showFauxUl(c,d);return false}if(c-1<0){c=this.$slides.length-1}else{c-=1}this.$element.trigger("slideChange",[c,d]);this.options.onPrevSlide()},showFauxUl:function(g,d,k){var l=this;if(l.fauxBusy){return false}var j=l.options.transitionSpeed;l.fauxBusy=true;var h=function(){l.fauxBusy=false;l.$element.unbind("slideTransitionComplete",h)};l.$element.bind("slideTransitionComplete",h);var f=function(){if(a){l.$fauxUl.transition({x:l.$wrapper.width(),duration:j},function(){l.$element.unbind("slideTransitionStart",f)})}else{l.$fauxUl.animate({marginLeft:l.$wrapper.width()},j,function(){l.$element.unbind("slideTransitionStart",f)})}};var c=function(){if(a){l.$fauxUl.transition({x:-(l.$fauxUl.width()),duration:j},function(){l.$element.unbind("slideTransitionStart",c)})}else{l.$fauxUl.animate({marginLeft:-(l.$fauxUl.width())},j,function(){l.$element.unbind("slideTransitionStart",c)})}};var e=l.$wrapper.width();if(g===this.$slides.length-2&&d==="left"){l.$wrapper.find("ul").not(":first").remove();l.$fauxUl=l.$ul.clone(true);l.$fauxUl.css({position:"absolute",top:0}).children().removeClass("aol-knot-active-slide");if(a){l.$fauxUl.css({x:e*2})}else{l.$fauxUl.css({marginLeft:e*2})}l.$ul.after(l.$fauxUl);l.$wrapper.css({overflow:"visible"});l.$element.bind("slideTransitionStart",f);l.$element.trigger("slideChange",[g+1,d])}if(g+1===this.$slides.length&&d==="left"){if(a){l.$ul.transition({x:-(l.$ul.width()),duration:j});l.$fauxUl.transition({x:0,duration:j},function(){l.options.transitionSpeed=1;l.$element.trigger("slideChange",[0,d]);l.$fauxUl.css({x:-(l.$fauxUl.width())});l.options.transitionSpeed=j})}else{l.$ul.animate({marginLeft:-(l.$ul.width())},j);l.$fauxUl.animate({marginLeft:0},j,function(){l.options.transitionSpeed=1;l.$element.trigger("slideChange",[0,d]);l.$fauxUl.css({marginLeft:-(l.$fauxUl.width())});l.options.transitionSpeed=j})}}if(g===0){if(d==="left"){if(a){l.$fauxUl.transition({x:-(l.$ul.width()+l.$wrapper.width()),duration:j})}else{l.$fauxUl.animate({marginLeft:-(l.$ul.width()+l.$wrapper.width())},j)}l.$element.trigger("slideChange",[g+1,d])}if(d==="right"){if(a){l.$ul.transition({x:e,duration:j});l.$fauxUl.transition({x:-(l.$fauxUl.width()-e),duration:j},function(){l.options.transitionSpeed=1;l.$element.trigger("slideChange",[l.$slides.length-1,d]);l.$fauxUl.css({x:e});l.options.transitionSpeed=j})}else{l.$ul.animate({marginLeft:e},j);l.$fauxUl.animate({marginLeft:-(l.$fauxUl.width()-e)},j,function(){l.options.transitionSpeed=1;l.$element.trigger("slideChange",[l.$slides.length-1,d]);l.$fauxUl.css({marginLeft:e});l.options.transitionSpeed=j})}}}if(g===1&&d==="right"){l.$wrapper.find("ul").not(":first").remove();l.$fauxUl=l.$ul.clone(true);l.$fauxUl.css({position:"absolute",top:0}).children().removeClass("aol-knot-active-slide");if(a){l.$fauxUl.css({x:-(l.$fauxUl.width()+e)})}else{l.$fauxUl.css({marginLeft:-(l.$fauxUl.width()+e)})}l.$ul.after(l.$fauxUl);l.$wrapper.css({overflow:"visible"});l.$element.bind("slideTransitionStart",c);l.$element.trigger("slideChange",[g-1,d])}if(g===this.$slides.length-1&&d==="right"){if(a){l.$ul.transition({x:-(l.$ul.width()-(e*2)),duration:j});l.$fauxUl.transition({x:e*2,duration:j},function(){l.options.transitionSpeed=1;l.$element.trigger("slideChange",[l.$slides.length-2,d]);l.options.transitionSpeed=j})}else{l.$ul.transition({marginLeft:-(l.$ul.width()-(e*2))},j);l.$fauxUl.transition({marginLeft:e*2},j,function(){l.options.transitionSpeed=1;l.$element.trigger("slideChange",[l.$slides.length-2,d]);l.options.transitionSpeed=j})}}},showSlide:function(f,c,k){var h=this;var j=Number(f);var e=this.$slides.eq(j);var g=e.parent();var l=!this.fullscreenInstance?this.preloading:this.fullscreenPreloading;var d=function(){e.removeClass("loading").addClass("loaded");h.$element.trigger("slideChangeStart",j,null);h.translateSlide(j);h.activeSlide=j;h.context.activeSlide=j;h.loadSlides(j);if(k){k()}};if(l[j]===true){g.bind("preloadComplete",function(i,m){if(j===m){g.unbind("preloadComplete");h.showSlide(j,null,d)}})}if(e.hasClass("loaded")&&!g.hasClass("translating")){if(!this.fullscreenInstance){this.context.busy=false}else{this.context.fullscreenBusy=false}}if((!this.fullscreenInstance&&this.context.busy)||(this.fullscreenInstance&&this.context.fullscreenBusy)){return this}if(!this.fullscreenInstance){this.context.busy=true}else{this.context.fullscreenBusy=true}h.$wrapper.addClass("loading");if(e.hasClass("loading")){return this}else{this.preloadSlide(j,d)}return this},preloadSlide:function(i,l,j){var h=this;var e=this.$slides.eq(i);var f=e.parent();var m=!this.fullscreenInstance?this.preloading:this.fullscreenPreloading;var d=this.options.transitionSpeed;m[i]=false;var g=function(){m[i]=false;h.$element.trigger("preloadComplete",i);if(l){l(i);h.options.onSlideLoad(e)}};if(j&&!e.hasClass("loaded")){if(e.data().type==="image"||e.data().type==="photo"){m[i]=true}}if(e.hasClass("loading")){return this}var k=function(){e.addClass("loading");b.knotRender(e.data().type,e,function(){e.removeClass("loading").addClass("loaded");g()})};var c=function(){e.removeClass("loading").addClass("loaded");e.empty()};if(!e.hasClass("loaded")&&!e.hasClass("loading")){k()}else{if(e.data().type==="video"&&e.data().index!==this.activeSlide&&l){c();k()}else{if(e.hasClass("loaded")){g()}}}return this},translateSlide:function(j){var h=this;var f=this.$slides.eq(j);var k=this.$slides.eq(this.activeSlide);var d=-f.position().left;var g=f.parent();var i=g.parent();var e=(i.width()-this.$slides.first().width())/2;g.addClass("translating");this.options.onSlideChange(j,this.context);var c=function(){k.removeClass("aol-knot-active-slide");f.addClass("aol-knot-active-slide loaded");g.removeClass("translating");i.trigger("slideTransitionComplete",j,null);if(!h.fullscreenInstance){h.context.busy=false}else{h.context.fullscreenBusy=false}if(j===0&&h.firstSlideChange){h.firstSlideChange=false}else{h.updateHash(j);h.refreshAd()}h.options.onSlideChangeComplete()};var l=(function(){if(h.options.effect==="fade"){return function(){g.animate({opacity:1},c)}}else{return c}}());if(this.options.transitionSpeed<=0){this.options.transitionSpeed=10}if(this.options.effect==="fade"){g.css({opacity:0});this.options.transitionSpeed=1}h.$wrapper.removeClass("loading");h.$element.trigger("slideTransitionStart",j,null);if(a){g.transition({x:d+e,duration:this.options.transitionSpeed},l)}else{g.animate({marginLeft:d+e},this.options.transitionSpeed,l)}this.updateText(j)},loadSlides:function(c){var f=this;var d=c+1;var e=c-1;if(e<0){e=this.context.slideCount-1}if(d>=this.context.slideCount){d=0}if(((this.options.preloadVideo===false&&this.context.entries[d].type!=="video")||this.options.preloadVideo===true)&&this.context.entries[e].type!=="ad"){this.preloadSlide(d,b.noop,true)}if(((this.options.preloadVideo===false&&this.context.entries[e].type!=="video")||this.options.preloadVideo===true)&&this.context.entries[e].type!=="ad"){this.preloadSlide(e,b.noop,true)}return this},updateText:function(c){var d=this;this.$caption.add(this.$slideTitle).fadeOut(function(){d.$caption.html(d.context.entries[c].caption||"");d.$slideTitle.html(d.context.entries[c].title||"");d.$caption.add(d.$slideTitle).fadeIn()})},updateHash:function(d){if(!this.options.updateHash){return false}var j=this;var e=window.location;var i=e.hash.replace(/#!|#/,"");var g=!j.context.isFullscreen?"":"fullscreen&";var c="";var f="";var h=this.context.entries[d].mediaId||this.context.entries[d]["media-id"]||d;if(d!=="undefined"){i=i.replace(/slide=[a-zA-z0-9]*/,"");c="slide="+h}i=i.replace(/fullscreen&/,"");if(i!==""&&i.indexOf("&")!==0){i="&"+i}f=e.protocol+"//"+e.host+e.pathname+(e.search!==""?e.search:"")+"#!"+g+c+i;window.location.replace(f);return this},unloadSlide:function(c){var e=this;var d=this.$slides.eq(c);d.empty().removeClass("loaded")},refreshAd:function(){var g=this;var f=[];var c=this.context.isFullscreen?this.options.fullscreenRefreshDivId:this.options.refreshDivId;var e=this.options.refreshCount?this.options.refreshCount:4;var d=function(o){var l=b("#"+o);if(l.length<1){return}var m;var k=l.height();var i=l.offset().top;var n=b(window);var h=n.scrollTop();var j=n.height();if(l.css("display")!=="block"||l.css("visibility")!=="visible"){return}m=l.data();if(typeof m.refreshStatus!=="undefined"){m.refreshStatus+=1}else{m.refreshStatus=1}if(m.refreshStatus>=e){if(i+k<h||i>h+j){return}if(window.adsReloadAd){m.refreshStatus=0;window.adsReloadAd(o)}else{b.error("Could not find adsReloadAd method on window.")}}l.data(m)};if(e>this.refreshMax){e=this.refreshMax}if(e<this.refreshMin){e=this.refreshMin}if(c){b.each(c,function(i,h){d(h)})}},extend:function(c,d){if(typeof c==="string"&&typeof d==="function"){this[c]=function(){d.apply(this.context,arguments)}}}};b.fn.knotUi=function(d){if(typeof d==="string"){var c=Array.prototype.slice.call(arguments,1);this.each(function(){var e=b.data(this,"knotUi");if(!e){b.error("Cannot call methods on knotUi prior to initialization; Attempted to call method '"+d+"'");return}if(!b.isFunction(e[d])||d.charAt(0)==="_"){b.error("No such method '"+d+"' for knotUi instance");return}e[d].apply(e,c)})}else{this.each(function(){var e=b.data(this,"knotUi");if(e){e.option(d||{});e.destroy();b.data(this,"knotUi",new b.knotUi(d,this))}else{b.data(this,"knotUi",new b.knotUi(d,this))}})}return this}}(jQuery));(function(b){var a=(function(){var c=document.createElement("div").style;if("MozTransition" in c){return false}return"transition" in c||"WebkitTransition" in c||"MozTransition" in c||"msTransition" in c||"OTransition" in c}());b.knotThumbs=function(e,d,c){this.$element=b(d);this.$container=b();this.$wrapper={};this.$inner={};this.$list={};this.$first={};this.$next={};this.$prev={};this.$active={};this.$title={};this.$launcher={};this.$thumbs={};this.busy=false;this._check(e);if(c){this._create(c.options)}else{this._create(this.options)}this._init()};b.knotThumbs.settings={};b.knotThumbs.prototype={_check:function(c){if(c.options){this.options=c.options}this.context=c},_create:function(c){this.options=b.extend(true,{},b.knotThumbs.settings,c)},destroy:function(){this.$element.unbind(".knotThumbs").undelegate(".knotThumbs").removeData("knotThumbs").trigger("knotThumbsDestroyed")},_init:function(){this.buildThumbs()},option:function(c,d){if(b.isPlainObject(c)){this.options=b.extend(true,this.options,c)}return this},buildThumbs:function(){var f,c,d,e=this;this.$container=b("<div/>",{"class":"aol-knot-thumbs-container"});this.$wrapper=b("<div/>",{"class":"aol-knot-thumbs-wrapper"});this.$inner=b("<div/>",{"class":"aol-knot-thumbs-inner"});this.$list=b("<ul/>",{"class":"aol-knot-thumbs-list"});this.$thumbs=b();if(typeof this.options.contentMap.thumbnail.html==="function"){this.entryFunction=this.options.contentMap.thumbnail.html}else{this.entryFunction=function(i){var h="http://o.aolcdn.com/dims-global/dims3/GLOB/thumbnail/"+this.options.thumbWidth+"x"+this.options.thumbHeight+"/quality/85/"+i.thumbnail;var g=b("<li/>",{"class":"aol-knot-thumb"+(this.options.thumbnailsOnly?" aol-knot-enter-fullscreen":"")}).data(i);if(this.options.noDims){h=i.thumbnail}g.css({background:"url("+h+") 50% 50% no-repeat"});return g}}b.each(this.context.entries,function(g,h){if(h.type==="ad"){}if(e.options.downloadEnabled){h.downloadEnabled=true}if(h.thumbnail&&h.thumbnail.match("{size}")){h.thumbnail=h.thumbnail.replace("{size}","t")}f=e.entryFunction(h);f.data(h);e.$thumbs=e.$thumbs.add(f)});this.$list.append(this.$thumbs);this.$inner.append(this.$list);this.$wrapper.append(this.$inner);this.$container.append(this.$wrapper);this.$container.css({textAlign:"center",position:"relative"});d=this.$element.find(".aol-knot-slide-info");if(d.length>0&&this.options.thumbnailPosition!=="afterCaption"){d.before(this.$container).trigger("thumbsAvailable")}else{this.$element.append(this.$container).trigger("thumbsAvailable")}if(this.options.thisFullscreenThumbs){this.$element.addClass("knot-thumbs-fullscreen")}if(this.options.thumbnailStyle==="carousel"){if(!this.options.thisFullscreenThumbs){this.$element.addClass("knot-thumb-style-carousel")}else{this.$element.addClass("knot-thumb-fullscreen-style-carousel")}if(this.options.thumbnailControls){this.$prev=b(['<div class="aol-knot-thumb-prev aol-knot-thumb-outer">','<div class="aol-knot-thumb-middle">','<div class="aol-knot-thumb-inner">','<i class="aol-knot-thumb-prev-icon icon-angle-left"></i>',"</div>","</div>","</div>"].join(""));this.$next=b(['<div class="aol-knot-thumb-next aol-knot-thumb-outer">','<div class="aol-knot-thumb-middle">','<div class="aol-knot-thumb-inner">','<i class="aol-knot-thumb-next-icon icon-angle-right"></i>',"</div>","</div>","</div>"].join(""));this.$container.append(this.$prev);this.$container.append(this.$next);if(!this.options.thisFullscreenThumbs){this.$element.addClass("knot-thumb-controls")}else{this.$element.addClass("knot-thumb-fullscreen-controls")}}if(this.options.thisFullscreenThumbs&&!this.options.thumbnailControls){this.$element.addClass("knot-thumb-no-fullscreen-controls")}this.$inner.css({width:this.$wrapper.width(),overflow:"hidden",visibility:"hidden",margin:"0 auto"})}if(this.options.thumbnailsOnly){this.$element.addClass("aol-knot-thumbs-only");if(this.options.slideshowTitle){this.$title=b('<div class="aol-knot-thumbs-only-title"><h2>Gallery: '+this.options.slideshowTitle+"</h2></div>");this.$container.prepend(this.$title)}this.$launcher=b('<div class="aol-knot-enter-fullscreen">view fullscreen <i class="icon-share-alt"></i></div>');this.$container.append(this.$launcher);if(this.options.fullscreen){this.context.$element.knotFullscreen(this.context)}}this.bindThumbEvents();this.$element.trigger("slideChangeComplete",[this.context.activeSlide]).addClass("knot-thumbnails");return this},bindThumbEvents:function(){var c=this;this.context.$element.bind("slideChangeComplete.knotThumbs enteredFullscreen.knotThumbs",function(f,d){c.$container.fadeIn(c.options.transitionSpeed);c.updateActiveThumb(d);if(c.options.thumbnailStyle==="carousel"){c.$list.css({width:(c.$container.find(".aol-knot-thumb").not(".active").outerWidth(true)+1)*c.$thumbs.length});if(c.options.thumbnailControls){c.$prev.add(c.$next).css({lineHeight:c.$container.outerHeight(true)+"px"})}}if(c.$inner.css("visibility")!=="visible"){if(c.context.isFullscreen){c.$inner.css({visibility:"visible",display:"none"}).fadeIn()}else{if(!c.options.thisFullscreenThumbs){c.$inner.css({visibility:"visible"})}}}}).bind("exitedFullscreen.knotThumbs",function(){if(c.context.$fullscreenContainer){c.context.$fullscreenContainer.find(".aol-knot-thumbs-container").hide()}}).bind("slideTransitionStart.knotThumbs",function(g,f,d){c.updateActiveThumb(f).adjustThumbs(f)}).bind("knotResize.knotThumbs",function(){c.resetThumbs().adjustThumbs()}).bind("knotDestroyed.knotui",function(){c.destroy()}).delegate(".aol-knot-thumb","click.knotThumbs",function(f){var d=b(this).data("index");c.options.onThumbClick();if(c.context.activeSlide!==d){if(c.options.thumbnailsOnly){if(c.options.fullscreen){c.context.$element.trigger("enterFullscreen",[d])}}c.context.$element.trigger("slideChange",[d,null])}}).delegate(".aol-knot-thumb","mouseenter.knotThumbs",function(f){var d=+b(this).data("index");if(c.context.activeSlide!==d){c.context.$element.trigger("thumbMouseEnter",[f,d])}}).delegate(".aol-knot-thumb-prev, .aol-knot-thumb-next","click.knotThumbs",function(f){var d=b(f.target).is(".aol-knot-thumb-prev, .aol-knot-thumb-prev-icon")?"right":"left";c.pageThumbs(d)})},updateActiveThumb:function(c){this.$active=this.$thumbs.removeClass("active").eq(c).addClass("active");return this},resetThumbs:function(){if(a){this.$list.css({y:0,x:0})}else{this.$list.css({marginTop:0,marginLeft:0})}var c=this.$element.width();this.$container.css({width:c});this.$wrapper.css({width:c});if(this.options.thumbnailStyle==="carousel"){this.$inner.css({width:c})}return this},adjustThumbs:function(){if(this.busy){return}this.busy=true;var f=this;var i=false;var e=this.$list.outerWidth();var j=this.$active.outerWidth();if(j*2>e){i=true;e=this.$list.outerHeight();j=this.$active.outerHeight(true)}var k=0;var c=!i?this.$inner.outerWidth(true):this.$wrapper.outerHeight(true);var g=!i?this.$active.position().left:this.$active.position().top;if(a){k=!i?Math.abs(parseInt(this.$list.css("x"),0)):Math.abs(parseInt(this.$list.css("y"),0))}else{k=!i?Math.abs(parseInt(this.$list.css("margin-left"),0)):Math.abs(parseInt(this.$list.css("margin-top"),0))}var d=-((g+k-(c/2))+(j/2));var l=function(){f.busy=false;f.$element.trigger("thumbsCentered")};if(d<-(e-c)){d=-(e-c)}if(d>0){d=0}var h=a?!i?{x:d}:{y:d}:!i?{marginLeft:d}:{marginTop:d};if(a){this.$list.transition(h,f.options.transitionSpeed,l)}else{this.$list.animate(h,f.options.transitionSpeed,l)}return this},pageThumbs:function(g){if(this.busy){return}this.busy=true;var i=this;var c=this.$list.width();var d=0;var h=this.$inner.width();var f=0;var e=this.options.transitionSpeed;if(a){d=Math.abs(parseInt(this.$list.css("x"),0))}else{d=Math.abs(parseInt(this.$list.css("margin-left"),0))}if(g==="left"){f=-(d)-h;if(f<-(c-h)){f=-(c)+h}if(Math.abs(c-h)===Math.abs(d)&&this.options.loopThumbs==="restart"){f=0}}else{f=-(d)+h;if(f>0){f=0}if(this.options.loopThumbs==="restart"&&d===0){f=-(c)+h}}if(a){this.$list.transition({x:f},e,function(){i.busy=false})}else{this.$list.animate({marginLeft:f},e,function(){i.busy=false})}return this}};b.fn.knotThumbs=function(e,c){if(typeof e==="string"){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var f=b.data(this,"knotThumbs");if(!f){b.error("cannot call methods on knotThumbs prior to initialization; attempted to call method '"+e+"'");return}if(!b.isFunction(f[e])||e.charAt(0)==="_"){b.error("no such method '"+e+"' for knotThumbs instance");return}f[e].apply(f,d,c)})}else{this.each(function(){var f=b.data(this,"knotThumbs");if(f){f.option(e||{});b.data(this,"knotThumbs",new b.knotThumbs(e,this,c))}else{b.data(this,"knotThumbs",new b.knotThumbs(e,this,c))}})}return this}}(jQuery));(function(d){var c=(function(){var e=document.createElement("div").style;if("MozTransition" in e){return false}return"transition" in e||"WebkitTransition" in e||"MozTransition" in e||"msTransition" in e||"OTransition" in e}());var b=function(g,f){function e(){this.constructor=g}e.prototype=f.prototype;g.prototype=new e()};d.knotFullscreen=function(f,e){d.knotUi.call(this,f,e)};b(d.knotFullscreen,d.knotUi);var a={destroy:function(){this.$element.removeData("knotFullscreen").unbind(".knotFullscreen").undelegate(".knotFullscreen");this.$fullscreen.removeData("knotFullscreen").unbind(".knotFullscreen").undelegate(".knotFullscreen").empty().trigger("knotFullscreenDestroyed")},buildUi:function(){var m,l,g,i,f="",o="",p,j,e,n=[],k=this;this.$element.bind("knotUiBuilt",function(){k.refreshAd=d.noop});this.options.$knotFullscreenElement=this.$element;this.fullscreenPreloading={};this.fullscreenInstance=true;this.$wrapper=d("<div/>",{"class":"aol-knot-slide-wrapper"});this.$ul=d("<ul/>",{"class":"aol-knot-slides "+this.options.effect});this.$slides=d();if(typeof this.options.contentMap.fullscreenHtml==="function"){this.entryFunction=this.options.contentMap.fullscreenHtml}else{this.entryFunction=function(q){return d("<li/>",{"class":"aol-knot-slide aol-knot-slide-"+q.type}).data(q)}}if(this.options.contentMap.rightRailHtml){if(typeof this.options.contentMap.rightRailHtml==="function"){o=this.options.contentMap.rightRailHtml(this.context)}else{o=this.options.contentMap.rightRailHtml}}else{o=['<div class="aol-knot-fullscreen-exit"><i class="icon-remove"></i></div>','<div class="aol-knot-fullscreen-right-title"></div>','<div class="aol-knot-fullscreen-right-infobar">','<div class="aol-knot-fullscreen-title"></div>','<div class="aol-knot-fullscreen-caption"></div>',"</div>",'<div class="aol-knot-fullscreen-right-thumbs"></div>'].join("")}if(this.options.contentMap.bottomExtraHtml){if(typeof this.options.contentMap.bottomExtraHtml==="function"){f=this.options.contentMap.bottomExtraHtml(this.context)}else{f=this.options.contentMap.bottomExtraHtml}}this.$fullscreen=d(['<div class="aol-knot-fullscreen-wrapper',(this.options.fullscreenLBMN?" aol-knot-fullscreen-lb":""),'">','<div class="aol-knot-fullscreen-top">',(this.options.fullscreenLBMN?['<div class="aol-knot-fullscreen-topbar">','<div class="aol-knot-fullscreen-lb-ad" id="knotFullscreenLB-',this.options.galleryId,'"></div>',"</div>"].join(""):""),'<div class="aol-knot-fullscreen-content">','<div class="aol-knot-fullscreen-content-title"></div>','<div class="aol-knot-fullscreen-slider"></div>','<div class="aol-knot-fullscreen-slider-thumbs"></div>','<div class="aol-knot-fullscreen-infobar">','<div class="aol-knot-fullscreen-title"></div>','<div class="aol-knot-fullscreen-caption"></div>',"</div>","</div>",'<div class="aol-knot-fullscreen-right">',o,'<div class="aol-knot-fullscreen-right-ad" id="knotFullscreenAd-',this.options.galleryId,'"></div>',"</div>","</div>",'<div class="aol-knot-fullscreen-bottom">','<div class="aol-knot-fullscreen-share">',"<span>Share</span>",'<span id="aol-knot-share"><a id="knot-share"></a></span>','<i class="icon-facebook"><p class="aol-knot-fullscreen-social-label">Facebook</p></i>','<i class="icon-twitter"><p class="aol-knot-fullscreen-social-label">Twitter</p></i>','<i class="icon-google-plus-sign"><p class="aol-knot-fullscreen-social-label">Google&plus;</p></i>','<i class="icon-envelope-alt"><p class="aol-knot-fullscreen-social-label">Email</p></i>','<i class="icon-pinterest"><p class="aol-knot-fullscreen-social-label">Pinterest</p></i>',"</div>",'<div class="aol-knot-fullscreen-bottom-extra">',f,"</div>",'<div class="aol-knot-fullscreen-exit"><i class="icon-resize-small"></i></div>',"</div>","</div>"].join(""));this.$launcher=d('<div class="aol-knot-enter-fullscreen aol-knot-default-enter-fullscreen">Fullscreen</div>');this.$element.append(this.$fullscreen);this.$fullscreenSlider=this.$fullscreen.find(".aol-knot-fullscreen-slider");this.$fullscreenContent=this.$fullscreen.find(".aol-knot-fullscreen-content");this.$title=this.$fullscreen.find(".aol-knot-fullscreen-title");this.$contentTitle=this.$fullscreen.find(".aol-knot-fullscreen-content-title");this.$rightTitle=this.$fullscreen.find(".aol-knot-fullscreen-right-title");this.$rightThumbs=this.$fullscreen.find(".aol-knot-fullscreen-right-thumbs");this.$sliderThumbs=this.$fullscreen.find(".aol-knot-fullscreen-slider-thumbs");this.$caption=this.$fullscreen.find(".aol-knot-fullscreen-caption");this.$element.find(".aol-knot-slide-container").append(this.$launcher);this.$fullscreen.css({display:"block",visibility:"hidden"});d.each(this.context.entries,function(q,r){if(k.options.downloadEnabled){r.downloadEnabled=true}l=k.entryFunction(r,k.$element);l.data(r);k.$slides=k.$slides.add(l)});this.$ul.append(this.$slides);this.$prev=d(['<div class="aol-knot-nav-prev aol-knot-nav-outer">','<div class="aol-knot-nav-middle">','<div class="aol-knot-nav-inner">','<i class="aol-knot-nav-prev-icon icon-angle-left"></i>',"</div>","</div>","</div>"].join(""));this.$next=d(['<div class="aol-knot-nav-next aol-knot-nav-outer">','<div class="aol-knot-nav-middle">','<div class="aol-knot-nav-inner">','<i class="aol-knot-nav-next-icon icon-angle-right"></i>',"</div>","</div>","</div>"].join(""));this.$wrapper.append(this.$ul);if(this.options.slideshowTitle){this.$contentTitle.html(this.options.slideshowTitle);this.$rightTitle.html(this.options.slideshowTitle)}this.context.$fullscreenContainer=this.$fullscreen;if(this.options.fullscreenThumbs&&d.knotThumbs){p=d.extend(true,{},this.options);if(typeof this.options.fullscreenThumbnailControls!=="undefined"){p.thumbnailControls=this.options.fullscreenThumbnailControls}if(typeof this.options.fullscreenThumbnailStyle!=="undefined"){p.thumbnailStyle=this.options.fullscreenThumbnailStyle}else{p.thumbnailStyle="carousel"}p.thumbnailsOnly=false;p.thisFullscreenThumbs=true;e=d.extend({},{isFullscreenContainer:true},this.context);e.options=p;if(this.options.fullscreenThumbnailPosition==="slider"){this.$element.addClass("knot-thumbs-fullscreen-slider");this.$sliderThumbs.knotThumbs(this.context,e)}else{this.$rightThumbs.knotThumbs(this.context,e)}}this.$fullscreenSlider.css({textAlign:"center"}).empty().append(this.$wrapper).append(this.$prev).append(this.$next).append(this.$thumbs).trigger("knotFullscreenUiBuilt");if(this.options.effect==="translate"){this.$slides.css({width:this.$wrapper.width(),height:this.$wrapper.height()});var h=(this.$wrapper.width()-this.$slides.first().width())/2;if(c){this.$ul.css({width:(this.context.slideCount)*this.$wrapper.width(),x:h})}else{this.$ul.css({width:(this.context.slideCount)*this.$wrapper.width(),marginLeft:h})}}i=this.$prev.add(this.$next);i.css({height:this.$fullscreenSlider.height()});this.showSlide(this.context.activeSlide,null,function(){if(k.context.launchFullscreen||k.context.options.launchFullscreen){k.enterFullscreen()}}).bindEvents().bindFullscreenEvents()},adInit:function(){if(this.options.fullscreenAdMN){if(window.htmlAdWH&&this.options.fullscreenAdMN){window.htmlAdWH(this.options.fullscreenAdMN,"RR","RR","ajax","knotFullscreenAd-"+this.options.galleryId)}this.options.refreshDivId.push("knotFullscreenAd-"+this.options.galleryId)}if(this.options.fullscreenLBMN){if(window.htmlAdWH&&this.options.fullscreenLBMN){window.htmlAdWH(this.options.fullscreenLBMN,"LB","LB","ajax","knotFullscreenLB-"+this.options.galleryId)}this.options.refreshDivId.push("knotFullscreenLB-"+this.options.galleryId)}},bindFullscreenEvents:function(){var f=this;d(window).bind("resize.knotFullscreen",d.debounce(200,function(g){f.fullscreenResize()}));var e=function(g){if(g.which){switch(g.which){case 70:g.preventDefault();if(f.context.isFullscreen){return}f.context.$element.trigger("enterFullscreen");break;case 27:g.preventDefault();f.context.$element.trigger("exitFullscreen");break}}};this.context.$element.bind("enterFullscreen.knotFullscreen",function(){if(f.context.isFullscreen){return}f.enterFullscreen()}).bind("exitFullscreen.knotFullscreen",function(){if(!f.context.isFullscreen){return}f.exitFullscreen()}).bind("enteredFullscreen.knotFullscreen",function(h,g){f.options.onEnterFullscreen();f.updateHash(g)}).bind("exitedFullscreen.knotFullscreen",function(h,g){f.options.onExitFullscreen();f.updateHash(g)}).bind("mouseenter.knotFullscreen",function(){d(document).bind("keydown.knotFullscreen",e);f.$element.bind("mouseleave.knotFullscreen",function(){d(document).unbind("keydown.knotFullscreen",e)})}).bind("slideTransitionStart.knotFullscreen",function(h,g){f.updateText(g)}).delegate(".aol-knot-enter-fullscreen","click.knotFullscreen",function(g){g.preventDefault();g.stopImmediatePropagation();f.context.$element.trigger("enterFullscreen")}).delegate(".aol-knot-fullscreen-exit","click.knotFullscreen",function(g){g.preventDefault();g.stopImmediatePropagation();f.context.$element.trigger("exitFullscreen")});return this},enterFullscreen:function(){var e=this;e.$fullscreen.css({visibility:"visible"}).hide().fadeIn(function(){e.$element.trigger("enteredFullscreen",[e.context.activeSlide]);e.updateText(e.context.activeSlide)});d("html, body").addClass("knot-fullscreen");e.$element.find(".aol-knot-fullscreen-right-ad").show();e.$element.find(".aol-knot-fullscreen-lb-ad").show();e.context.isFullscreen=true;this.adInit();this.adInit=d.noop},exitFullscreen:function(){var e=this;this.context.$element.removeClass("in-fullscreen");if(this.context.entries[this.context.activeSlide].type==="video"){this.unloadSlide(this.context.activeSlide)}this.$fullscreen.fadeOut(function(){e.$fullscreen.css({visibility:"hidden"}).show()});d("html, body").removeClass("knot-fullscreen");this.context.$element.find(".aol-knot-fullscreen-right-ad").hide();this.context.$element.find(".aol-knot-fullscreen-lb-ad").hide();this.context.isFullscreen=false;this.context.$element.trigger("exitedFullscreen",[e.context.activeSlide])},updateText:function(e){var f=this.context.entries[e];if(f){this.$title.html(f.title);this.$caption.html(f.caption)}},fullscreenResize:function(){var f=this.$wrapper.width();var g=this.$wrapper.height();var h=(445/670)*f;var e;this.$slides.css({width:f,height:g});this.$ul.css({width:f*this.$slides.length});e=this.$prev.add(this.$next);e.css({height:this.$fullscreenSlider.height()-80});this.$element.trigger("knotResize");this.showSlide(this.context.activeSlide,null)}};d.each(a,function(e,f){d.knotFullscreen.prototype[e]=f});d.fn.knotFullscreen=function(f){if(typeof f==="string"){var e=Array.prototype.slice.call(arguments,1);this.each(function(){var g=d.data(this,"knotFullscreen");if(!g){d.error("Cannot call methods on knotFullscreen prior to initialization; Attempted to call method '"+f+"'");return}if(!d.isFunction(g[f])||f.charAt(0)==="_"){d.error("No such method '"+f+"' for knotFullscreen instance");return}g[f].apply(g,e)})}else{this.each(function(){var g=d.data(this,"knotFullscreen");if(g){g.destroy();g=undefined;d.data(this,"knotFullscreen",new d.knotFullscreen(f,this))}else{d.data(this,"knotFullscreen",new d.knotFullscreen(f,this))}})}return this}}(jQuery));