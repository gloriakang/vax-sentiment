function s_doPlugins(t){t.prop61=t.eVar9="D=g",t.campaign||(t.campaign=t.getParamValue("CMP")),t.campaign=t.getValOnce(t.campaign,"s_campaign",0),t.campaign&&(t.eVar38=t.eVar39="D=v0");var e=new Date;now=Math.floor(e.getTime()/864e5);var i=now-6,n=t.c_r("s_daily_habit")+"";n=n.split(","),newDiary=[],vC=1;for(var a=0,o=n.length;o>a;++a){var s=n[a];s>=i&&s<now&&(vC+=1)&&newDiary.push(s)}newDiary.push(now),newDiary=newDiary.join(","),e.setFullYear(e.getFullYear()+5),t.c_w("s_daily_habit",newDiary,e),t.eVar64=vC,t.eVar10=t.getDaysSinceLastVisit("s_lv"),t.prop16=t.getNewRepeat(30),t.prop71=t.getPreviousValue(t.channel,"s_prev_ch")}function E(){return function(){}}function AppMeasurement_Module_Media(t){var e=this;e.s=t;var i=window;i.s_c_in||(i.s_c_il=[],i.s_c_in=0),e._il=i.s_c_il,e._in=i.s_c_in,e._il[e._in]=e,i.s_c_in++,e._c="s_m",e.list=[],e.open=function(t,i,n,a){var o,s={},r=new Date,c="";if(i||(i=-1),t&&n){if(e.list||(e.list={}),e.list[t]&&e.close(t),a&&a.id&&(c=a.id),c)for(o in e.list)!Object.prototype[o]&&e.list[o]&&e.list[o].Rf==c&&e.close(e.list[o].name);s.name=t,s.length=i,s.xc=0,s.U=0,s.playerName=e.playerName?e.playerName:n,s.Rf=c,s.ce=0,s.aa=0,s.timestamp=Math.floor(r.getTime()/1e3),s.za=0,s.wc=s.timestamp,s.T=-1,s.Dc="",s.ha=-1,s.Ic=0,s.Qd={},s.Mc=0,s.Ja=0,s.V="",s.Ob=0,s.Yd=0,s.Cc=0,s.Kc=0,s.xa=!1,s.Jb="",s.yc="",s.zc=0,s.sc=!1,s.na="",s.complete=0,s.Af=0,s.Hb=0,s.Ib=0,e.list[t]=s,s.Ud=!1}},e.openAd=function(t,i,n,a,o,s,r,c){var l={};e.open(t,i,n,c),(l=e.list[t])&&(l.xa=!0,l.Jb=a,l.yc=o,l.zc=s,l.na=r)},e.Oe=function(t){var i=e.list[t];e.list[t]=0,i&&i.monitor&&clearTimeout(i.monitor.O)},e.close=function(t){e.ja(t,0,-1)},e.play=function(t,i,n,a){var o=e.ja(t,1,i,n,a);o&&!o.monitor&&(o.monitor={},o.monitor.update=function(){1==o.za&&e.ja(o.name,3,-1),o.monitor.O=setTimeout(o.monitor.update,1e3)},o.monitor.update())},e.click=function(t,i){e.ja(t,7,i)},e.complete=function(t,i){e.ja(t,5,i)},e.stop=function(t,i){e.ja(t,2,i)},e.track=function(t){e.ja(t,4,-1)},e.yf=function(t,i){var n,a,o="a.media.",s=t.linkTrackVars,r=t.linkTrackEvents,c="m_i",l=t.contextData;if(i.xa&&(o+="ad.",i.Jb&&(l["a.media.name"]=i.Jb,l[o+"pod"]=i.yc,l[o+"podPosition"]=i.zc),i.Mc||(l[o+"CPM"]=i.na)),i.sc&&(l[o+"clicked"]=!0,i.sc=!1),l["a.contentType"]="video"+(i.xa?"Ad":""),l["a.media.channel"]=e.channel,l[o+"name"]=i.name,l[o+"playerName"]=i.playerName,i.length>0&&(l[o+"length"]=i.length),l[o+"timePlayed"]=Math.floor(i.aa),Math.floor(i.aa)>0&&(l[o+"timePlayed"]=Math.floor(i.aa)),i.Mc||(l[o+"view"]=!0,c="m_s",e.Heartbeat&&e.Heartbeat.enabled&&(c=i.xa?e.__primetime?"mspa_s":"msa_s":e.__primetime?"msp_s":"ms_s"),i.Mc=1),i.V&&(l[o+"segmentNum"]=i.Ja,l[o+"segment"]=i.V,i.Ob>0&&(l[o+"segmentLength"]=i.Ob),i.Cc&&i.aa>0&&(l[o+"segmentView"]=!0)),!i.Af&&i.complete&&(l[o+"complete"]=!0,i.gg=1),i.Hb>0&&(l[o+"milestone"]=i.Hb),i.Ib>0&&(l[o+"offsetMilestone"]=i.Ib),s)for(a in l)Object.prototype[a]||(s+=",contextData."+a);n=l["a.contentType"],t.pe=c,t.pev3=n;var u,d;if(e.contextDataMapping){t.events2||(t.events2=""),s&&(s+=",events");for(a in e.contextDataMapping)if(!Object.prototype[a]){if(c=a.length>o.length&&a.substring(0,o.length)==o?a.substring(o.length):"",n=e.contextDataMapping[a],"string"==typeof n)for(u=n.split(","),d=0;d<u.length;d++)n=u[d],"a.contentType"==a?(s&&(s+=","+n),t[n]=l[a]):"view"==c||"segmentView"==c||"clicked"==c||"complete"==c||"timePlayed"==c||"CPM"==c?(r&&(r+=","+n),"timePlayed"==c||"CPM"==c?l[a]&&(t.events2+=(t.events2?",":"")+n+"="+l[a]):l[a]&&(t.events2+=(t.events2?",":"")+n)):"segment"==c&&l[a+"Num"]?(s&&(s+=","+n),t[n]=l[a+"Num"]+":"+l[a]):(s&&(s+=","+n),t[n]=l[a]);else("milestones"==c||"offsetMilestones"==c)&&(a=a.substring(0,a.length-1),l[a]&&e.contextDataMapping[a+"s"][l[a]]&&(r&&(r+=","+e.contextDataMapping[a+"s"][l[a]]),t.events2+=(t.events2?",":"")+e.contextDataMapping[a+"s"][l[a]]));l[a]&&(l[a]=0),"segment"==c&&l[a+"Num"]&&(l[a+"Num"]=0)}}t.linkTrackVars=s,t.linkTrackEvents=r},e.ja=function(t,i,n,a,o){var s,r,c,l,u,d={},h=(new Date).getTime()/1e3,p=e.trackVars,m=e.trackEvents,f=e.trackSeconds,g=e.trackMilestones,v=e.trackOffsetMilestones,b=e.segmentByMilestones,k=e.segmentByOffsetMilestones,y=1,w={};if(e.channel||(e.channel=e.s.w.location.hostname),(d=t&&e.list&&e.list[t]?e.list[t]:0)&&(d.xa&&(f=e.adTrackSeconds,g=e.adTrackMilestones,v=e.adTrackOffsetMilestones,b=e.adSegmentByMilestones,k=e.adSegmentByOffsetMilestones),0>n&&(n=1==d.za&&d.wc>0?h-d.wc+d.T:d.T),d.length>0&&(n=n<d.length?n:d.length),0>n&&(n=0),d.xc=n,d.length>0&&(d.U=d.xc/d.length*100,d.U=d.U>100?100:d.U),d.T<0&&(d.T=n),u=d.Ic,w.name=t,w.ad=d.xa,w.length=d.length,w.openTime=new Date,w.openTime.setTime(1e3*d.timestamp),w.offset=d.xc,w.percent=d.U,w.playerName=d.playerName,w.mediaEvent=d.ha<0?"OPEN":1==i?"PLAY":2==i?"STOP":3==i?"MONITOR":4==i?"TRACK":5==i?"COMPLETE":7==i?"CLICK":"CLOSE",i>2||i!=d.za&&(2!=i||1==d.za))){if(o||(a=d.Ja,o=d.V),i){if(1==i&&(d.T=n),(3>=i||i>=5)&&d.ha>=0&&(y=!1,p=m="None",d.ha!=n)){if(r=d.ha,r>n&&(r=d.T,r>n&&(r=n)),c=g?g.split(","):0,d.length>0&&c&&n>=r)for(l=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&r/d.length*100<s&&d.U>=s&&(y=!0,l=c.length,w.mediaEvent="MILESTONE",d.Hb=w.milestone=s);if((c=v?v.split(","):0)&&n>=r)for(l=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&s>r&&n>=s&&(y=!0,l=c.length,w.mediaEvent="OFFSET_MILESTONE",d.Ib=w.offsetMilestone=s)}if(d.Yd||!o){if(b&&g&&d.length>0){if(c=g.split(","))for(c.push("100"),l=r=0;l<c.length;l++)(s=c[l]?parseFloat(""+c[l]):0)&&(d.U<s&&(a=l+1,o="M:"+r+"-"+s,l=c.length),r=s)}else if(k&&v&&(c=v.split(",")))for(c.push(""+(d.length>0?d.length:"E")),l=r=0;l<c.length;l++)((s=c[l]?parseFloat(""+c[l]):0)||"E"==c[l])&&((s>n||"E"==c[l])&&(a=l+1,o="O:"+r+"-"+s,l=c.length),r=s);o&&(d.Yd=!0)}(o||d.V)&&o!=d.V&&(d.Kc=!0,d.V||(d.Ja=a,d.V=o),d.ha>=0&&(y=!0)),(i>=2||d.U>=100)&&d.T<n&&(d.ce+=n-d.T,d.aa+=n-d.T),(2>=i||3==i&&!d.za)&&(d.Dc+=(1==i||3==i?"S":"E")+Math.floor(n),d.za=3==i?1:i),!y&&d.ha>=0&&3>=i&&(f=f?f:0)&&d.aa>=f&&(y=!0,w.mediaEvent="SECONDS"),d.wc=h,d.T=n}(!i||3>=i&&d.U>=100)&&(2!=d.za&&(d.Dc+="E"+Math.floor(n)),i=0,p=m="None",w.mediaEvent="CLOSE"),7==i&&(y=w.clicked=d.sc=!0),(5==i||e.completeByCloseOffset&&(!i||d.U>=100)&&d.length>0&&n>=d.length-e.completeCloseOffsetThreshold)&&(y=w.complete=d.complete=!0),h=w.mediaEvent,"MILESTONE"==h?h+="_"+w.milestone:"OFFSET_MILESTONE"==h&&(h+="_"+w.offsetMilestone),d.Qd[h]?w.eventFirstTime=!1:(w.eventFirstTime=!0,d.Qd[h]=1),w.event=w.mediaEvent,w.timePlayed=d.ce,w.segmentNum=d.Ja,w.segment=d.V,w.segmentLength=d.Ob,e.monitor&&4!=i&&e.monitor(e.s,w),e.Heartbeat&&e.Heartbeat.enabled&&(w=[],w.push(d.name),d.Ud||(d.Ud=!0,w.push(d.length),w.push(d.playerName),d.xa?(w.push(d.Jb),w.push(d.yc),w.push(d.zc),w.push(d.na),e.Heartbeat.callMethodWhenReady("openAd",w)):e.Heartbeat.callMethodWhenReady("open",w),w=[],w.push(d.name)),0==i?e.Heartbeat.callMethodWhenReady("close",w):(w.push(n),1==i?(w.push(d.Ja),w.push(d.V),w.push(d.Ob),e.Heartbeat.callMethodWhenReady("play",w)):2==i?e.Heartbeat.callMethodWhenReady("stop",w):3==i?e.Heartbeat.callMethodWhenReady("monitor",w):5==i?e.Heartbeat.callMethodWhenReady("complete",w):7==i&&e.Heartbeat.callMethodWhenReady("click",w)),d.ha>=0&&(y=!1)),0==i&&e.Oe(t),y&&d.Ic==u&&(t={},t.contextData={},t.linkTrackVars=p,t.linkTrackEvents=m,t.linkTrackVars||(t.linkTrackVars=""),t.linkTrackEvents||(t.linkTrackEvents=""),e.yf(t,d),t.linkTrackVars||(t["!linkTrackVars"]=1),t.linkTrackEvents||(t["!linkTrackEvents"]=1),e.s.track(t),d.Kc?(d.Ja=a,d.V=o,d.Cc=!0,d.Kc=!1):d.aa>0&&(d.Cc=!1),d.Dc="",d.Hb=d.Ib=0,d.aa-=Math.floor(d.aa),d.ha=n,d.Ic++)}return d},e.vf=function(t,i,n,a,o){var s=0;t&&(!e.autoTrackMediaLengthRequired||i&&i>0)&&(e.list&&e.list[t]?s=1:(1==n||3==n)&&(e.open(t,i,"HTML5 Video",o),s=1),s&&e.ja(t,n,a,-1,0))},e.attach=function(t){var i,n,a;t&&t.tagName&&"VIDEO"==t.tagName.toUpperCase()&&(e.hb||(e.hb=function(t,i,n){var a,o;e.autoTrack&&(a=t.currentSrc,(o=t.duration)||(o=-1),0>n&&(n=t.currentTime),e.vf(a,o,i,n,t))}),i=function(){e.hb(t,1,-1)},n=function(){e.hb(t,1,-1)},e.ra(t,"play",i),e.ra(t,"pause",n),e.ra(t,"seeking",n),e.ra(t,"seeked",i),e.ra(t,"ended",function(){e.hb(t,0,-1)}),e.ra(t,"timeupdate",i),(a=function(){!t.paused&&!t.ended&&!t.seeking&&e.hb(t,3,-1),setTimeout(a,1e3)})())},e.ra=function(t,e,i){t.attachEvent?t.attachEvent("on"+e,i):t.addEventListener&&t.addEventListener(e,i,!1)},void 0==e.completeByCloseOffset&&(e.completeByCloseOffset=1),void 0==e.completeCloseOffsetThreshold&&(e.completeCloseOffsetThreshold=1);var n=new function(t){this.Je=function(t){this.s=t,this.enabled=!1,this.v=new this.Ka.Of.ne(t)},this.open=function(t,e,i){this.v.open(t,e,i)},this.openAd=function(t,e,i,n,a,o,s){this.v.openAd(t,e,i,n,a,o,s)},this.close=function(t){this.v.close(t)},this.play=function(t,e,i,n,a){this.v.play(t,e,i,n,a)},this.monitor=function(t,e){this.v.monitor(t,e)},this.stop=function(t,e){this.v.stop(t,e)},this.click=function(t,e){this.v.click(t,e)},this.complete=function(t,e){this.v.complete(t,e)},this.setup=function(t){this.v.Wf(t)},this.bufferStart=function(){this.v.xf()},this.bitrateChange=function(t){this.v.wf(t)},this.updateQoSInfo=function(t,e,i){this.v.bg(t,e,i)},this.adBreakStart=function(t){this.v.sf(t)},this.adBreakEnd=function(){this.v.rf()},this.trackError=function(t,e,i){this.v.$f(t,e,i)},this.sessionComplete=function(){this.v.Uf()},this.__setPsdkVersion=function(t){this.v.Ke(t)},function(t){if("undefined"==typeof e)var e={};if("undefined"==typeof i)var i={};i.event||(i.event={}),i.a||(i.a={}),i.H||(i.H={}),i.bb||(i.bb={}),i.M||(i.M={}),function(t){t.extend=function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.r=e.prototype,t}}(e),function(t){t.Q=function(t,e){var i,n=[];for(i in e)e.hasOwnProperty(i)&&"function"==typeof e[i]&&n.push(i);for(i=0;i<n.length;i++){var a=n[i];t.prototype[a]=e[a]}}}(e),function(t){t.Md={Pd:function(){this.ea&&this.ea.apply(this,arguments),this.ea=j}}}(e),function(t){t.Oa=!1,t.P={N:function(t){this.Ua=!0,this.Ab=t},jg:function(){this.Ua=!1},log:function(e){t.Oa&&this.Ua&&window.console&&window.console.log&&window.console.log(this.Ab+e)},info:function(e){t.Oa&&this.Ua&&window.console&&window.console.info&&window.console.info(this.Ab+e)},warn:function(e){t.Oa&&this.Ua&&window.console&&window.console.warn&&window.console.warn(this.Ab+e)},error:function(e){if(t.Oa&&this.Ua&&window.console&&window.console.error)throw e=this.Ab+e,window.console.error(e),Error(e)}}}(e),function(t){function e(t,e){this.type=t,this.data=e}e.wb="success",e.Xb="error",t.S=e}(e),function(t){function e(){this.F={}}e.prototype.addEventListener=function(t,e,i){t&&e&&(this.F[t]=this.F[t]||[],this.F[t].push({zf:e,Ld:i||window}))},e.prototype.dispatchEvent=function(t){if(t.type)for(var e in this.F)if(this.F.hasOwnProperty(e)&&t.type===e){var i=this.F[e];for(e=0;e<i.length;e++)i[e].zf.call(i[e].Ld,t);break}},e.prototype.eb=function(t){if(t){var e,i;for(i in this.F)if(this.F.hasOwnProperty(i)){for(e=this.F[i].length-1;e>=0;e--)this.F[i][e].Ld===t&&this.F[i].splice(e,1);this.F[i].length||delete this.F[i]}}else this.F={}},t.kd=e}(e),function(t){function e(){return e.prototype.Ta||(e.prototype.Ta=new i),e.prototype.Ta}var i=t.kd;t.ca=e}(e),function(t){function e(){}function i(){i.r.constructor.call(this)}var n=t.S,a=t.kd;e.ld="GET",t.extend(i,a),i.prototype.Cf=function(e){if(e.I=new window.XMLHttpRequest,!("withCredentials"in e.I)&&(e.I="undefined"!=typeof window.XDomainRequest?new window.XDomainRequest:j,e.I)){var a=this;e.I.onreadystatechange=function(){if(4===e.I.readyState){var o={};o[i.pd]=e.I.status,e.I.status>=200&&e.I.status<400?(o[i.od]=e.I.responseText,o[i.qb]=a,a.dispatchEvent(new t.S(n.wb,o))):a.dispatchEvent(new t.S(n.Xb,o))}}}},i.Eb=j,i.prototype.Mf=function(e){i.Eb||(i.Eb=new Image,i.Eb.alt=""),i.Eb.src=e.url,e={},e[i.pd]=200,e[i.od]="",e[i.qb]=this,this.dispatchEvent(new t.S(n.wb,e))},i.prototype.close=function(){this.eb()},i.prototype.load=function(t){t&&t.method&&t.url&&(this.Cf(t),t.I?(t.I.open(t.method,t.url,!0),t.I.send()):this.Mf(t))},i.pd="status",i.od="response",i.qb="instance",t.Ie=e,t.He=function(t,e){this.url=t||j,this.method=e,this.I=j},t.Ge=i}(e),function(t,e){function i(){}i.Fa="report",i.qa="what",i.Ga="reset",i.Sb="account",i.cc="sc_tracking_server",i.xb="tracking_server",i.lb="check_status_server",i.rb="job_id",i.Pa="publisher",i.fc="stream_type",i.$b="ovp",i.ec="sdk",i.bd="channel",i.nb="debug_tracking",i.yb="track_local",i.Ha="visitor_id",i.Aa="analytics_visitor_id",i.Da="marketing_cloud_visitor_id",i.i="name",i.Ca="length",i.Ea="player_name",i.X="timer_interval",i.rd="tracking_interval",i.cd="check_status_interval",i.gc="track_external_errors",i.ac="parent_name",i.nd="parent_pod",i.bc="parent_pod_position",i.ub="parent_pod_offset",i.na="parent_pod_cpm",i.B="offset",i.vb="source",i.Yb="error_id",i.kb="bitrate",i.Zb="fps",i.Vb="dropped_frames",e.event.ba=i}(e,i),function(t,e){function i(t,e){i.r.constructor.call(this,t,e)}t.extend(i,t.S),i.La="api_destroy",i.Tb="api_config",i.Uc="api_open_main",i.Tc="api_open_ad",i.Qc="api_close",i.Vc="api_play",i.Sc="api_monitor",i.Yc="api_stop",i.Pc="api_click",i.Rc="api_complete",i.Zc="api_track_error",i.Wc="api_qos_info",i.Nc="api_bitrate_change",i.Oc="api_buffer_start",i.Ub="api_pod_offset",i.Xc="api_session_complete",e.event.Ma=i}(e,i),function(t,e){function i(t,e){i.r.constructor.call(this,t,e)}t.extend(i,t.S),i.Ba="context_data_available",e.event.dd=i}(e,i),function(t,e){function i(t,e){i.r.constructor.call(this,t,e)}t.extend(i,t.S),i.oa="data_request",i.mb="data_response",i.ya={Qa:"tracking_timer_interval",md:"main_video_publisher"},e.event.Wb=i}(e,i),function(t,e){function i(t,e){i.r.constructor.call(this,t,e)}t.extend(i,t.S),i.sb="network_check_status_complete",e.event.tb=i}(e,i),function(t,e){function i(t,e){i.r.constructor.call(this,t,e)}t.extend(i,t.S),i.CLOCK_TRACKING_TICK="CLOCK_TRACKING_TICK",i.CLOCK_TRACKING_ENABLE="CLOCK_TRACKING_ENABLE",i.CLOCK_TRACKING_DISABLE="CLOCK_TRACKING_DISABLE",i.CLOCK_CHECK_STATUS_TICK="CLOCK_CHECK_STATUS_TICK",i.CLOCK_CHECK_STATUS_ENABLE="CLOCK_CHECK_STATUS_ENABLE",i.CLOCK_CHECK_STATUS_DISABLE="CLOCK_CHECK_STATUS_DISABLE",e.event.Na=i}(e,i),function(t,e){function i(t,e){this.value=t,this.hint=e}function n(t){this.Bc=t,this.data={}}i.pa="short",n.prototype.c=function(t,e,i){var n=this;return function(){return arguments.length&&(n[t]=arguments[0],n.Pb(e,arguments[0],i)),n[t]}},n.prototype.Pb=function(t,e,n){this.data[t]=new i(e,n)},e.a.R=n,e.a.ed=i}(e,i),function(t,e){function i(t,e){i.r.constructor.call(this,t),this.cg=this.c("_year","year",n.pa),this.Qf=this.c("_month","month",n.pa),this.Df=this.c("_day","day",n.pa),this.Kf=this.c("_hour","hour",n.pa),this.Pf=this.c("_minute","minute",n.pa),this.Sf=this.c("_second","second",n.pa),this.cg(e.getUTCFullYear()),this.Qf(e.getUTCMonth()+1),this.Df(e.getUTCDate()),this.Kf(e.getUTCHours()),this.Pf(e.getUTCMinutes()),this.Sf(e.getUTCSeconds())}var n=e.a.ed;t.extend(i,e.a.R),e.a.he=i}(e,i),function(t,e){function i(){if(i.r.constructor.call(this,"asset"),this.Fb=this.c("_cpm","cpm",j),this.L=this.c("_adId","ad_id",j),this.Nb=this.c("_resolver","resolver",j),this.Kb=this.c("_podId","pod_id",j),this.Lb=this.c("_podPosition","pod_position",j),this.Mb=this.c("_podSecond","pod_second",j),this.length=this.c("_length","length",j),this.Fb(""),this.L(""),this.Nb(""),this.Kb(""),this.Lb(""),this.Mb(0),this.length(0),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.Fb(t.Fb()),this.L(t.L()),this.Nb(t.Nb()),this.Kb(t.Kb()),this.Lb(t.Lb()),this.Mb(t.Mb()),this.length(t.length())}}t.extend(i,e.a.R),e.a.$c=i}(e,i),function(t,e){function i(){if(i.r.constructor.call(this,"asset"),this.type=this.c("_type","type",j),this.k=this.c("_videoId","video_id",j),this.K=this.c("_publisher","publisher",j),this.q=this.c("_adData","ad_data",j),this.duration=this.c("_duration","duration",j),this.type(""),this.k(""),this.K(""),this.q(j),this.duration(0),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.type(t.type()),this.k(t.k()),this.K(t.K()),this.duration(t.duration()),(t=t.q())&&this.q(new n(t))}}var n=e.a.$c;t.extend(i,e.a.R),i.sd="vod",i.Ce="live",i.Be="linear",i.Ra="ad",e.a.jb=i}(e,i),function(t,e){function i(t){i.r.constructor.call(this,"event"),this.pf=t,this.type=this.c("_type","type",j),this.count=this.c("_count","count",j),this.Gc=this.c("_totalCount","total_count",j),this.duration=this.c("_duration","duration",j),this.Hc=this.c("_totalDuration","total_duration",j),this.ka=this.c("_playhead","playhead",j),this.id=this.c("_id","id",j),this.source=this.c("_source","source",j),this.Ac=this.c("_prevTs","prev_ts",j),this.qf=function(){var t=1e3*this.pf;this.pc=new Date(Math.floor(this.oc/t)*t),this.Pb("ts_as_date",new n(this.Bc,this.pc),j)},this.Rb=function(){return arguments.length&&(this.oc=arguments[0],this.Pb("ts",this.oc,j),this.qf()),this.oc},this.ag=function(){arguments.length&&(this.pc=arguments[0],this.Pb("ts_as_date",new n(this.Bc,this.pc),j))},this.type(""),this.count(0),this.Gc(0),this.duration(0),this.Hc(0),this.ka(0),this.id(""),this.source(""),this.Ac(-1),this.Rb((new Date).getTime())}var n=e.a.he;t.extend(i,e.a.R),i.le="load",i.me="unload",i.ob="start",i.jd="play",i.hd="pause",i.je="buffer",i.ie="bitrate_change",i.ke="error",i.fd="active",i.gd="complete",e.a.pb=i}(e,i),function(t,e){function i(){i.r.constructor.call(this,"stream"),this.qc=this.c("_bitrate","bitrate",j),this.Rd=this.c("_fps","fps",j),this.Od=this.c("_droppedFrames","dropped_frames",j),this.qc(0),this.Rd(0),this.Od(0)}t.extend(i,e.a.R),e.a.re=i}(e,i),function(t,e){function i(){i.r.constructor.call(this,"sc"),this.Xd=this.c("_reportSuiteId","rsid",j),this.trackingServer=this.c("_trackingServer","tracking_server",j),this.Xd(""),this.trackingServer("")}t.extend(i,e.a.R),e.a.Ae=i}(e,i),function(t,e){function i(){i.r.constructor.call(this,"sp"),this.ia=this.c("_ovp","ovp",j),this.la=this.c("_sdk","sdk",j),this.channel=this.c("_channel","channel",j),this.playerName=this.c("_playerName","player_name",j),this.ia("unknown"),this.la("unknown"),this.channel("unknown"),this.playerName("")}t.extend(i,e.a.R),e.a.xe=i}(e,i),function(t,e){function i(){i.r.constructor.call(this,"event"),this.Ec=this.c("_sessionId","sid",j),this.Ec("")}t.extend(i,e.a.R),e.a.ye=i}(e,i),function(t,e){function i(){if(i.r.constructor.call(this,"stream"),this.rc=this.c("_cdn","cdn",j),this.name=this.c("_name","name",j),this.rc(""),this.name(""),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.rc(t.rc()),this.name(t.name())}}t.extend(i,e.a.R),e.a.qd=i}(e,i),function(t,e){function i(){if(i.r.constructor.call(this,"user"),this.uc=this.c("_device","device",j),this.country=this.c("_country","country",j),this.city=this.c("_city","city",j),this.latitude=this.c("_latitude","latitude",j),this.longitude=this.c("_longitude","longitude",j),this.ib=this.c("_visitorId","id",j),this.$a=this.c("_analyticsVisitorId","aid",j),this.ab=this.c("_marketingCloudVisitorId","mid",j),this.uc(""),this.country(""),this.city(""),this.latitude(""),this.longitude(""),this.ib(""),this.$a(""),this.ab(""),arguments.length&&arguments[0]instanceof i){var t=arguments[0];this.uc(t.uc()),this.country(t.country()),this.city(t.city()),this.latitude(t.latitude()),this.longitude(t.longitude()),this.ib(t.ib()),this.$a(t.$a()),this.ab(t.ab())}}t.extend(i,e.a.R),e.a.vd=i}(e,i),function(t,e){e.a.ue=function(t,e,i,n,a){this.ga=t,this.g=e,this.Lc=i,this.Fc=n,this.cb=a}}(e,i),function(t,e){var i=e.a.pb;e.a.te=function(t,e,n){this.Xf=t,this.Tf=e,this.Vf=n,this.G=[],this.Za=function(t){this.G.push(t)},this.lg=function(){return this.G},this.Gf=function(){if(this.G.length)for(var t=this.G.length-1;t>=0;t--)this.G[t].ga.type()===i.hd&&this.G.splice(t,1)}}}(e,i),function(t,e){function i(){}i.prototype.$d=E(),i.prototype.ae=E(),i.prototype.W=E(),i.prototype.Zd=E(),i.prototype.be=E(),e.a.we=i}(e,i),function(t,e){function i(){this.N("[media-fork::QuerystringSerializer] > "),this.da=function(t){return t?t+"&":""},this.Gd=function(t){return t&&t.length>0&&(t=t.substring(0,t.length-1)),t},this.mf=function(t){var e,i=[];for(e in t.data)if(t.data.hasOwnProperty(e)){var n=t.data[e],a=n.value;n=n.hint;var s=j,r=t.Bc;a===j||"undefined"==typeof a||("number"==typeof a?s=this.Zd(e,a,r,n):"string"==typeof a?s=this.be(e,a,r,n):a instanceof o?s=this.W(a):this.warn("#_processDao() > Unable to serialize DAO. Field: "+e+". Value: "+a+"."),s&&i.push(s))}return i}}var n=t.Q,a=t.P,o=e.a.R,s=e.a.ed;t.extend(i,e.a.we),n(i,a),i.prototype.$d=function(t){for(var e=[],i=t.G,n=0;n<i.length;n++){var a=this.ae(i[n])+"&";a+=this.da(this.W(t.Xf)),a+=this.da(this.W(t.Tf)),a+=this.da(this.W(t.Vf)),a=this.Gd(a),e.push(a)}return e},i.prototype.ae=function(t){var e=this.da(this.W(t.ga));return e+=this.da(this.W(t.g)),e+=this.da(this.W(t.Lc)),e+=this.da(this.W(t.Fc)),e+=this.da(this.W(t.cb)),e=this.Gd(e)},i.prototype.W=function(t){t=this.mf(t);for(var e="",i=0;i<t.length;i++)e+=i==t.length-1?t[i]:t[i]+"&";return e},i.prototype.Zd=function(t,e,i,n){var a="l";return e==j||void 0===e||isNaN(e)?j:(n&&"string"==typeof n&&n===s.pa&&(a="h"),a+":"+i+":"+t+"="+e)},i.prototype.be=function(t,e,i){return e?"s:"+i+":"+t+"="+window.encodeURIComponent(e):j},e.a.se=i}(e,i),function(t,e){function i(t){this.Qb=0,this.O=t,this.Gb=!1}function n(){if(n.prototype.Ta)return n.prototype.Ta;var t=this;this.N("[media-fork::TimerManager] > "),this.Ad=0,this.fa={},this.ua=function(){this.log("#_onApiDestroy()"),clearInterval(this.yd),c().eb(this)},this.jf=function(){this.log("#_onTick() > ------------------- ("+this.Ad+")"),this.Ad++;for(var t in this.fa)if(this.fa.hasOwnProperty(t)){var e=this.fa[t];if(e.Gb&&(e.Qb++,e.Qb%e.O===0)){var i={};i[r.X]=e.O,c().dispatchEvent(new s(s[t],i))}}},c().addEventListener(o.La,this.ua,this),this.yd=setInterval(function(){t.jf()},1e3*l),this.Lf=function(t){return(t=this.fa[t])&&t.Gb},this.Kd=function(t,e){this.fa[t]=new i(e)},this.Ef=function(t){delete this.fa[t]},this.Yf=function(t,e){this.log("#startTimer(name="+t+", reset="+e+")");var i=this.fa[t];i&&(i.Gb=!0,e)&&(this.log("Resseting timer: "+t),i.Qb=0)},this.Zf=function(t,e){this.log("#startTimer(name="+t+", reset="+e+")");var i=this.fa[t];i&&(i.Gb=!1,e)&&(this.log("Resseting timer: "+t),i.Qb=0)},n.prototype.Ta=this}var a=t.Q,o=e.event.Ma,s=e.event.Na,r=e.event.ba,c=t.ca,l=1;a(n,t.P),new n,e.M.Ee=n}(e,i),function(t,e){function i(t,e,i,n){this.N("[media-fork::Timer] > "),this.O=n,this.ma=t,this.Hf=e,this.Ff=i,s().Kd(this.ma,this.O),this.ua=function(){this.Nd()},this.lf=function(t){t=t.data;var e=!1;t&&t.hasOwnProperty(r.Ga)&&(e=t[r.Ga]),this.start(e)},this.kf=function(t){t=t.data;var e=!1;t&&t.hasOwnProperty(r.Ga)&&(e=t[r.Ga]),this.stop(e)},a().addEventListener(o.La,this.ua,this),a().addEventListener(this.Hf,this.lf,this),a().addEventListener(this.Ff,this.kf,this)}var n=t.Q,a=t.ca,o=e.event.Ma,s=e.M.Ee,r=e.event.ba;n(i,t.P),i.prototype.start=function(t){this.log("#start("+this.ma+")"),s().Yf(this.ma,t)},i.prototype.stop=function(t){this.log("#stop("+this.ma+")"),s().Zf(this.ma,t)},i.prototype.Nd=function(){a().eb(this),s().Ef(this.ma)},i.prototype.setInterval=function(t){var e=s().Lf(this.ma);this.stop(!0),this.O=t,s().Kd(this.ma,this.O),e&&this.start(!0)},e.M.ud=i}(e,i),function(t,e){function i(){this.N("[media-fork::TrackingTimer] > "),i.r.constructor.call(this,c.CLOCK_TRACKING_TICK,c.CLOCK_TRACKING_ENABLE,c.CLOCK_TRACKING_DISABLE,u),this.kc=function(t){t=t.data[l.rd],this.log("#_onCheckStatusComplete(interval="+t+")"),t?t===this.O?this.log("#_onCheckStatusComplete() > Interval value not changed."):(this.log("#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)):(this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(u))},this.lc=function(t){switch(t=t.data[l.qa],this.log("#_onDataRequest(what="+t+")"),t){case s.ya.Qa:t={},t[l.X]=this.O,o().dispatchEvent(new s(s.mb,t))}},o().addEventListener(r.sb,this.kc,this),o().addEventListener(s.oa,this.lc,this)}var n=t.Q,a=t.P,o=t.ca,s=e.event.Wb,r=e.event.tb,c=e.event.Na,l=e.event.ba,u=10;t.extend(i,e.M.ud),n(i,a),e.M.Fe=i}(e,i),function(t,e){function i(){this.N("[media-fork::CheckStatusTimer] > "),i.r.constructor.call(this,u.CLOCK_CHECK_STATUS_TICK,u.CLOCK_CHECK_STATUS_ENABLE,u.CLOCK_CHECK_STATUS_DISABLE,a);var t=this;setTimeout(function(){t.Qe()},200),this.Qe=function(){this.log("#_initialCheck()");var t={};t[l.X]=this.O,r().dispatchEvent(new u(u.CLOCK_CHECK_STATUS_TICK,t))},this.kc=function(t){t=t.data[l.cd],this.log("#_onCheckStatusComplete(interval="+t+")"),t?t===this.O?this.log("#_onCheckStatusComplete() > Interval value not changed."):t>n?(this.warn("#_onCheckStatusComplete() > Interval value too large: "+t),this.setInterval(n)):(this.log("#_onCheckStatusComplete() > Interval changed to: "+t),this.setInterval(t)):(this.warn("#_onCheckStatusComplete() > Invalid interval value."),this.setInterval(a))},r().addEventListener(c.sb,this.kc,this)}var n=600,a=60,o=t.Q,s=t.P,r=t.ca,c=e.event.tb,l=e.event.ba,u=e.event.Na;t.extend(i,e.M.ud),o(i,s),e.M.de=i}(e,i),function(t,e){var i=e.M.de,n=e.M.Fe;e.M.ee=function(){this.dg=new i,this.fg=new n}}(e,i),function(t,e){function i(t){this.N("[media-fork::SettingsParser] > "),this.Bd=t,this.log("#SettingsParser(data="+t+")")}var n=t.Q,a=t.ca,o=e.event.ba,s=e.event.tb;n(i,t.P),i.prototype.parse=function(){var t,e,i,n;if(this.Bd){window.DOMParser?n=(new window.DOMParser).parseFromString(this.Bd,"text/xml"):(n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(this.data));var r;(r=parseInt(n.getElementsByTagName("trackingInterval")[0].childNodes[0].nodeValue,10))&&(t=r),(r=parseInt(n.getElementsByTagName("setupCheckInterval")[0].childNodes[0].nodeValue,10))&&(e=r),(r=parseInt(n.getElementsByTagName("trackExternalErrors")[0].childNodes[0].nodeValue,10))&&(i=1===r),n={},n[o.rd]=t,n[o.cd]=e,n[o.gc]=i,this.log("#parse() > Obtained configuration settings: "+JSON.stringify(n)),a().dispatchEvent(new s(s.sb,n))}else this.warn("#SettingsParser() > No data available for parsing.")},e.bb.ze=i}(e,i),function(t,e){function i(t){this.N("[media-fork::Network] > "),this.ta=this.Hd=this.Cd=!1,this.of=t,this.Ed=this.xd=this.Id=j,this.jc=function(t){t=t.data,this.log("#_onApiConfig(sb_server="+t[d.xb]+", check_status_server="+t[d.lb]+", job_id="+t[d.rb]+", debug_tracking="+t[d.nb]+", track_local="+t[d.yb]+")"),this.Id=t[d.xb],this.xd=t[d.lb],this.Ed=t[d.rb],this.Cd=t[d.nb],this.Hd=t[d.yb],this.ta=!0},this.ua=function(){this.log("#_onApiDestroy()"),s().eb(this)},this.gf=function(t){if(this.ta){if(t=this.of.$d(t.data[d.Fa]),!this.Hd)for(var e=0;e<t.length;e++){var i=new l(this.Id+"/?__job_id="+this.Ed+"&"+t[e],c.ld);this.Cd&&window.console&&window.console.info&&window.console.info(i.method+" : "+i.url),function(t,e){t.addEventListener(o.wb,function(){t.close()},this),t.addEventListener(o.Xb,function(i){e.warn("#_onContextDataAvailable() > Failed to send heartbeat report: "+JSON.stringify(i)),t.close()},this),t.load(i)}(new u,this)}}else this.warn("#_onContextDataAvailable() > Unable to send request: not configured.")},this.ef=function(){function t(t){t.data&&new f(t.data.response).parse(),t.data[u.qb].close()}function e(t){i.warn("_onClockCheckStatusTick() > Failed to obtain the config. settings: "+JSON.stringify(t)),t.data[u.qb].close()}if(this.ta){var i=this;this.ea=function(i){if(i=i[d.Pa]){i=i.replace(/[^a-zA-Z0-9]+/,"-").toLocaleLowerCase(),i=this.xd+i+".xml?r="+(new Date).getTime();var n=new l(i,c.ld),a=new u;a.addEventListener(o.wb,t,this),a.addEventListener(o.Xb,e,this),this.log("#_onClockCheckStatusTick() > Get new settings from: "+i),a.load(n)}else this.warn("#_onClockCheckStatusTick() > Publisher is NULL.")};var n={};n[d.qa]=h.ya.md,s().dispatchEvent(new h(h.oa,n))}else this.warn("#_onClockCheckStatusTick() > Unable to send request: not configured.")},this.mc=function(t){this.Pd(t.data)},s().addEventListener(h.mb,this.mc,this),s().addEventListener(r.Tb,this.jc,this),s().addEventListener(r.La,this.ua,this),s().addEventListener(m.Ba,this.gf,this),s().addEventListener(p.CLOCK_CHECK_STATUS_TICK,this.ef,this)}var n=t.Q,a=t.P,o=t.S,s=t.ca,r=e.event.Ma,c=t.Ie,l=t.He,u=t.Ge,d=e.event.ba,h=e.event.Wb,p=e.event.Na,m=e.event.dd,f=e.bb.ze;n(i,t.Md),n(i,a),e.bb.qe=i}(e,i),function(t,e){function i(){this.N("[media-fork::Counters] > "),this.va={},this.wa={},this.Sd=function(t,e,i){return t=e+"."+i+"."+t,this.va[t]||(this.va[t]=0),this.log("#getTotalCount(key="+t+")"),this.va[t]},this.mg=function(t,e,i){t=e+"."+i+"."+t,this.log("#resetTotalCount(key="+t+")"),this.va[t]=0},this.Wd=function(t,e,i){t=e+"."+i+"."+t,this.va[t]||(this.va[t]=0),this.log("#incrementTotalCount(key="+t+")"),this.va[t]++},this.Td=function(t,e,i){return t=e+"."+i+"."+t,this.wa[t]||(this.wa[t]=0),this.log("#getTotalDuration(key="+t+")"),this.wa[t]},this.ng=function(t,e,i){t=e+"."+i+"."+t,this.log("#resetTotalDuration(key="+t+")"),this.wa[t]=0},this.Vd=function(t,e,i,n){t=e+"."+i+"."+t,this.wa[t]||(this.wa[t]=0),this.log("#increaseTotalDuration(key="+t+", amount="+n+")"),this.wa[t]+=n}}var n=t.Q;n(i,t.P),e.H.ge=i}(e,i),function(t,e){function i(){this.N("[media-fork::History] > "),this.Dd={},this.zd=function(t){var e=t.g;return(e.q()?e.q().L():e.k())+"."+e.type()+"."+t.$},this.gb=function(t){var e=this.zd(t);this.log("#updateWith(key="+e+")"),this.Dd[e]=t},this.J=function(t){return t=this.zd(t),this.log("#getPreviousItemOfSameTypeWith(key="+t+")"),this.Dd[t]}}var n=t.Q;n(i,t.P),e.H.oe=i}(e,i),function(t,e){var i=e.a.pb,n=e.a.jb,a=e.a.vd,o=e.a.qd;e.H.td=function(t,e,s,r,c,l){this.timestamp=new Date,this.g=new n(t),this.Lc=new a(e),this.Fc=new o(s),this.$=c,this.cb=r,this.ka=l,this.A=void 0,this.If=function(){return this.$===i.fd?this.g.k():this.g.type()===n.Ra?this.g.q().L():this.g.k()},this.kg=function(){return 1}}}(e,i),function(t,e){e.H.De=function(){this.Z=[],this.Jf=function(){return this.Z.slice()},this.tf=function(t){for(var e=-1,i=this.Z.length-1;i>=0&&!(t.timestamp>=this.Z[i].timestamp);i--)e=i;e>0?this.Z.splice(i,0,t):this.Z.push(t)}}}(e,i),function(t,e){function i(t){this.N("[media-fork::ReporterHelper] > "),this.j=t,this.Fd=j,this.Ne=function(t,e,i){return i*=1e3,t=0===t.getTime()?e.getTime()-i/2:t.getTime()/2+e.getTime()/2,t=Math.floor(t/i)*i,this.Fd==t&&(t+=i),this.Fd=t,new Date(t)},this.Sa=function(t,e,i){var n=this.j.ic,a=t.$,s=t.If(),c=t.g.type(),l=a===o.ob?0:t.ka;return n.Wd(a,s,c),n.Vd(a,s,c,e),i=new o(i),i.type(a),i.count(1),i.duration(e),i.Gc(n.Sd(a,s,c)),i.Hc(n.Td(a,s,c)),i.ka(l),i.Rb(t.timestamp.getTime()),i.Ac(t.A?t.A.timestamp.getTime():-1),new r(i,t.g,t.Lc,t.Fc,t.cb)},this.wd=function(t,e,i){if(t.G.length){var n=new s(this.j.e);if(n.type(this.j.Bb),n.q(j),n=new c(n,this.j.n,this.j.C,this.j.u,o.fd,this.j.p[this.j.e.k()]),n.A=this.j.o.J(n),this.j.o.gb(n),t.Za(this.Sa(n,1e3*e,e)),i!=j)for(e=0;e<t.G.length;e++)t.G[e].ga.ag(i)}},this.Xa=function(t,e){return e.getTime()-t.getTime()},this.tc=function(t,e,i){var n=new a(this.j.Db,this.j.Ia,this.j.Wa);return n.Za(this.Sa(t,0,e)),i&&this.wd(n,e,j),n},this.Jd=function(t,e,i){var n,r,c=new a(this.j.Db,this.j.Ia,this.j.Wa),l=this.j.Z.Jf(),u=[];r=j;var d=0;for(d=n=0;d<l.length;d++)n=l[d],n.timestamp>t&&n.timestamp<=e&&u.push(n),n.timestamp<=t&&(r=n);for(this.log("#createReportForQuantum() > -------------TRACK REPORT----------------"),this.log("#createReportForQuantum() > Interval: ["+t.getTime()+" , "+e.getTime()+"]. Tracking interval: "+i),this.log("#createReportForQuantum() > -----------------------------------------"),d=0;d<l.length;d++)this.log("#createReportForQuantum() > ["+l[d].timestamp.getTime()+"] :"+l[d].$+" | "+l[d].g.type());for(this.log("#createReportForQuantum() > -----------------------------------------"),d=0;d<u.length;d++)this.log("#createReportForQuantum() > ["+u[d].timestamp.getTime()+"] :"+u[d].$+" | "+u[d].g.type());if(this.log("#createReportForQuantum() > -----------------------------------------"),r&&(r.A&&(r.A.timestamp=r.timestamp),r.timestamp=new Date(t.getTime()+1),
n=r.g.q()?r.g.q().L():r.g.k(),r.ka=this.j.p[n]),u.length)for(l=0,r&&(l=r.$===o.ob&&r.g.type()!==s.Ra?this.Xa(r.timestamp,u[0].timestamp):this.Xa(t,u[0].timestamp),c.Za(this.Sa(r,l,i))),d=0;d<u.length;d++){var h=u[d];l=d==u.length-1?this.Xa(h.timestamp,e):this.Xa(h.timestamp,u[d+1].timestamp);var p=!1,m=c.G;for(n=0;n<m.length;n++)if(r=m[n],h.g.type()===r.g.type()&&h.$===r.ga.type()&&(p=h.g.type()===s.Ra?r.g.q().L()===h.g.q().L():r.g.k()===h.g.k()),p){m=r.ga;var f=r.g.type();n=r.g.q()?r.g.q().L():r.g.k();var g=this.j.ic;g.Wd(m.type(),n,f),g.Vd(m.type(),n,f,l),r.cb=h.cb,m.ka(this.j.p[n]),m.duration(m.duration()+l),m.Gc(g.Sd(m.type(),n,f)),m.Hc(g.Td(m.type(),n,f)),m.Rb(h.timestamp.getTime());break}p||(this.log("#createReportForQuantum() > Adding event to report: "+h.$),n=h.g.q()?h.g.q().L():h.g.k(),h.ka=this.j.p[n],c.Za(this.Sa(h,l,i)))}else r&&c.Za(this.Sa(r,this.Xa(t,e),i));for(c.Gf(),d=this.Ne(t,e,i),this.wd(c,i,d),this.log("#createReportForQuantum() > Final report ----- START -----"),d=0;d<c.G.length;d++)r=c.G[d],i=r.ga,n=r.g.q()?r.g.q().L():r.g.k(),this.log("#createReportForQuantum() > Final report ["+i.Rb()+"/"+i.Ac()+"] :"+i.type()+" | type="+r.g.type()+", name="+n+", duration="+i.duration()+", playhead="+i.ka());return this.log("#createReportForQuantum() > Final report ----- END -----"),c}}var n=t.Q,a=e.a.te,o=e.a.pb,s=e.a.jb,r=e.a.ue,c=e.H.td;n(i,t.P),e.H.ve=i}(e,i),function(t,e){function i(){this.N("[media-fork::Context] > "),this.zb=this.z=!1,this.Bb=j,this.hc=!1,this.l=this.Cb=j,this.f={fb:j,K:j},this.Ya=this.ea=j,this.p={},this.Va=new s(this),this.Z=new r,this.o=new l,this.Wa=new u,this.Db=new d,this.Ia=new p,this.e=new h,this.n=new m,this.C=new f,this.u=new g,this.ic=new v,this.jc=function(t){t=t.data,this.log("#_onApiConfig(account="+t[T.Sb]+", sc_server="+t[T.cc]+", sb_server="+t[T.xb]+", check_status_server="+t[T.lb]+", job_id="+t[T.rb]+", publisher="+t[T.Pa]+", ovp="+t[T.$b]+", sdk="+t[T.ec]+", debug_tracking="+t[T.nb]+", track_local="+t[T.yb]+")"),this.Db.Xd(t[T.Sb]),this.Db.trackingServer(t[T.cc]),this.f.K=t[T.Pa],this.Ia.ia(t[T.$b]),this.Ia.la(t[T.ec]),this.Ia.channel(t[T.bd]),o().dispatchEvent(new b(b.CLOCK_CHECK_STATUS_ENABLE))},this.ua=function(){this.log("#_onApiDestroy()"),o().eb(this)},this.Ye=function(t){t=t.data,this.log("#_onApiOpenMain(name="+t[T.i]+", length="+t[T.Ca]+", type="+t[T.fc]+", player_name="+t[T.Ea]+", vid="+t[T.Ha]+", aid="+t[T.Aa]+", mid="+t[T.Da]+")"),this.nf(),this.l=t[T.i],this.p[this.l]=0,this.Ia.playerName(t[T.Ea]),this.n.ib(t[T.Ha]),this.n.$a(t[T.Aa]),this.n.ab(t[T.Da]),this.e.k(this.l),this.e.duration(t[T.Ca]),this.e.type(t[T.fc]),this.Bb=this.e.type(),this.C.name(this.l),this.Pe(),t={},t[T.Ga]=!0,o().dispatchEvent(new b(b.CLOCK_TRACKING_ENABLE,t)),this.ea=function(t){t=t[T.X];var e=new c(this.e,this.n,this.C,this.u,C.le,0);e.A=this.o.J(e),this.o.gb(e),t=this.Va.tc(e,t,!0),e={},e[T.Fa]=t,o().dispatchEvent(new _(_.Ba,e))},t={},t[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,t)),t=new c(this.e,this.n,this.C,this.u,C.ob,0),t.A=this.o.J(t),this.Y(t),this.z=!0},this.Xe=function(t){if(this.z){this.info("Call detected: onApiOpenAd()."),t=t.data,this.log(this,"#_onApiOpenAd(name="+t[T.i]+", length="+t[T.Ca]+", player_name="+t[T.Ea]+", parent_name="+t[T.ac]+", pod_pos="+t[T.bc]+", pod_offset="+t[T.ub]+", cpm="+t[T.na]+")"),this.e.k()||this.e.k(t[T.ac]),this.l=t[T.i],this.p[this.l]=0;var e=new E;e.L(this.l),e.length(t[T.Ca]),e.Nb(t[T.Ea]),e.Fb(t[T.na]),e.Kb(t[T.nd]),e.Mb(this.Cb),e.Lb(t[T.bc]+""),this.e.q(e),this.e.type(h.Ra),t=new c(this.e,this.n,this.C,this.u,C.ob,0),t.A=this.o.J(t),this.Y(t),t=new c(this.e,this.n,this.C,this.u,C.jd,this.p[this.l]),t.A=this.o.J(t),this.Y(t)}else this.warn("#_onApiOpenAd() > No active viewing session.")},this.Ue=function(t){this.z?(t=t.data[T.i],this.log("#_onApiClose(name="+t+")"),t===this.e.k()?this.Me():this.Le()):this.warn("#_onApiClose() > No active viewing session.")},this.Ze=function(t){this.z?(t=t.data,this.log("#_onApiPlay(name="+t[T.i]+", offset="+t[T.B]+", vid="+t[T.Ha]+", aid="+t[T.Aa]+", mid="+t[T.Da]+")"),t[T.i]==this.e.k&&this.zb||(this.n.ib(t[T.Ha]),this.n.$a(t[T.Aa]),this.n.ab(t[T.Da]),this.l=t[T.i],this.p[this.l]=Math.floor(t[T.B]),o().dispatchEvent(new b(b.CLOCK_TRACKING_ENABLE)),t=new c(this.e,this.n,this.C,this.u,C.jd,this.p[this.l]),t.A=this.o.J(t),this.Y(t))):this.warn("#_onApiPlay() > No active viewing session.")},this.cf=function(t){this.z?(t=t.data,this.log("#_onApiStop(name="+t[T.i]+", offset="+t[T.B]+")"),this.l=t[T.i],this.p[this.l]=Math.floor(t[T.B]),t=new c(this.e,this.n,this.C,this.u,C.hd,this.p[this.l]),t.A=this.o.J(t),this.Y(t),o().dispatchEvent(new b(b.CLOCK_TRACKING_DISABLE))):this.warn("#_onApiStop() > No active viewing session.")},this.Te=function(t){this.z?(t=t.data,this.log("#_onApiClick(name="+t[T.i]+", offset="+t[T.B]+")")):this.warn("#_onApiClick() > No active viewing session.")},this.Ve=function(t){this.z?(t=t.data,this.log("#_onApiComplete(name="+t[T.i]+", offset="+t[T.B]+")")):this.warn("#_onApiComplete() > No active viewing session.")},this.af=function(t){this.z?(t=t.data,this.log("#_onApiQoSInfo(bitrate="+t[T.i]+", fps="+t[T.Zb]+", dropped_frames="+t[T.Vb]+")"),this.u.qc(t[T.kb]),this.u.Rd(t[T.Zb]),this.u.Od(t[T.Vb])):this.warn("#_onApiQoSInfo() > No active viewing session.")},this.Re=function(t){if(this.z){t=t.data,this.log("#_onApiBitrateChange(bitrate="+t[T.i]+")"),this.u.qc(t[T.kb]);var e=new c(this.e,this.n,this.C,this.u,C.ie,this.p[this.l]);e.A=this.o.J(e),this.o.gb(e),this.ea=function(t){t=this.Va.tc(e,t[T.X],!1);var i={};i[T.Fa]=t,o().dispatchEvent(new _(_.Ba,i))},t={},t[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,t))}else this.warn("#_onApiBitrateChange() > No active viewing session.")},this.Se=function(){if(this.z){this.log("#_onApiBufferStart()");var t=new c(this.e,this.n,this.C,this.u,C.je,this.p[this.l]);t.A=this.o.J(t),this.Y(t)}else this.warn("#_onApiBufferStart() > No active viewing session.")},this.df=function(t){if(this.z){var e=t.data;if(this.log("#_onApiTrackError(source="+e[T.vb]+", err_id="+e[T.Yb]+", offset="+e[T.B]+")"),!this.hc||e[T.vb]===S){var i=new c(this.e,this.n,this.C,this.u,C.ke,Math.floor(e[T.B]));i.A=this.o.J(i),this.o.gb(i),this.ea=function(t){t=this.Va.tc(i,t[T.X],!1);var n=t.G[0];n.ga.id(e[T.Yb]),n.ga.source(e[T.vb]),n={},n[T.Fa]=t,o().dispatchEvent(new _(_.Ba,n))},t={},t[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,t))}}else this.warn("#_onApiTrackError() > No active viewing session.")},this.$e=function(t){this.z?(this.Cb=Math.floor(t.data[T.ub]),this.log("#_onApiPodOffset(podOffset="+this.Cb+")")):this.warn("#_onApiPodOffset() > No active viewing session.")},this.bf=function(){if(this.z){this.log("#_onApiSessionComplete()");var t=new c(this.e,this.n,this.C,this.u,C.me,0);t.A=this.o.J(t),this.Y(t),this.ea=function(t){var e=new Date;t=this.Va.Jd(this.Ya||new Date(0),e,t[T.X]);var i={};i[T.Fa]=t,o().dispatchEvent(new _(_.Ba,i)),this.Ya=e},t={},t[T.qa]=y.ya.Qa,o().dispatchEvent(new y(y.oa,t)),t={},t[T.Ga]=!0,o().dispatchEvent(new b(b.CLOCK_TRACKING_DISABLE,t)),this.z=!1}else this.warn("#_onApiSessionComplete() > No active viewing session.")},this.We=function(t){if(this.z){var e=t.data;this.log("#_onApiMonitor(name="+e[T.i]+", offset="+e[T.B]+")"),this.l=e[T.i],this.p[this.l]=Math.floor(t.data[T.B])}else this.warn("#_onApiMonitor() > No active viewing session.")},this.ff=function(t){if(this.z){this.log("#_onClockTrackingTick(interval="+t.data[T.X]+")");var e=new Date;t=this.Va.Jd(this.Ya||new Date(0),e,t.data[T.X]);var i={};i[T.Fa]=t,o().dispatchEvent(new _(_.Ba,i)),this.Ya=e}else this.warn("#_onClockTrackingTick() > No active viewing session.")},this.hf=function(t){this.log("#_onNetworkCheckStatusComplete(track_ext_err="+t.data[T.gc]+")"),t=t.data[T.gc],t!==j&&(this.hc=t)},this.lc=function(t){switch(t=t.data[T.qa],this.log("#_onDataRequest(what="+t+")"),t){case y.ya.md:t={},t[T.Pa]=this.f.K,o().dispatchEvent(new y(y.mb,t))}},this.mc=function(t){this.log("#_onDataResponse()"),this.Pd(t.data)},this.nf=function(){this.log("#_resetInternalState()"),this.zb=this.z=!1,this.Bb=j,this.hc=!1,this.p={},this.Ya=this.Cb=j,this.ic=new v,this.o=new l,this.Z=new r,this.n=new m,this.C=new f,this.u=new g,this.Wa=new u,this.e=new h,this.e.K(this.f.K),this.e.type(this.f.fb)},this.Pe=function(){this.Wa.Ec(""+(new Date).getTime()+Math.floor(1e9*Math.random())),this.log("#_generateSessionId() > New session id: "+this.Wa.Ec)},this.Y=function(t){this.log("#_placeItemOnTimeline(type="+t.$+")"),this.Z.tf(t),this.o.gb(t)},this.Me=function(){if(this.zb)this.warn("#_closeMainVideo() > The main video content was already closed.");else{-1==this.p[this.e.k()]&&(this.p[this.e.k()]=this.e.duration());var t=new c(this.e,this.n,this.C,this.u,C.gd,this.p[this.e.k()]);t.A=this.o.J(t),this.Y(t),this.zb=!0}},this.Le=function(){var t=new c(this.e,this.n,this.C,this.u,C.gd,this.p[this.l]);t.A=this.o.J(t),this.Y(t),this.e.type(this.Bb),this.l=this.e.k(),this.e.q(j)},o().addEventListener(w.Tb,this.jc,this),o().addEventListener(w.La,this.ua,this),o().addEventListener(w.Uc,this.Ye,this),o().addEventListener(w.Tc,this.Xe,this),o().addEventListener(w.Qc,this.Ue,this),o().addEventListener(w.Vc,this.Ze,this),o().addEventListener(w.Yc,this.cf,this),o().addEventListener(w.Pc,this.Te,this),o().addEventListener(w.Rc,this.Ve,this),o().addEventListener(w.Wc,this.af,this),o().addEventListener(w.Nc,this.Re,this),o().addEventListener(w.Oc,this.Se,this),o().addEventListener(w.Zc,this.df,this),o().addEventListener(w.Ub,this.$e,this),o().addEventListener(w.Xc,this.bf,this),o().addEventListener(w.Sc,this.We,this),o().addEventListener(b.CLOCK_TRACKING_TICK,this.ff,this),o().addEventListener(k.sb,this.hf,this),o().addEventListener(y.oa,this.lc,this),o().addEventListener(y.mb,this.mc,this)}var n=t.Q,a=t.P,o=t.ca,s=e.H.ve,r=e.H.De,c=e.H.td,l=e.H.oe,u=e.a.ye,d=e.a.Ae,h=e.a.jb,p=e.a.xe,m=e.a.vd,f=e.a.qd,g=e.a.re,v=e.H.ge,b=e.event.Na,k=e.event.tb,y=e.event.Wb,w=e.event.Ma,_=e.event.dd,T=e.event.ba,C=e.a.pb,E=e.a.$c,S="player";n(i,t.Md),n(i,a),e.H.fe=i}(e,i),function(t){function i(t){this.N("[media-fork::HeartbeatMediaFork] > "),this.m=t,this.D=function(){var t=this.ta&&(this.m.analyticsVisitorID||this.m.marketingCloudVisitorID||this.m.visitorID);return t||this.warn("Unable to track! Is configured: "+this.ta+" analyticsVisitorID: "+this.m.analyticsVisitorID+" marketingCloudVisitorID: "+this.m.marketingCloudVisitorID+" visitorID: "+this.m.visitorID),t},this.ta=!1,this.j=new l,this.eg=new c(new d),this.yd=new r,this.nc=j,this.f={trackingServer:j,vc:j,K:j,fb:j,ia:j,la:j,channel:j,debugTracking:!1,Jc:!1}}var n=e.Q,a=e.ca,o=t.event.ba,s=t.event.Ma,r=t.M.ee,c=t.bb.qe,l=t.H.fe,u=t.a.jb,d=t.a.se;n(i,e.P),i.prototype.Wf=function(t){t&&t.hasOwnProperty("debugLogging")&&(e.Oa=t.debugLogging),this.log("#setup(configData={trackingServer: "+t.trackingServer+", jobId: "+t.vc+", streamType: "+t.fb+", publisher: "+t.K+", ovp: "+t.ia+", sdk: "+t.la+", debugLogging: "+t.ig+"})"),this.f.debugTracking=this.m.debugTracking,this.f.Jc=this.m.trackLocal,this.f.channel=this.m.Media.channel,t&&(t.hasOwnProperty("trackingServer")&&(this.f.trackingServer=t.trackingServer),t.hasOwnProperty("jobId")&&(this.f.vc=t.jobId),t.hasOwnProperty("publisher")&&(this.f.K=t.publisher),t.hasOwnProperty("ovp")&&(this.f.ia=t.ovp),t.hasOwnProperty("sdk")&&(this.f.la=t.sdk),t.hasOwnProperty("streamType")&&(this.f.fb=t.streamType===u.sd||t.streamType===u.Ce||t.streamType===u.Be||t.streamType===u.Ra?t.streamType:u.sd),this.m.Media.__primetime&&(this.f.ia="primetime"),this.nc!=j&&(this.f.la=this.nc),this.log("#setup() > Applying configuration: {account: "+this.m.account+", scTrackingServer: "+this.m.trackingServer+", sbTrackingServer: "+this.f.trackingServer+", jobId: "+this.f.trackingServer+", publisher: "+this.f.K+", ovp: "+this.f.ia+", sdk: "+this.f.la+", channel: "+this.f.channel+", debugTracking: "+this.f.debugTracking+", trackLocal: "+this.f.Jc+"}"),t={},t[o.Sb]=this.m.account,t[o.cc]=this.m.trackingServer,t[o.xb]=this.f.trackingServer,t[o.lb]=this.f.trackingServer+"/settings/",t[o.rb]=this.f.vc,t[o.Pa]=this.f.K,t[o.$b]=this.f.ia,t[o.ec]=this.f.la,t[o.bd]=this.f.channel,t[o.nb]=this.f.debugTracking,t[o.yb]=this.f.Jc,a().dispatchEvent(new s(s.Tb,t)),this.ta=!0)},i.prototype.open=function(t,e,i){if(this.log("#open(name="+t+", length="+e+", playerName="+i+")"),this.D()){var n={};n[o.Ha]=this.m.visitorID,n[o.Aa]=this.m.analyticsVisitorID,n[o.Da]=this.m.Nf,n[o.i]=t,n[o.Ca]=e,n[o.fc]=this.f.fb,n[o.Ea]=i,a().dispatchEvent(new s(s.Uc,n))}},i.prototype.openAd=function(t,e,i,n,r,c,l){if(this.log("#openAd(name="+t+", length="+e+", playerName="+i+", parentName="+n+", parentPod="+r+", parentPodPosition="+c+", cpm="+l+", )"),this.D()){var u={};u[o.i]=t,u[o.Ca]=e,u[o.Ea]=i,u[o.ac]=n,u[o.nd]=r,u[o.bc]=c,u[o.na]=l,a().dispatchEvent(new s(s.Tc,u))}},i.prototype.close=function(t){if(this.log("#close(name="+t+")"),this.D()){var e={};e[o.i]=t,a().dispatchEvent(new s(s.Qc,e))}},i.prototype.play=function(t,e,i,n,r){this.log("#play(name="+t+", offset="+e+", segmentNum="+i+", segment="+n+", segmentLength="+r+")"),this.D()&&(i={},i[o.Ha]=this.m.visitorID,i[o.Aa]=this.m.analyticsVisitorID,i[o.Da]=this.m.Nf,i[o.i]=t,i[o.B]=e,a().dispatchEvent(new s(s.Vc,i)))},i.prototype.monitor=function(t,e){this.log("#monitor(name="+t+", offset="+e+")");var i={};i[o.i]=t,i[o.B]=e,a().dispatchEvent(new s(s.Sc,i))},i.prototype.stop=function(t,e){if(this.log("#stop(name="+t+", offset="+e+")"),this.D()){var i={};i[o.i]=t,i[o.B]=e,a().dispatchEvent(new s(s.Yc,i))}},i.prototype.click=function(t,e){if(this.log("#click(name="+t+", offset="+e+")"),this.D()){var i={};i[o.i]=t,i[o.B]=e,a().dispatchEvent(new s(s.Pc,i))}},i.prototype.complete=function(t,e){if(this.log("#complete(name="+t+", offset="+e+")"),this.D()){var i={};i[o.i]=t,i[o.B]=e,a().dispatchEvent(new s(s.Rc,i))}},i.prototype.Nd=function(){Logger.hg(this,"#destroy()"),a().dispatchEvent(new s(s.La))},i.prototype.$f=function(t,e,i){if(this.log("#trackError(source="+t+", errorId="+e+", offset="+i+")"),this.D()){var n={};n[o.vb]=t,n[o.Yb]=e,n[o.B]=i,a().dispatchEvent(new s(s.Zc,n))}},i.prototype.bg=function(t,e,i){if(this.log("#updateQoSInfo(bitrate="+t+", fps="+e+", droppedFrames="+i+")"),this.D()){var n={};n[o.kb]=t,n[o.Zb]=e,n[o.Vb]=i,a().dispatchEvent(new s(s.Wc,n))}},i.prototype.wf=function(t){if(this.log("#bitrateChange(bitrate="+t+")"),this.D()){var e={};e[o.kb]=t,a().dispatchEvent(new s(s.Nc,e))}},i.prototype.xf=function(){this.log("#bufferStart()"),this.D()&&a().dispatchEvent(new s(s.Oc))},i.prototype.sf=function(t){if(this.log("#adBreakStart(offset="+t+")"),this.D()){var e={};e[o.ub]=t,a().dispatchEvent(new s(s.Ub,e))}},i.prototype.rf=function(){if(this.log("#adBreakEnd()"),this.D()){var t={};t[o.ub]=j,a().dispatchEvent(new s(s.Ub,t))}},i.prototype.Uf=function(){this.log("#sessionComplete()"),this.D()&&a().dispatchEvent(new s(s.Xc))},i.prototype.Ke=function(t){this.log("#__setPsdkVersion(version="+t+")"),this.nc=t},t.ne=i}(i),t.Ka||(t.Ka={}),t.Ka.Bf||(t.Ka.Bf=e),t.Ka.Of=i}(this),this.Je(t)}(e.s);n.callMethodWhenReady=function(e,i){t.visitor!=j&&(t.isReadyToTrack()?n[e].apply(this,i):t.callbackWhenReadyToTrack(n,n[e],i))},e.Heartbeat=n,e.uf=function(){var t,i;if(e.autoTrack&&(t=e.s.d.getElementsByTagName("VIDEO")))for(i=0;i<t.length;i++)e.attach(t[i])},e.ra(i,"load",e.uf)}function AppMeasurement(){var t=this;t.version="1.4.1";var e=window;e.s_c_in||(e.s_c_il=[],e.s_c_in=0),t._il=e.s_c_il,t._in=e.s_c_in,t._il[t._in]=t,e.s_c_in++,t._c="s_c";var i=e.sb;i||(i=null);var n,a,o=e;try{for(n=o.parent,a=o.location;n&&n.location&&a&&""+n.location!=""+a&&o.location&&""+n.location!=""+o.location&&n.location.host==a.host;)o=n,n=o.parent}catch(s){}t.eb=function(t){try{console.log(t)}catch(e){}},t.ta=function(t){return""+parseInt(t)==""+t},t.replace=function(t,e,i){return!t||t.indexOf(e)<0?t:t.split(e).join(i)},t.escape=function(e){var i,n;if(!e)return e;for(e=encodeURIComponent(e),i=0;7>i;i++)n="+~!*()'".substring(i,i+1),e.indexOf(n)>=0&&(e=t.replace(e,n,"%"+n.charCodeAt(0).toString(16).toUpperCase()));return e},t.unescape=function(e){if(!e)return e;e=e.indexOf("+")>=0?t.replace(e,"+"," "):e;try{return decodeURIComponent(e)}catch(i){}return unescape(e)},t.Va=function(){var i,n=e.location.hostname,a=t.fpCookieDomainPeriods;if(a||(a=t.cookieDomainPeriods),n&&!t.cookieDomain&&!/^[0-9.]+$/.test(n)&&(a=a?parseInt(a):2,a=a>2?a:2,i=n.lastIndexOf("."),i>=0)){for(;i>=0&&a>1;)i=n.lastIndexOf(".",i-1),a--;t.cookieDomain=i>0?n.substring(i):n}return t.cookieDomain},t.c_r=t.cookieRead=function(e){e=t.escape(e);var i=" "+t.d.cookie,n=i.indexOf(" "+e+"="),a=0>n?n:i.indexOf(";",n);return e=0>n?"":t.unescape(i.substring(n+2+e.length,0>a?i.length:a)),"[[B]]"!=e?e:""},t.c_w=t.cookieWrite=function(e,i,n){var a,o=t.Va(),s=t.cookieLifetime;return i=""+i,s=s?(""+s).toUpperCase():"",n&&"SESSION"!=s&&"NONE"!=s&&((a=""!=i?parseInt(s?s:0):-60)?(n=new Date,n.setTime(n.getTime()+1e3*a)):1==n&&(n=new Date,a=n.getYear(),n.setYear(a+5+(1900>a?1900:0)))),e&&"NONE"!=s?(t.d.cookie=e+"="+t.escape(""!=i?i:"[[B]]")+"; path=/;"+(n&&"SESSION"!=s?" expires="+n.toGMTString()+";":"")+(o?" domain="+o+";":""),t.cookieRead(e)==i):0},t.C=[],t.B=function(e,i,n){if(t.ma)return 0;t.maxDelay||(t.maxDelay=250);var a=0,o=(new Date).getTime()+t.maxDelay,s=t.d.qb,r=["webkitvisibilitychange","visibilitychange"];if(s||(s=t.d.rb),s&&"prerender"==s){if(!t.X)for(t.X=1,n=0;n<r.length;n++)t.d.addEventListener(r[n],function(){var e=t.d.qb;e||(e=t.d.rb),"visible"==e&&(t.X=0,t.delayReady())});a=1,o=0}else n||t.q("_d")&&(a=1);return a&&(t.C.push({m:e,a:i,t:o}),t.X||setTimeout(t.delayReady,t.maxDelay)),a},t.delayReady=function(){var e,i=(new Date).getTime(),n=0;for(t.q("_d")&&(n=1);t.C.length>0;){if(e=t.C.shift(),n&&!e.t&&e.t>i){t.C.unshift(e),setTimeout(t.delayReady,parseInt(t.maxDelay/2));break}t.ma=1,t[e.m].apply(t,e.a),t.ma=0}},t.setAccount=t.sa=function(e){var i,n;if(!t.B("setAccount",arguments))if(t.account=e,t.allAccounts)for(i=t.allAccounts.concat(e.split(",")),t.allAccounts=[],i.sort(),n=0;n<i.length;n++)(0==n||i[n-1]!=i[n])&&t.allAccounts.push(i[n]);else t.allAccounts=e.split(",")},t.foreachVar=function(e,i){var n,a,o,s,r="";for(o=a="",t.lightProfileID?(n=t.H,(r=t.lightTrackVars)&&(r=","+r+","+t.ba.join(",")+",")):(n=t.c,(t.pe||t.linkType)&&(r=t.linkTrackVars,a=t.linkTrackEvents,t.pe&&(o=t.pe.substring(0,1).toUpperCase()+t.pe.substring(1),t[o])&&(r=t[o].pb,a=t[o].ob)),r&&(r=","+r+","+t.z.join(",")+","),a&&r&&(r+=",events,")),i&&(i=","+i+","),a=0;a<n.length;a++)o=n[a],(s=t[o])&&(!r||r.indexOf(","+o+",")>=0)&&(!i||i.indexOf(","+o+",")>=0)&&e(o,s)},t.J=function(e,i,n,a,o){var s,r,c,l,u="",d=0;if("contextData"==e&&(e="c"),i){for(s in i)if(!Object.prototype[s]&&(!o||s.substring(0,o.length)==o)&&i[s]&&(!n||n.indexOf(","+(a?a+".":"")+s+",")>=0)){if(c=!1,d)for(r=0;r<d.length;r++)s.substring(0,d[r].length)==d[r]&&(c=!0);if(!c&&(""==u&&(u+="&"+e+"."),r=i[s],o&&(s=s.substring(o.length)),s.length>0))if(c=s.indexOf("."),c>0)r=s.substring(0,c),c=(o?o:"")+r+".",d||(d=[]),d.push(c),u+=t.J(r,i,n,a,c);else if("boolean"==typeof r&&(r=r?"true":"false"),r){if("retrieveLightData"==a&&o.indexOf(".contextData.")<0)switch(c=s.substring(0,4),l=s.substring(4),s){case"transactionID":s="xact";break;case"channel":s="ch";break;case"campaign":s="v0";break;default:t.ta(l)&&("prop"==c?s="c"+l:"eVar"==c?s="v"+l:"list"==c?s="l"+l:"hier"==c&&(s="h"+l,r=r.substring(0,255)))}u+="&"+t.escape(s)+"="+t.escape(r)}}""!=u&&(u+="&."+e)}return u},t.Xa=function(){var e,i,n,a,o,s,r,c,l="",u="",d="",h=i="";for(t.lightProfileID?(e=t.H,(u=t.lightTrackVars)&&(u=","+u+","+t.ba.join(",")+",")):(e=t.c,(t.pe||t.linkType)&&(u=t.linkTrackVars,d=t.linkTrackEvents,t.pe&&(i=t.pe.substring(0,1).toUpperCase()+t.pe.substring(1),t[i])&&(u=t[i].pb,d=t[i].ob)),u&&(u=","+u+","+t.z.join(",")+","),d&&(d=","+d+",",u&&(u+=",events,")),t.events2&&(h+=(""!=h?",":"")+t.events2)),t.AudienceManagement&&t.AudienceManagement.isReady()&&(l+=t.J("d",t.AudienceManagement.getEventCallConfigParams())),i=0;i<e.length;i++){if(a=e[i],o=t[a],n=a.substring(0,4),s=a.substring(4),!o&&"events"==a&&h&&(o=h,h=""),o&&(!u||u.indexOf(","+a+",")>=0)){switch(a){case"supplementalDataID":a="sdid";break;case"timestamp":a="ts";break;case"dynamicVariablePrefix":a="D";break;case"visitorID":a="vid";break;case"marketingCloudVisitorID":a="mid";break;case"analyticsVisitorID":a="aid";break;case"audienceManagerLocationHint":a="aamlh";break;case"audienceManagerBlob":a="aamb";break;case"authState":a="as";break;case"pageURL":a="g",o.length>255&&(t.pageURLRest=o.substring(255),o=o.substring(0,255));break;case"pageURLRest":a="-g";break;case"referrer":a="r";break;case"vmk":case"visitorMigrationKey":a="vmt";break;case"visitorMigrationServer":a="vmf",t.ssl&&t.visitorMigrationServerSecure&&(o="");break;case"visitorMigrationServerSecure":a="vmf",!t.ssl&&t.visitorMigrationServer&&(o="");break;case"charSet":a="ce";break;case"visitorNamespace":a="ns";break;case"cookieDomainPeriods":a="cdp";break;case"cookieLifetime":a="cl";break;case"variableProvider":a="vvp";break;case"currencyCode":a="cc";break;case"channel":a="ch";break;case"transactionID":a="xact";break;case"campaign":a="v0";break;case"latitude":a="lat";break;case"longitude":a="lon";break;case"resolution":a="s";break;case"colorDepth":a="c";break;case"javascriptVersion":a="j";break;case"javaEnabled":a="v";break;case"cookiesEnabled":a="k";break;case"browserWidth":a="bw";break;case"browserHeight":a="bh";break;case"connectionType":a="ct";break;case"homepage":a="hp";break;case"events":if(h&&(o+=(""!=o?",":"")+h),d)for(s=o.split(","),o="",n=0;n<s.length;n++)r=s[n],c=r.indexOf("="),c>=0&&(r=r.substring(0,c)),c=r.indexOf(":"),c>=0&&(r=r.substring(0,c)),d.indexOf(","+r+",")>=0&&(o+=(o?",":"")+s[n]);break;case"events2":o="";break;case"contextData":l+=t.J("c",t[a],u,a),o="";break;case"lightProfileID":a="mtp";break;case"lightStoreForSeconds":a="mtss",t.lightProfileID||(o="");break;case"lightIncrementBy":a="mti",t.lightProfileID||(o="");break;case"retrieveLightProfiles":a="mtsr";break;case"deleteLightProfiles":a="mtsd";break;case"retrieveLightData":t.retrieveLightProfiles&&(l+=t.J("mts",t[a],u,a)),o="";break;default:t.ta(s)&&("prop"==n?a="c"+s:"eVar"==n?a="v"+s:"list"==n?a="l"+s:"hier"==n&&(a="h"+s,o=o.substring(0,255)))}o&&(l+="&"+a+"="+("pev"!=a.substring(0,3)?t.escape(o):o))}"pev3"==a&&t.g&&(l+=t.g)}return l},t.u=function(t){var e=t.tagName;return""+t.wb!="undefined"||""+t.ib!="undefined"&&"HTML"!=(""+t.ib).toUpperCase()?"":(e=e&&e.toUpperCase?e.toUpperCase():"","SHAPE"==e&&(e=""),e&&(("INPUT"==e||"BUTTON"==e)&&t.type&&t.type.toUpperCase?e=t.type.toUpperCase():!e&&t.href&&(e="A")),e)},t.oa=function(t){var e,i,n,a=t.href?t.href:"";return e=a.indexOf(":"),i=a.indexOf("?"),n=a.indexOf("/"),a&&(0>e||i>=0&&e>i||n>=0&&e>n)&&(i=t.protocol&&t.protocol.length>1?t.protocol:l.protocol?l.protocol:"",e=l.pathname.lastIndexOf("/"),a=(i?i+"//":"")+(t.host?t.host:l.host?l.host:"")+("/"!=h.substring(0,1)?l.pathname.substring(0,0>e?0:e)+"/":"")+a),a},t.D=function(e){var i,n,a=t.u(e),o="",s=0;return a&&(i=e.protocol,n=e.onclick,!e.href||"A"!=a&&"AREA"!=a||n&&i&&!(i.toLowerCase().indexOf("javascript")<0)?n?(o=t.replace(t.replace(t.replace(t.replace(""+n,"\r",""),"\n",""),"	","")," ",""),s=2):"INPUT"==a||"SUBMIT"==a?(e.value?o=e.value:e.innerText?o=e.innerText:e.textContent&&(o=e.textContent),s=3):e.src&&"IMAGE"==a&&(o=e.src):o=t.oa(e),o)?{id:o.substring(0,100),type:s}:0},t.tb=function(e){for(var i=t.u(e),n=t.D(e);e&&!n&&"BODY"!=i;)(e=e.parentElement?e.parentElement:e.parentNode)&&(i=t.u(e),n=t.D(e));return n&&"BODY"!=i||(e=0),e&&(i=e.onclick?""+e.onclick:"",i.indexOf(".tl(")>=0||i.indexOf(".trackLink(")>=0)&&(e=0),e},t.hb=function(){var i,n,a,o,s=t.linkObject,r=t.linkType,c=t.linkURL;if(t.ca=1,s||(t.ca=0,s=t.clickObject),s){for(i=t.u(s),n=t.D(s);s&&!n&&"BODY"!=i;)(s=s.parentElement?s.parentElement:s.parentNode)&&(i=t.u(s),n=t.D(s));if(n&&"BODY"!=i||(s=0),s){var l=s.onclick?""+s.onclick:"";(l.indexOf(".tl(")>=0||l.indexOf(".trackLink(")>=0)&&(s=0)}}else t.ca=1;if(!c&&s&&(c=t.oa(s)),c&&!t.linkLeaveQueryString&&(a=c.indexOf("?"),a>=0&&(c=c.substring(0,a))),!r&&c){var u,d=0,h=0;if(t.trackDownloadLinks&&t.linkDownloadFileTypes)for(l=c.toLowerCase(),a=l.indexOf("?"),o=l.indexOf("#"),a>=0?o>=0&&a>o&&(a=o):a=o,a>=0&&(l=l.substring(0,a)),a=t.linkDownloadFileTypes.toLowerCase().split(","),o=0;o<a.length;o++)(u=a[o])&&l.substring(l.length-(u.length+1))=="."+u&&(r="d");if(t.trackExternalLinks&&!r&&(l=c.toLowerCase(),t.ra(l))&&(t.linkInternalFilters||(t.linkInternalFilters=e.location.hostname),a=0,t.linkExternalFilters?(a=t.linkExternalFilters.toLowerCase().split(","),d=1):t.linkInternalFilters&&(a=t.linkInternalFilters.toLowerCase().split(",")),a)){for(o=0;o<a.length;o++)u=a[o],l.indexOf(u)>=0&&(h=1);h?d&&(r="e"):d||(r="e")}}t.linkObject=s,t.linkURL=c,t.linkType=r,(t.trackClickMap||t.trackInlineStats)&&(t.g="",s&&(r=t.pageName,c=1,s=s.sourceIndex,r||(r=t.pageURL,c=0),e.s_objectID&&(n.id=e.s_objectID,s=n.type=1),r&&n&&n.id&&i&&(t.g="&pid="+t.escape(r.substring(0,255))+(c?"&pidt="+c:"")+"&oid="+t.escape(n.id.substring(0,100))+(n.type?"&oidt="+n.type:"")+"&ot="+i+(s?"&oi="+s:""))))},t.Ya=function(){var e=t.ca,i=t.linkType,n=t.linkURL,a=t.linkName;if(i&&(n||a)&&(i=i.toLowerCase(),"d"!=i&&"e"!=i&&(i="o"),t.pe="lnk_"+i,t.pev1=n?t.escape(n):"",t.pev2=a?t.escape(a):"",e=1),t.abort&&(e=0),t.trackClickMap||t.trackInlineStats){i={},n=0;var o,s,r,c=t.cookieRead("s_sq"),l=c?c.split("&"):0;if(c=0,l)for(o=0;o<l.length;o++)s=l[o].split("="),a=t.unescape(s[0]).split(","),s=t.unescape(s[1]),i[s]=a;if(a=t.account.split(","),e||t.g){e&&!t.g&&(c=1);for(s in i)if(!Object.prototype[s])for(o=0;o<a.length;o++)for(c&&(r=i[s].join(","),r==t.account&&(t.g+=("&"!=s.charAt(0)?"&":"")+s,i[s]=[],n=1)),l=0;l<i[s].length;l++)r=i[s][l],r==a[o]&&(c&&(t.g+="&u="+t.escape(r)+("&"!=s.charAt(0)?"&":"")+s+"&u=0"),i[s].splice(l,1),n=1);if(e||(n=1),n){c="",o=2,!e&&t.g&&(c=t.escape(a.join(","))+"="+t.escape(t.g),o=1);for(s in i)!Object.prototype[s]&&o>0&&i[s].length>0&&(c+=(c?"&":"")+t.escape(i[s].join(","))+"="+t.escape(s),o--);t.cookieWrite("s_sq",c)}}}return e},t.Za=function(){if(!t.nb){var e,i,n=new Date,a=o.location,s=i=e="",r="",c="",l="1.2",u=t.cookieWrite("s_cc","true",0)?"Y":"N",d="",h="";if(n.setUTCDate&&(l="1.3",0..toPrecision&&(l="1.5",n=[],n.forEach))){l="1.6",i=0,e={};try{i=new Iterator(e),i.next&&(l="1.7",n.reduce&&(l="1.8",l.trim&&(l="1.8.1",Date.parse&&(l="1.8.2",Object.create&&(l="1.8.5")))))}catch(p){}}e=screen.width+"x"+screen.height,s=navigator.javaEnabled()?"Y":"N",i=screen.pixelDepth?screen.pixelDepth:screen.colorDepth,r=t.w.innerWidth?t.w.innerWidth:t.d.documentElement.offsetWidth,c=t.w.innerHeight?t.w.innerHeight:t.d.documentElement.offsetHeight;try{t.b.addBehavior("#default#homePage"),d=t.b.ub(a)?"Y":"N"}catch(m){}try{t.b.addBehavior("#default#clientCaps"),h=t.b.connectionType}catch(f){}t.resolution=e,t.colorDepth=i,t.javascriptVersion=l,t.javaEnabled=s,t.cookiesEnabled=u,t.browserWidth=r,t.browserHeight=c,t.connectionType=h,t.homepage=d,t.nb=1}},t.I={},t.loadModule=function(i,n){var a=t.I[i];if(!a){a=e["AppMeasurement_Module_"+i]?new e["AppMeasurement_Module_"+i](t):{},t.I[i]=t[i]=a,a.Fa=function(){return a.Ja},a.Ka=function(e){(a.Ja=e)&&(t[i+"_onLoad"]=e,t.B(i+"_onLoad",[t,a],1)||e(t,a))};try{Object.defineProperty?Object.defineProperty(a,"onLoad",{get:a.Fa,set:a.Ka}):a._olc=1}catch(o){a._olc=1}}n&&(t[i+"_onLoad"]=n,t.B(i+"_onLoad",[t,a],1)||n(t,a))},t.q=function(e){var i,n;for(i in t.I)if(!Object.prototype[i]&&(n=t.I[i])&&(n._olc&&n.onLoad&&(n._olc=0,n.onLoad(t,n)),n[e]&&n[e]()))return 1;return 0},t.bb=function(){var e=Math.floor(1e13*Math.random()),i=t.visitorSampling,n=t.visitorSamplingGroup;n="s_vsn_"+(t.visitorNamespace?t.visitorNamespace:t.account)+(n?"_"+n:"");var a=t.cookieRead(n);if(i){if(a&&(a=parseInt(a)),!a){if(!t.cookieWrite(n,e))return 0;a=e}if(a%1e4>v)return 0}return 1},t.K=function(e,i){var n,a,o,s,r,c;for(n=0;2>n;n++)for(a=n>0?t.ia:t.c,o=0;o<a.length;o++)if(s=a[o],(r=e[s])||e["!"+s]){if(!i&&("contextData"==s||"retrieveLightData"==s)&&t[s])for(c in t[s])r[c]||(r[c]=t[s][c]);t[s]=r}},t.Aa=function(e,i){var n,a,o,s;for(n=0;2>n;n++)for(a=n>0?t.ia:t.c,o=0;o<a.length;o++)s=a[o],e[s]=t[s],!i&&!e[s]&&(e["!"+s]=1)},t.Ua=function(t){var e,i,n,a,o,s,r=0,c="",l="";if(t&&t.length>255&&(e=""+t,i=e.indexOf("?"),i>0&&(s=e.substring(i+1),e=e.substring(0,i),a=e.toLowerCase(),n=0,"http://"==a.substring(0,7)?n+=7:"https://"==a.substring(0,8)&&(n+=8),i=a.indexOf("/",n),i>0&&(a=a.substring(n,i),o=e.substring(i),e=e.substring(0,i),a.indexOf("google")>=0?r=",q,ie,start,search_key,word,kw,cd,":a.indexOf("yahoo.co")>=0&&(r=",p,ei,"),r&&s)))){if((t=s.split("&"))&&t.length>1){for(n=0;n<t.length;n++)a=t[n],i=a.indexOf("="),i>0&&r.indexOf(","+a.substring(0,i)+",")>=0?c+=(c?"&":"")+a:l+=(l?"&":"")+a;c&&l?s=c+"&"+l:l=""}i=253-(s.length-l.length)-e.length,t=e+(i>0?o.substring(0,i):"")+"?"+s}return t},t.U=!1,t.O=!1,t.Ia=function(e){t.marketingCloudVisitorID=e,t.O=!0,t.k()},t.R=!1,t.L=!1,t.Ca=function(e){t.analyticsVisitorID=e,t.L=!0,t.k()},t.T=!1,t.N=!1,t.Ea=function(e){t.audienceManagerLocationHint=e,t.N=!0,t.k()},t.S=!1,t.M=!1,t.Da=function(e){t.audienceManagerBlob=e,t.M=!0,t.k()},t.isReadyToTrack=function(){var e=!0,i=t.visitor;return i&&i.isAllowed()&&(!t.U&&!t.marketingCloudVisitorID&&i.getMarketingCloudVisitorID&&(t.U=!0,t.marketingCloudVisitorID=i.getMarketingCloudVisitorID([t,t.Ia]),t.marketingCloudVisitorID)&&(t.O=!0),!t.R&&!t.analyticsVisitorID&&i.getAnalyticsVisitorID&&(t.R=!0,t.analyticsVisitorID=i.getAnalyticsVisitorID([t,t.Ca]),t.analyticsVisitorID)&&(t.L=!0),!t.T&&!t.audienceManagerLocationHint&&i.getAudienceManagerLocationHint&&(t.T=!0,t.audienceManagerLocationHint=i.getAudienceManagerLocationHint([t,t.Ea]),t.audienceManagerLocationHint)&&(t.N=!0),!t.S&&!t.audienceManagerBlob&&i.getAudienceManagerBlob&&(t.S=!0,t.audienceManagerBlob=i.getAudienceManagerBlob([t,t.Da]),t.audienceManagerBlob)&&(t.M=!0),(t.U&&!t.O&&!t.marketingCloudVisitorID||t.R&&!t.L&&!t.analyticsVisitorID||t.T&&!t.N&&!t.audienceManagerLocationHint||t.S&&!t.M&&!t.audienceManagerBlob)&&(e=!1)),e},t.j=i,t.l=0,t.callbackWhenReadyToTrack=function(e,n,a){var o;o={},o.Oa=e,o.Na=n,o.La=a,t.j==i&&(t.j=[]),t.j.push(o),0==t.l&&(t.l=setInterval(t.k,100))},t.k=function(){var e;if(t.isReadyToTrack()&&(t.l&&(clearInterval(t.l),t.l=0),t.j!=i))for(;t.j.length>0;)e=t.j.shift(),e.Na.apply(e.Oa,e.La)},t.Ga=function(e){var n,a,o=i,s=i;if(!t.isReadyToTrack()){if(n=[],e!=i)for(a in o={},e)o[a]=e[a];return s={},t.Aa(s,!0),n.push(o),n.push(s),t.callbackWhenReadyToTrack(t,t.track,n),!0}return!1},t.Wa=function(){var e,i=t.cookieRead("s_fid"),n="",a="";e=8;var o=4;if(!i||i.indexOf("-")<0){for(i=0;16>i;i++)e=Math.floor(Math.random()*e),n+="0123456789ABCDEF".substring(e,e+1),e=Math.floor(Math.random()*o),a+="0123456789ABCDEF".substring(e,e+1),e=o=16;i=n+"-"+a}return t.cookieWrite("s_fid",i,1)||(i=0),i},t.t=t.track=function(i,n){var a,s=new Date,r="s"+Math.floor(s.getTime()/108e5)%10+Math.floor(1e13*Math.random()),c=s.getYear();c="t="+t.escape(s.getDate()+"/"+s.getMonth()+"/"+(1900>c?c+1900:c)+" "+s.getHours()+":"+s.getMinutes()+":"+s.getSeconds()+" "+s.getDay()+" "+s.getTimezoneOffset()),t.visitor&&(t.visitor.getAuthState&&(t.authState=t.visitor.getAuthState()),!t.supplementalDataID&&t.visitor.getSupplementalDataID&&(t.supplementalDataID=t.visitor.getSupplementalDataID("AppMeasurement:"+t._in,t.expectSupplementalData?!1:!0))),t.q("_s"),t.B("track",arguments)||(t.Ga(i)||(n&&t.K(n),i&&(a={},t.Aa(a,0),t.K(i)),t.bb()&&(t.analyticsVisitorID||t.marketingCloudVisitorID||(t.fid=t.Wa()),t.hb(),t.usePlugins&&t.doPlugins&&t.doPlugins(t),t.account&&(t.abort||(t.trackOffline&&!t.timestamp&&(t.timestamp=Math.floor(s.getTime()/1e3)),s=e.location,t.pageURL||(t.pageURL=s.href?s.href:s),t.referrer||t.Ba||(t.referrer=o.document.referrer,t.Ba=1),t.referrer=t.Ua(t.referrer),t.q("_g")),t.Ya()&&!t.abort&&(t.Za(),c+=t.Xa(),t.gb(r,c),t.q("_t"),t.referrer=""))),i&&t.K(a,1)),t.abort=t.supplementalDataID=t.timestamp=t.pageURLRest=t.linkObject=t.clickObject=t.linkURL=t.linkName=t.linkType=e.vb=t.pe=t.pev1=t.pev2=t.pev3=t.g=0);
},t.tl=t.trackLink=function(e,i,n,a,o){return t.linkObject=e,t.linkType=i,t.linkName=n,o&&(t.i=e,t.p=o),t.track(a)},t.trackLight=function(e,i,n,a){return t.lightProfileID=e,t.lightStoreForSeconds=i,t.lightIncrementBy=n,t.track(a)},t.clearVars=function(){var e,i;for(e=0;e<t.c.length;e++)i=t.c[e],("prop"==i.substring(0,4)||"eVar"==i.substring(0,4)||"hier"==i.substring(0,4)||"list"==i.substring(0,4)||"channel"==i||"events"==i||"eventList"==i||"products"==i||"productList"==i||"purchaseID"==i||"transactionID"==i||"state"==i||"zip"==i||"campaign"==i)&&(t[i]=void 0)},t.tagContainerMarker="",t.gb=function(e,i){var n,a=t.trackingServer;n="";var o=t.dc,s="sc.",r=t.visitorNamespace;a?t.trackingServerSecure&&t.ssl&&(a=t.trackingServerSecure):(r||(r=t.account,a=r.indexOf(","),a>=0&&(r=r.substring(0,a)),r=r.replace(/[^A-Za-z0-9]/g,"")),n||(n="2o7.net"),o=o?(""+o).toLowerCase():"d1","2o7.net"==n&&("d1"==o?o="112":"d2"==o&&(o="122"),s=""),a=r+"."+o+"."+s+n),n=t.ssl?"https://":"http://",o=t.AudienceManagement&&t.AudienceManagement.isReady(),n+=a+"/b/ss/"+t.account+"/"+(t.mobile?"5.":"")+(o?"10":"1")+"/JS-"+t.version+(t.mb?"T":"")+(t.tagContainerMarker?"-"+t.tagContainerMarker:"")+"/"+e+"?AQB=1&ndh=1&pf=1&"+(o?"callback=s_c_il["+t._in+"].AudienceManagement.passData&":"")+i+"&AQE=1",t.Sa(n),t.Y()},t.Sa=function(e){t.e||t.$a(),t.e.push(e),t.aa=t.r(),t.za()},t.$a=function(){t.e=t.cb(),t.e||(t.e=[])},t.cb=function(){var i,n;if(t.fa()){try{(n=e.localStorage.getItem(t.da()))&&(i=e.JSON.parse(n))}catch(a){}return i}},t.fa=function(){var i=!0;return t.trackOffline&&t.offlineFilename&&e.localStorage&&e.JSON||(i=!1),i},t.pa=function(){var e=0;return t.e&&(e=t.e.length),t.v&&e++,e},t.Y=function(){if(!t.v)if(t.qa=i,t.ea)t.aa>t.G&&t.xa(t.e),t.ha(500);else{var e=t.Ma();e>0?t.ha(e):(e=t.na())&&(t.v=1,t.fb(e),t.jb(e))}},t.ha=function(e){t.qa||(e||(e=0),t.qa=setTimeout(t.Y,e))},t.Ma=function(){var e;return!t.trackOffline||t.offlineThrottleDelay<=0?0:(e=t.r()-t.wa,t.offlineThrottleDelay<e?0:t.offlineThrottleDelay-e)},t.na=function(){return t.e.length>0?t.e.shift():void 0},t.fb=function(e){if(t.debugTracking){var i="AppMeasurement Debug: "+e;e=e.split("&");var n;for(n=0;n<e.length;n++)i+="\n	"+t.unescape(e[n]);t.eb(i)}},t.Ha=function(){return t.marketingCloudVisitorID||t.analyticsVisitorID},t.Q=!1;var r;try{r=JSON.parse('{"x":"y"}')}catch(c){r=null}r&&"y"==r.x?(t.Q=!0,t.P=function(t){return JSON.parse(t)}):e.$&&e.$.parseJSON?(t.P=function(t){return e.$.parseJSON(t)},t.Q=!0):t.P=function(){return null},t.jb=function(i){var n,a,o;if(t.Ha()&&i.length>2047&&("undefined"!=typeof XMLHttpRequest&&(n=new XMLHttpRequest,"withCredentials"in n?a=1:n=0),!n&&"undefined"!=typeof XDomainRequest&&(n=new XDomainRequest,a=2),n&&t.AudienceManagement&&t.AudienceManagement.isReady())&&(t.Q?n.ja=!0:n=0),!n&&t.ab&&(i=i.substring(0,2047)),!n&&t.d.createElement&&t.AudienceManagement&&t.AudienceManagement.isReady()&&(n=t.d.createElement("SCRIPT"))&&"async"in n&&((o=(o=t.d.getElementsByTagName("HEAD"))&&o[0]?o[0]:t.d.body)?(n.type="text/javascript",n.setAttribute("async","async"),a=3):n=0),n||(n=new Image,n.alt=""),n.la=function(){try{t.ga&&(clearTimeout(t.ga),t.ga=0),n.timeout&&(clearTimeout(n.timeout),n.timeout=0)}catch(e){}},n.onload=n.lb=function(){if(n.la(),t.Ra(),t.V(),t.v=0,t.Y(),n.ja){n.ja=!1;try{var e=t.P(n.responseText);AudienceManagement.passData(e)}catch(i){}}},n.onabort=n.onerror=n.Ta=function(){n.la(),(t.trackOffline||t.ea)&&t.v&&t.e.unshift(t.Qa),t.v=0,t.aa>t.G&&t.xa(t.e),t.V(),t.ha(500)},n.onreadystatechange=function(){4==n.readyState&&(200==n.status?n.lb():n.Ta())},t.wa=t.r(),1==a||2==a){var s=i.indexOf("?");o=i.substring(0,s),s=i.substring(s+1),s=s.replace(/&callback=[a-zA-Z0-9_.\[\]]+/,""),1==a?(n.open("POST",o,!0),n.send(s)):2==a&&(n.open("POST",o),n.send(s))}else if(n.src=i,3==a){if(t.ua)try{o.removeChild(t.ua)}catch(r){}o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),t.ua=t.Pa}n.abort&&(t.ga=setTimeout(n.abort,5e3)),t.Qa=i,t.Pa=e["s_i_"+t.replace(t.account,",","_")]=n,(t.useForcedLinkTracking&&t.A||t.p)&&(t.forcedLinkTrackingTimeout||(t.forcedLinkTrackingTimeout=250),t.W=setTimeout(t.V,t.forcedLinkTrackingTimeout))},t.Ra=function(){if(t.fa()&&!(t.va>t.G))try{e.localStorage.removeItem(t.da()),t.va=t.r()}catch(i){}},t.xa=function(i){if(t.fa()){t.za();try{e.localStorage.setItem(t.da(),e.JSON.stringify(i)),t.G=t.r()}catch(n){}}},t.za=function(){if(t.trackOffline)for((!t.offlineLimit||t.offlineLimit<=0)&&(t.offlineLimit=10);t.e.length>t.offlineLimit;)t.na()},t.forceOffline=function(){t.ea=!0},t.forceOnline=function(){t.ea=!1},t.da=function(){return t.offlineFilename+"-"+t.visitorNamespace+t.account},t.r=function(){return(new Date).getTime()},t.ra=function(t){return t=t.toLowerCase(),0!=t.indexOf("#")&&0!=t.indexOf("about:")&&0!=t.indexOf("opera:")&&0!=t.indexOf("javascript:")?!0:!1},t.setTagContainer=function(e){var i,n,a;for(t.mb=e,i=0;i<t._il.length;i++)if((n=t._il[i])&&"s_l"==n._c&&n.tagContainerName==e){if(t.K(n),n.lmq)for(i=0;i<n.lmq.length;i++)a=n.lmq[i],t.loadModule(a.n);if(n.ml)for(a in n.ml)if(t[a])for(i in e=t[a],a=n.ml[a])!Object.prototype[i]&&("function"!=typeof a[i]||(""+a[i]).indexOf("s_c_il")<0)&&(e[i]=a[i]);if(n.mmq)for(i=0;i<n.mmq.length;i++)a=n.mmq[i],t[a.m]&&(e=t[a.m],e[a.f]&&"function"==typeof e[a.f]&&(a.a?e[a.f].apply(e,a.a):e[a.f].apply(e)));if(n.tq)for(i=0;i<n.tq.length;i++)t.track(n.tq[i]);n.s=t;break}},t.Util={urlEncode:t.escape,urlDecode:t.unescape,cookieRead:t.cookieRead,cookieWrite:t.cookieWrite,getQueryParam:function(i,n,a){var o;return n||(n=t.pageURL?t.pageURL:e.location),a||(a="&"),i&&n&&(n=""+n,o=n.indexOf("?"),o>=0&&(n=a+n.substring(o+1)+a,o=n.indexOf(a+i+"="),o>=0&&(n=n.substring(o+a.length+i.length+1),o=n.indexOf(a),o>=0&&(n=n.substring(0,o)),n.length>0)))?t.unescape(n):""}},t.z=["supplementalDataID","timestamp","dynamicVariablePrefix","visitorID","marketingCloudVisitorID","analyticsVisitorID","audienceManagerLocationHint","authState","fid","vmk","visitorMigrationKey","visitorMigrationServer","visitorMigrationServerSecure","charSet","visitorNamespace","cookieDomainPeriods","fpCookieDomainPeriods","cookieLifetime","pageName","pageURL","referrer","contextData","currencyCode","lightProfileID","lightStoreForSeconds","lightIncrementBy","retrieveLightProfiles","deleteLightProfiles","retrieveLightData","pe","pev1","pev2","pev3","pageURLRest"],t.c=t.z.concat(["purchaseID","variableProvider","channel","server","pageType","transactionID","campaign","state","zip","events","events2","products","audienceManagerBlob","tnt"]),t.ba=["timestamp","charSet","visitorNamespace","cookieDomainPeriods","cookieLifetime","contextData","lightProfileID","lightStoreForSeconds","lightIncrementBy"],t.H=t.ba.slice(0),t.ia=["account","allAccounts","debugTracking","visitor","trackOffline","offlineLimit","offlineThrottleDelay","offlineFilename","usePlugins","doPlugins","configURL","visitorSampling","visitorSamplingGroup","linkObject","clickObject","linkURL","linkName","linkType","trackDownloadLinks","trackExternalLinks","trackClickMap","trackInlineStats","linkLeaveQueryString","linkTrackVars","linkTrackEvents","linkDownloadFileTypes","linkExternalFilters","linkInternalFilters","useForcedLinkTracking","forcedLinkTrackingTimeout","trackingServer","trackingServerSecure","ssl","abort","mobile","dc","lightTrackVars","maxDelay","expectSupplementalData","AudienceManagement"];for(n=0;250>=n;n++)76>n&&(t.c.push("prop"+n),t.H.push("prop"+n)),t.c.push("eVar"+n),t.H.push("eVar"+n),6>n&&t.c.push("hier"+n),4>n&&t.c.push("list"+n);n=["latitude","longitude","resolution","colorDepth","javascriptVersion","javaEnabled","cookiesEnabled","browserWidth","browserHeight","connectionType","homepage"],t.c=t.c.concat(n),t.z=t.z.concat(n),t.ssl=e.location.protocol.toLowerCase().indexOf("https")>=0,t.charSet="UTF-8",t.contextData={},t.offlineThrottleDelay=0,t.offlineFilename="AppMeasurement.offline",t.wa=0,t.aa=0,t.G=0,t.va=0,t.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",t.w=e,t.d=e.document;try{t.ab="Microsoft Internet Explorer"==navigator.appName}catch(u){}t.V=function(){t.W&&(e.clearTimeout(t.W),t.W=i),t.i&&t.A&&t.i.dispatchEvent(t.A),t.p&&("function"==typeof t.p?t.p():t.i&&t.i.href&&(t.d.location=t.i.href)),t.i=t.A=t.p=0},t.ya=function(){t.b=t.d.body,t.b?(t.o=function(i){var n,a,o,s,r;if(!(t.d&&t.d.getElementById("cppXYctnr")||i&&i["s_fe_"+t._in])){if(t.ka){if(!t.useForcedLinkTracking)return t.b.removeEventListener("click",t.o,!0),void(t.ka=t.useForcedLinkTracking=0);t.b.removeEventListener("click",t.o,!1)}else t.useForcedLinkTracking=0;t.clickObject=i.srcElement?i.srcElement:i.target;try{if(!t.clickObject||t.F&&t.F==t.clickObject||!(t.clickObject.tagName||t.clickObject.parentElement||t.clickObject.parentNode))t.clickObject=0;else{var c=t.F=t.clickObject;if(t.Z&&(clearTimeout(t.Z),t.Z=0),t.Z=setTimeout(function(){t.F==c&&(t.F=0)},1e4),o=t.pa(),t.track(),o<t.pa()&&t.useForcedLinkTracking&&i.target){for(s=i.target;s&&s!=t.b&&"A"!=s.tagName.toUpperCase()&&"AREA"!=s.tagName.toUpperCase();)s=s.parentNode;if(s&&(r=s.href,t.ra(r)||(r=0),a=s.target,i.target.dispatchEvent&&r&&(!a||"_self"==a||"_top"==a||"_parent"==a||e.name&&a==e.name))){try{n=t.d.createEvent("MouseEvents")}catch(l){n=new e.MouseEvent}if(n){try{n.initMouseEvent("click",i.bubbles,i.cancelable,i.view,i.detail,i.screenX,i.screenY,i.clientX,i.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.button,i.relatedTarget)}catch(u){n=0}n&&(n["s_fe_"+t._in]=n.s_fe=1,i.stopPropagation(),i.kb&&i.kb(),i.preventDefault(),t.i=i.target,t.A=n)}}}}}catch(d){t.clickObject=0}}},t.b&&t.b.attachEvent?t.b.attachEvent("onclick",t.o):t.b&&t.b.addEventListener&&(navigator&&(navigator.userAgent.indexOf("WebKit")>=0&&t.d.createEvent||navigator.userAgent.indexOf("Firefox/2")>=0&&e.MouseEvent)&&(t.ka=1,t.useForcedLinkTracking=1,t.b.addEventListener("click",t.o,!0)),t.b.addEventListener("click",t.o,!1))):setTimeout(t.ya,30)},t.ya()}function s_gi(t){var e,i,n,a,o,s=window.s_c_il,r=t.split(","),c=0;if(s)for(i=0;!c&&i<s.length;){if(e=s[i],"s_c"==e._c&&(e.account||e.oun))if(e.account&&e.account==t)c=1;else for(n=e.account?e.account:e.oun,n=e.allAccounts?e.allAccounts:n.split(","),a=0;a<r.length;a++)for(o=0;o<n.length;o++)r[a]==n[o]&&(c=1);i++}return c||(e=new AppMeasurement),e.setAccount?e.setAccount(t):e.sa&&e.sa(t),e}function s_pgicq(){var t,e,i,n=window,a=n.s_giq;if(a)for(t=0;t<a.length;t++)e=a[t],i=s_gi(e.oun),i.setAccount(e.un),i.setTagContainer(e.tagContainerName);n.s_giq=0}!function(){"use strict";function t(e,n){function a(t,e){return function(){return t.apply(e,arguments)}}var o;if(n=n||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=n.touchBoundary||10,this.layer=e,this.tapDelay=n.tapDelay||200,this.tapTimeout=n.tapTimeout||700,!t.notNeeded(e)){for(var s=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],r=this,c=0,l=s.length;l>c;c++)r[s[c]]=a(r[s[c]],r);i&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(t,i,n){var a=Node.prototype.removeEventListener;"click"===t?a.call(e,t,i.hijacked||i,n):a.call(e,t,i,n)},e.addEventListener=function(t,i,n){var a=Node.prototype.addEventListener;"click"===t?a.call(e,t,i.hijacked||(i.hijacked=function(t){t.propagationStopped||i(t)}),n):a.call(e,t,i,n)}),"function"==typeof e.onclick&&(o=e.onclick,e.addEventListener("click",function(t){o(t)},!1),e.onclick=null)}}var e=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!e,n=/iP(ad|hone|od)/.test(navigator.userAgent)&&!e,a=n&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=n&&/OS [6-7]_\d/.test(navigator.userAgent),s=navigator.userAgent.indexOf("BB10")>0;t.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(n&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},t.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},t.prototype.sendClick=function(t,e){var i,n;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),n=e.changedTouches[0],i=document.createEvent("MouseEvents"),i.initMouseEvent(this.determineEventType(t),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,t.dispatchEvent(i)},t.prototype.determineEventType=function(t){return i&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},t.prototype.focus=function(t){var e;n&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},t.prototype.updateScrollParent=function(t){var e,i;if(e=t.fastClickScrollParent,!e||!e.contains(t)){i=t;do{if(i.scrollHeight>i.offsetHeight){e=i,t.fastClickScrollParent=i;break}i=i.parentElement}while(i)}e&&(e.fastClickLastScrollTop=e.scrollTop)},t.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},t.prototype.onTouchStart=function(t){var e,i,o;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),i=t.targetTouches[0],n){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!a){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=i.pageX,this.touchStartY=i.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},t.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],i=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>i||Math.abs(e.pageY-this.touchStartY)>i?!0:!1},t.prototype.onTouchMove=function(t){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},t.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},t.prototype.onTouchEnd=function(t){var e,s,r,c,l,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,s=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(l=t.changedTouches[0],u=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),r=u.tagName.toLowerCase(),"label"===r){if(e=this.findControl(u)){if(this.focus(u),i)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-s>100||n&&window.top!==window&&"input"===r?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),n&&"select"===r||(this.targetElement=null,t.preventDefault()),!1);return n&&!a&&(c=u.fastClickScrollParent,c&&c.fastClickLastScrollTop!==c.scrollTop)?!0:(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},t.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},t.prototype.onMouse=function(t){return this.targetElement?t.forwardedTouchEvent?!0:t.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1):!0:!0},t.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail?!0:(e=this.onMouse(t),e||(this.targetElement=null),e)},t.prototype.destroy=function(){var t=this.layer;i&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},t.notNeeded=function(t){var e,n,a,o;if("undefined"==typeof window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(s&&(a=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),a[1]>=10&&a[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction?!0:(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],o>=27&&(e=document.querySelector("meta[name=viewport]"),e&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))?!0:"none"===t.style.touchAction||"manipulation"===t.style.touchAction?!0:!1)},t.attach=function(e,i){return new t(e,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("fastclick",[],function(){return t}):"undefined"!=typeof module&&module.exports?(module.exports=t.attach,module.exports.FastClick=t):window.FastClick=t}(),define("common/utils/background",["fastdom","common/utils/_","common/utils/config"],function(t,e,i){return function(t){var n=i.switches.backgroundJs;e.reduceRight(t,function(t,e){return function(){var i=function(){e(),t()};n?setTimeout(i,1):i()}},function(){})()}}),define("common/modules/analytics/foresee-survey",["common/utils/config","common/utils/cookies","common/utils/detect"],function(t,e,i){function n(){require(["js!foresee.js"])}function a(){var a="Network Front"===t.page.contentType,o=i.isBreakpoint({max:"mobile"})?.008:.006,s=Math.random()<=o,r=/forceForesee/.test(location.hash);e.get("GU_TEST")||a||!(window.openForeseeWhenReady||s||r)||n(),window.guardian&&(window.guardian.openForesee=n)}return{load:a}}),define("common/modules/analytics/livestats",["common/utils/cookies","common/utils/storage","common/modules/analytics/beacon","common/modules/experiments/ab"],function(t,e,i,n){function a(){var t="gu.session";return"undefined"!=typeof s?s:(e.session.get(t)?s=!1:(e.session.set(t,"true"),s=!0),s)}function o(t,e){var i,n=[];for(i in t)n.push(i+"="+encodeURIComponent(t[i]));return e+"?"+n.join("&")}var s;return{log:function(){var t=n.getAbLoggableObject();a()?t.type="session":t.type="view",i.fire(o(t,"/ab.gif"))}}}),define("common/modules/analytics/media-listener",["bean","common/utils/mediator"],function(t,e){return function(){if(window.matchMedia){var t=window.matchMedia("print");t.addListener(function(){t.matches&&e.emit("module:clickstream:interaction","print")})}}});var s=s_gi(s_account);s.charSet="UTF-8",s.currencyCode="GBP",s.trackDownloadLinks=!0,s.trackExternalLinks=!1,s.trackInlineStats=!0,s.linkDownloadFileTypes="exe,zip,wav,mp3,mov,mpg,avi,wmv,pdf,doc,docx,xls,xlsx,ppt,pptx",s.linkInternalFilters="javascript:,adinfo-guardian.co.uk,dating.guardian.co.uk,guardian.co.uk,guardian.greatgetaways.co.uk,guardian.lcplc-online.co.uk,guardian.oddschecker.com,guardian.pickthescore.co.uk,guardian.sportinglife.com,guardian.touch-line.com,guardian.unbiased.co.uk,guardianapis.com,guardianapps.co.uk,guardianbooks.co.uk,guardianbookshop.co.uk,guardiancottages.co.uk,guardiandigitalcomparison.co.uk,guardiandirectsubs.co.uk,guardianeatright.co.uk,guardianecostore.co.uk,guardianenergycomparison.co.uk,guardianenergycomparison.com,guardianfashionstore.co.uk,guardiangardencentre.co.uk,guardiangiftexperiences.co.uk,guardianholidayoffers.co.uk,guardianhomeexchange.co.uk,guardianhomeexchange.com,guardianinvesting.co.uk,guardianjobs.co.uk,guardianjobs.com,guardianjobs.mobi,guardianjobsrecruiter.co.uk,guardiannews.com,guardian-newspaper.com,guardianoffers.co.uk,guardianprofessional.co.uk,guardianpublic.co.uk,guardiansubscriptions.co.uk,guardiantickets.co.uk,guardianvouchercodes.co.uk,guardianweekly.co.uk,guardianweekly.com,id.guardian.co.uk,ivebeenthere.co.uk,jobs.guardian.co.uk,kable.co.uk,money-deals.co.uk,mps-expenses.guardian.co.uk,ogenterprises.co.uk,ogtravelinsurance.co.uk,sixsongsof.me,sixwordmemoirs.co.uk,smarthealthcare.com,sofacinema.co.uk,static.guim.co.uk,theguardian.co.uk,theguardian.com,traffic.outbrain.com,tvlistings.guardian.co.uk",s.linkLeaveQueryString=!1,s.linkTrackVars="None",s.linkTrackEvents="None",s._tpDST={2012:"3/25,10/28",2013:"3/31,10/27",2014:"3/30,10/26",2015:"3/29,10/25",2016:"3/27,10/30",2017:"3/26,10/29",2018:"3/25,10/28",2019:"3/31,10/27"},s.usePlugins=!0,s.doPlugins=s_doPlugins;var s_sv_dynamic_root="survey.112.2o7.net/survey/dynamic",s_sv_gather_root="survey.112.2o7.net/survey/gather";s.loadMediaModule=function(t,e){var i=this;i.loadModule("Media"),i.Media.autoTrack=!1,i.Media.trackWhilePlaying=!0,i.Media.trackSeconds=15,i.Media.trackVars="events,eVar7,eVar43,eVar44,prop44,eVar47,eVar48,eVar56,eVar61",i.Media.trackEvents="event17,event18,event21,event22,event23,event57,event63",i.Media.trackMilestones="25,50,75",i.Media.segmentByMilestones=!0,i.Media.trackUsingContextData=!0,i.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.media.segment":"eVar48","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event17","a.media.segmentView":"event63","a.media.complete":"event18","a.media.milestones":{25:"event21",50:"event22",75:"event23"}},i.Media.monitor=function(t,e){"OPEN"==e.event&&(t.eVar7=t.pageName,t.eVar61=t._GUVideo.restricted?"restricted":"not restricted",t._GUVideo.ad?t.eVar47="video ad":(t.eVar47="video content",t.eVar56=t._GUVideo.provider),t.Media.track(e.name))},i._GUVideo={},i._GUVideo.provider=t,i._GUVideo.restricted=e},s.trackVideoContent=function(t,e){var i=this;i.Media.autoTrack=!1,i.Media.trackVars="events,eVar7,eVar11,eVar43,eVar44,prop44,eVar47,eVar48,eVar56,eVar61",i.Media.trackEvents="event17,event18,event21,event22,event23,event57,event63",i.Media.trackMilestones="25,50,75",i.Media.segmentByMilestones=!0,i.Media.trackUsingContextData=!0,i.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.media.segment":"eVar48","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event17","a.media.segmentView":"event63","a.media.complete":"event18","a.media.milestones":{25:"event21",50:"event22",75:"event23"}},i._GUVideo.ad=!1,i._GUVideo.provider=t,i._GUVideo.restricted=e},s.trackVideoAd=function(){var t=this;t.Media.autoTrack=!1,t.Media.trackVars="events,eVar7,eVar11,eVar43,prop44,eVar44,eVar47,eVar56,eVar61",t.Media.trackEvents="event57,event59,event64",t.Media.segmentByMilestones=!1,t.Media.trackUsingContextData=!0,t.Media.contextDataMapping={"a.media.name":"eVar44,prop44","a.contentType":"eVar43","a.media.timePlayed":"event57","a.media.view":"event59","a.media.complete":"event64"},t._GUVideo.ad=!0,t._GUVideo.restricted=!1},s.trackingServer="hits.guardian.co.uk",s.trackingServerSecure="hits-secure.guardian.co.uk",s.visitorNamespace="guardian",s.getValOnce=new Function("v","c","e","t","var s=this,a=new Date,v=v?v:'',c=c?c:'s_gvo',e=e?e:0,i=t=='m'?60000:86400000;k=s.c_r(c);if(v){a.setTime(a.getTime()+e*i);s.c_w(c,v,e==0?0:a);}return v==k?'':v"),s.getDaysSinceLastVisit=new Function("c","var s=this,e=new Date(),es=new Date(),cval,cval_s,cval_ss,ct=e.getTime(),day=24*60*60*1000,f1,f2,f3,f4,f5;e.setTime(ct+3*365*day);es.setTime(ct+30*60*1000);f0='Cookies Not Supported';f1='First Visit';f2='More than 30 days';f3='More than 7 days';f4='Less than 7 days';f5='Less than 1 day';cval=s.c_r(c);if(cval && cval.length==0){s.c_w(c,ct,e);s.c_w(c+'_s',f1,es);}else{var d=ct-cval;if(d>30*60*1000){if(d>30*day){s.c_w(c,ct,e);s.c_w(c+'_s',f2,es);}else if(d<30*day+1 && d>7*day){s.c_w(c,ct,e);s.c_w(c+'_s',f3,es);}else if(d<7*day+1 && d>day){s.c_w(c,ct,e);s.c_w(c+'_s',f4,es);}else if(d<day+1){s.c_w(c,ct,e);s.c_w(c+'_s',f5,es);}}else{s.c_w(c,ct,e);cval_ss=s.c_r(c+'_s');s.c_w(c+'_s',cval_ss,es);}}cval_s=s.c_r(c+'_s');if(cval_s.length==0) return f0;else if(cval_s!=f1&&cval_s!=f2&&cval_s!=f3&&cval_s!=f4&&cval_s!=f5) return '';else return cval_s;"),s.crossVisitParticipation=new Function("v","cn","ex","ct","dl","ev","dv","var s=this,ce;if(typeof(dv)==='undefined')dv=0;if(s.events&&ev){var ay=s.split(ev,',');var ea=s.split(s.events,',');for(var u=0;u<ay.length;u++){for(var x=0;x<ea.length;x++){if(ay[u]==ea[x]){ce=1;}}}}if(!v||v==''){if(ce){s.c_w(cn,'');return'';}else return'';}v=escape(v);var arry=new Array(),a=new Array(),c=s.c_r(cn),g=0,h=new Array();if(c&&c!=''){arry=s.split(c,'],[');for(q=0;q<arry.length;q++){z=arry[q];z=s.repl(z,'[','');z=s.repl(z,']','');z=s.repl(z,\"'\",'');arry[q]=s.split(z,',')}}var e=new Date();e.setFullYear(e.getFullYear()+5);if(dv==0&&arry.length>0&&arry[arry.length-1][0]==v)arry[arry.length-1]=[v,new Date().getTime()];else arry[arry.length]=[v,new Date().getTime()];var start=arry.length-ct<0?0:arry.length-ct;var td=new Date();for(var x=start;x<arry.length;x++){var diff=Math.round((td.getTime()-arry[x][1])/86400000);if(diff<ex){h[g]=unescape(arry[x][0]);a[g]=[arry[x][0],arry[x][1]];g++;}}var data=s.join(a,{delim:',',front:'[',back:']',wrap:\"'\"});s.c_w(cn,data,e);var r=s.join(h,{delim:dl});if(ce)s.c_w(cn,'');return r;"),s.getNewRepeat=new Function("d","cn","var s=this,e=new Date(),cval,sval,ct=e.getTime();d=d?d:30;cn=cn?cn:'s_nr';e.setTime(ct+d*24*60*60*1000);cval=s.c_r(cn);if(cval.length==0){s.c_w(cn,ct+'-New',e);return'New';}sval=s.split(cval,'-');if(ct-sval[0]<30*60*1000&&sval[1]=='New'){s.c_w(cn,ct+'-New',e);return'New';}else{s.c_w(cn,ct+'-Repeat',e);return'Repeat';}"),s.getPreviousValue=new Function("v","c","el","var s=this,t=new Date,i,j,r='';t.setTime(t.getTime()+1800000);if(el){if(s.events){i=s.split(el,',');j=s.split(s.events,',');for(x in i){for(y in j){if(i[x]==j[y]){if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}}}}}else{if(s.c_r(c)) r=s.c_r(c);v?s.c_w(c,v,t):s.c_w(c,'no value',t);return r}"),s.getLoadTimeDim=new Function("","var t='';if(typeof performance!=='undefined'){t=(new Date()).getTime()-performance.timing.requestStart;t=t/1000;t=(t>=0&&t<500)?t.toFixed(1):'';}return t;"),s.inList=new Function("v","l","d","var s=this,ar=Array(),i=0,d=(d)?d:',';if(typeof(l)=='string'){if(s.split)ar=s.split(l,d);else if(l.split)ar=l.split(d);else return-1}else ar=l;while(i<ar.length){if(v==ar[i])return true;i++}return false;"),s.apl=new Function("l","v","d","u","var s=this,m=0;if(!l)l='';if(u){var i,n,a=s.split(l,d);for(i=0;i<a.length;i++){n=a[i];m=m||(u==1?(n==v):(n.toLowerCase()==v.toLowerCase()));}}if(!m)l=l?l+d+v:v;return l"),s.split=new Function("l","d","var i,x=0,a=new Array;while(l){i=l.indexOf(d);i=i>-1?i:l.length;a[x++]=l.substring(0,i);l=l.substring(i+d.length);}return a"),s.getTimeParting=new Function("h","z","var s=this,od;od=new Date('1/1/2000');if(od.getDay()!=6||od.getMonth()!=0){return'Data Not Available';}else{var H,M,D,W,U,ds,de,tm,tt,da=['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],d=new Date(),a=[];z=z?z:0;z=parseFloat(z);if(s._tpDST && s._tpDST[d.getFullYear()]){var dso=s._tpDST[d.getFullYear()].split(/,/);ds=new Date(dso[0]+'/'+d.getFullYear());de=new Date(dso[1]+'/'+d.getFullYear());if(h=='n'&&d>ds&&d<de){z=z+1;}else if(h=='s'&&(d>de||d<ds)){z=z+1;}}d=d.getTime()+(d.getTimezoneOffset()*60000);d=new Date(d+(3600000*z));H=d.getHours();M=d.getMinutes();M=(M<10)?'0'+M:M;D=d.getDay();U='AM';W='Weekday';if(H>=12){U='PM';H=H-12;}if(H==0){H=12;}if(D==6||D==0){W='Weekend';}D=da[D];tm=H+':'+M+U;tt=H+':'+((M>30)?'30':'00')+U;a=[tm,tt,D,W];return a;}"),s.getParamValue=function(t){var e,i=window.location.search,n="&";return t&&i&&(e=i.indexOf("?"),e>=0&&(i=n+i.substring(e+1)+n,e=i.indexOf(n+t+"="),e>=0&&(i=i.substring(e+n.length+t.length+1),e=i.indexOf(n),e>=0&&(i=i.substring(0,e)),i.length>0)))?s.unescape(i):""};var j=null;AppMeasurement.getInstance=s_gi,window.s_objectID||(window.s_objectID=0),s_pgicq(),define("omniture",function(t){return function(){var e;return e||t.s}}(this)),define("common/utils/date-formats",[],function(){function t(t){return new Date(t).toISOString().substr(0,10).replace(/-/g,"/")}return{utcDateString:t}}),define("text!common/views/history/tag.html",[],function(){return'<li class="inline-list__item">\n    <a href="/<%=id%>" class="button button--small button--tag button--secondary" data-link-name="<%=index%> | <%=name%>"><%=name%></a>\n</li>\n'}),define("text!common/views/history/mega-nav.html",[],function(){return'<li class="global-navigation__section js-global-navigation__section--history" data-link-name="shortcuts">\n    <span class="global-navigation__title global-navigation__title--history">recently visited</span>\n    <ul class="global-navigation__children global-navigation__children--history">\n        <%=tags%>\n        <a class="button button--small button--tag button--tertiary" href="/preferences" data-link-name="edit">edit these</a>\n    </ul>\n</li>\n'}),define("common/modules/onward/history",["fastdom","common/utils/$","common/utils/_","common/utils/config","common/utils/template","common/utils/storage","common/utils/url","common/modules/experiments/ab","text!common/views/history/tag.html","text!common/views/history/mega-nav.html"],function(t,e,i,n,a,o,s,r,c,l){function u(t){return x=t,o.local.set(q,t)}function d(t){return N=t,o.local.set($,t)}function h(){return x=x||o.local.get(q)||[]}function p(){return N||(N=o.local.get($),i.isObject(N)&&i.isObject(N.tags)&&i.isNumber(N.periodEnd)||(N={periodEnd:z,tags:{},showInMegaNav:!0})),N}function m(t){var e=p();delete e.tags[t],d(e)}function f(t){return(i.find(h(),function(e){return e[0]===t})||[])[1]>1}function g(t,e){var n=e||z,a=n-t.periodEnd;return 0!==a&&(t.periodEnd=n,i.each(t.tags,function(e,n){var o=i.chain(R).map(function(t){var n=i.chain(e[t.indexInRecord]).map(function(t){var e=t[0]+a;return B>e&&e>=0?[e,t[1]]:!1}).compact().value();return n.length>1||1===n.length&&n[0][0]<U?n:[]}).value();i.some(o,function(t){return t.length})?t.tags[n]=[e[0]].concat(o):delete t.tags[n]})),t}function v(t){var e=p().tags,n=i.keys(e),a=i.extend({number:100,weights:{},thresholds:{}},t);return n=a.whitelist?n.filter(function(t){return a.whitelist.indexOf(t)>-1}):n,n=a.blacklist?n.filter(function(t){return-1===a.blacklist.indexOf(t)}):n,i.chain(n).map(function(t){var n=e[t],o=i.reduce(R,function(t,e){return t+k(n[e.indexInRecord],a.weights[e.type],a.thresholds[e.type])},0);return{idAndName:[t,n[0]],rank:o}}).compact().sortBy("rank").last(a.number).reverse().pluck("idAndName").value()}function b(t){var e=t&&t.flush;return A=!e&&A||v({blacklist:E(),number:10,weights:{content:1,front:5},thresholds:{content:5,front:1}})}function k(t,e,n){var a,o=0;return e=e||1,n=n||1,a=i.reduce(t,function(t,i){var n=i[0],a=i[1];return o+=a,t+e*(9+a)*(B-n)},0),n>o?0:a}function y(t){return(t||"").split(",")[0]}function w(t){return t?(t=t.replace(/^\/|\/$/g,""),t.match(G)&&(t=t.replace(Y,"")),t=t.split("/"),t=2===t.length&&t[0]===t[1]?[t[0]]:t,t.join("/")):"";
}function _(){x=void 0,N=void 0,o.local.remove(q),o.local.remove($)}function T(t){var e,n=t.pageId,a=0;t.isFront||(e=h().filter(function(t){var e=i.isArray(t),o=e&&t[0]===n;return a=o?t[1]:a,e&&!o}),e.unshift([n,a+1]),u(e.slice(0,H)))}function C(t,e){var n=g(p(),e),a=w(t.pageId),o=!1;i.chain(F).reduceRight(function(e,i){var n=w(y(t[i.tid])),s=n&&y(t[i.tname]);return n&&s&&(e[n]=s),o=o||n===a,e},{}).each(function(t,e){var a,s,r=n.tags[e]||[];i.forEach(R,function(t){r[t.indexInRecord]=r[t.indexInRecord]||[]}),r[0]=t,a=r[o?2:1],s=i.find(a,function(t){return 0===t[0]}),s?s[1]=s[1]+1:a.unshift([0,1]),n.tags[e]=r}),d(n)}function E(){return O=O||e(".js-navigation-header .js-top-navigation a").map(function(t){return w(s.getPath(e(t).attr("href")))})}function S(){return e(".js-global-navigation")}function D(){var e,i;p().showInMegaNav!==!1&&(K&&I(),e=b(),e.length&&(i=a(l,{tags:e.map(j).join("")}),t.write(function(){S().prepend(i)}),K=!0))}function I(){S().each(function(i){t.write(function(){e(".js-global-navigation__section--history",i).remove()})}),K=!1}function L(){return p().showInMegaNav!==!1}function M(t){var e=p();e.showInMegaNav=!!t,e.showInMegaNav?D():I(),d(e)}function j(t,e){return a(c,{id:t[0],name:t[1],index:e+1})}var x,N,A,O,P=["uk","us","au"],V=["business","commentisfree","culture","environment","media","money","sport","technology"],F=[{tid:"section",tname:"sectionName"},{tid:"keywordIds",tname:"keywords"},{tid:"seriesId",tname:"series"},{tid:"authorIds",tname:"author"}],R=[{type:"content",indexInRecord:1},{type:"front",indexInRecord:2}],B=30,U=10,H=50,q="gu.history",$="gu.history.summary",z=Math.floor(Date.now()/864e5),K=!1,G=new RegExp("^("+P.join("|")+")/("+V.join("|")+")$"),Y=new RegExp("^("+P.join("|")+")/");return{logHistory:T,logSummary:C,showInMegaNav:D,showInMegaNavEnable:M,showInMegaNavEnabled:L,getPopular:v,getPopularFiltered:b,deleteFromSummary:m,isRevisit:f,reset:_,test:{getSummary:p,getHistory:h,pruneSummary:g}}}),define("common/modules/analytics/omniture",["omniture","common/utils/$","common/utils/_","common/utils/config","common/utils/cookies","common/utils/date-formats","common/utils/detect","common/utils/mediator","common/utils/pad","common/utils/storage","common/modules/analytics/beacon","common/modules/analytics/mvt-cookie","common/modules/experiments/ab","common/modules/onward/history","common/modules/identity/api"],function(t,e,i,n,a,o,s,r,c,l,u,d,h,p,m){function f(){this.isEmbed=!!guardian.isEmbed,this.s=window.s,this.pageviewSent=!1,this.addHandlers()}var g="s_ni",v="gu.analytics.referrerVars";return f.prototype.addHandlers=function(){r.on("module:clickstream:interaction",this.trackLinkImmediate.bind(this)),r.on("module:clickstream:click",this.logTag.bind(this)),r.on("module:analytics:omniture:pageview:sent",function(){this.isEmbed||u.fire("/count/pva.gif")}.bind(this)),r.on("module:analytics:omniture:pageview:sent",function(){n.switches.noBounceIndicator&&l.session.remove("gu-bounce-test")})},f.prototype.logView=function(){this.s.t(),this.confirmPageView()},f.prototype.generateTrackingImageString=function(){return"s_i_"+window.s_account.split(",").join("_")},f.prototype.getChannel=function(){return"Network Front"===n.page.contentType?"Network Front":this.isEmbed?"Embedded":n.page.section||""},f.prototype.logTag=function(t){var e,i;if(t.validTarget)if(t.sameHost&&!t.samePage){e={pageName:this.s.pageName,tag:t.tag||"untracked",time:(new Date).getTime()};try{sessionStorage.setItem(g,e.tag)}catch(n){}l.session.set(v,e)}else i=t.samePage?!0:t.target,this.trackLink(i,t.tag,{customEventProperties:t.customEventProperties})},f.prototype.populateEventProperties=function(e){this.s.linkTrackVars="channel,prop2,prop3,prop4,prop8,prop9,prop10,prop13,prop25,prop31,prop37,prop47,prop51,prop61,prop64,prop65,prop74,eVar7,eVar37,eVar38,eVar39,eVar50,events",this.s.linkTrackEvents="event37",this.s.events="event37",this.s.eVar37=n.page.contentType?n.page.contentType+":"+e:e,this.s.eVar7="D=pageName",this.s.prop37="D=v37",/social/.test(e)&&(t.linkTrackVars+=",eVar12",t.linkTrackEvents+=",event16",t.events+=",event16",t.eVar12=e)},f.prototype.trackLinkImmediate=function(t){this.trackLink(!0,t)},f.prototype.trackLink=function(t,e,n){n=n||{},this.populateEventProperties(e),i.assign(this.s,n.customEventProperties),this.s.tl(t,"o",e),i.forEach(n.customEventProperties,function(t,e){delete this.s[e]})},f.prototype.populatePageProperties=function(){var t,a=new Date,r=this.s.getTimeParting("n","+0"),u=l.session.get(v),f="frontend",b=h.makeOmnitureTag(document),k=d.getMvtFullId(),y=n.page.webPublicationDate;this.s.cookieDomainPeriods="2",this.s.linkInternalFilters+=",localhost,gucode.co.uk,gucode.com,guardiannews.com,int.gnl,proxylocal.com,theguardian.com",this.s.trackingServer="hits.theguardian.com",this.s.trackingServerSecure="hits-secure.theguardian.com",this.s.ce="UTF-8",this.s.pageName=n.page.analyticsName,this.s.prop1=n.page.headline||"",this.s.eVar1=a.getFullYear()+"/"+c(a.getMonth()+1,2)+"/"+c(a.getDate(),2),m.getUserFromCookie()&&(this.s.prop2="GUID:"+m.getUserFromCookie().id,this.s.eVar2="GUID:"+m.getUserFromCookie().id),this.s.prop3=n.page.publication||"",this.s.channel=this.getChannel(),this.s.prop4=n.page.keywords||"",this.s.prop6=n.page.author||"",this.s.prop7=y?o.utcDateString(y):"",this.s.prop8=n.page.pageCode||"",this.s.prop9=n.page.contentType||"",this.s.prop10=n.page.tones||"",this.s.prop13=n.page.series||"",this.s.eVar18=s.getBreakpoint(),this.s.eVar21=(window.innerWidth||document.documentElement.clientWidth)+"x"+(window.innerHeight||document.documentElement.clientHeight),this.s.eVar32=s.getOrientation(),this.s.prop20=r[2]+":"+r[1],this.s.eVar20="D=c20",this.s.prop25=n.page.blogs||"",this.s.prop60=s.isFireFoxOSApp()?"firefoxosapp":null,this.s.prop19=f,this.s.prop31=m.getUserFromCookie()?"registered user":"guest user",this.s.eVar31=m.getUserFromCookie()?"registered user":"guest user",this.s.prop40=s.adblockInUse,this.s.prop47=n.page.edition||"",this.s.prop51=n.page.allowUserGeneratedContent?"witness-contribution-cta-shown":null,this.s.eVar51=b,this.s.list1=b,this.s.list2=i.uniq(e("[data-component]").map(function(t){return e(t).attr("data-component")})).toString(),this.s.list3=i.map(p.getPopularFiltered(),function(t){return t[1]}).join(","),this.s.eVar51&&(this.s.events=this.s.apl(this.s.events,"event58",",")),k&&(this.s.eVar60=k),n.page.commentable&&(this.s.events=this.s.apl(this.s.events,"event46",",")),"identity"===n.page.section&&(this.s.prop11="Users",this.s.prop9="userid",this.s.eVar27=n.page.omnitureErrorMessage||"",this.s.eVar42=n.page.returnUrl||"",this.s.hier2="GU/Users/Registration",this.s.events=this.s.apl(this.s.events,n.page.omnitureEvent,",")),this.s.prop56="Javascript",n.page.productionOffice&&(this.s.prop64=n.page.productionOffice),this.s.prop62="Guardian JS-1.4.1 20140914",this.s.prop63=s.getPageSpeed(),this.s.prop65=n.page.headline||"",this.s.eVar70=n.page.headline||"",this.s.events=this.s.apl(this.s.events,"event4",",",2),this.s.prop67="nextgen-served",y?this.s.prop30="content":this.s.prop30="non-content",""!==this.s.getParamValue("INTCMP")&&(this.s.eVar50=this.s.getParamValue("INTCMP")),this.s.eVar50=this.s.getValOnce(this.s.eVar50,"s_intcampaign",0),this.s.eVar58=navigator.platform||"unknown",n.page.inBodyInternalLinkCount&&(this.s.prop58=n.page.inBodyInternalLinkCount),n.page.inBodyExternalLinkCount&&(this.s.prop69=n.page.inBodyExternalLinkCount),u&&(t=(new Date).getTime(),t-u.time<6e4&&(this.s.eVar24=u.pageName,this.s.eVar37=u.tag,this.s.events="event37",this.s.eVar7=u.pageName,this.s.prop37=u.tag),l.session.remove(g),l.session.remove(v)),this.s.prop73=s.isFacebookApp()?"facebook app":s.isTwitterApp()?"twitter app":null,this.s.prop75=n.page.wordCount||0,this.s.eVar75=n.page.wordCount||0,this.isEmbed&&(this.s.eVar11=this.s.prop11="Embedded",window.parent&&window.parent!==window&&(this.s.referrer=document.referrer))},f.prototype.go=function(){this.populatePageProperties(),this.logView(),r.emit("analytics:ready")},f.prototype.confirmPageView=function(){var t=setInterval(function(){var e=window[this.generateTrackingImageString()];"undefined"!=typeof e&&(e.complete===!0||e.width+e.height>0)&&(clearInterval(t),this.pageviewSent=!0,r.emit("module:analytics:omniture:pageview:sent"))}.bind(this),250);setTimeout(function(){clearInterval(t)},1e4)},new f}),define("common/modules/analytics/register",["common/utils/mediator","common/modules/experiments/ab","common/utils/_"],function(t,e,i){function n(t){c.push({name:t,status:"unfinished"})}function a(t){i.where(c,{name:t}).forEach(function(t){t.status="completed",t.endTime=Date.now()-l+"ms"})}function o(t){i.where(c,{name:t}).forEach(function(t){t.status="failed",t.endTime=Date.now()-l+"ms"})}function s(){require(["ophan/ng"],function(t){t.record({register:c,abTestRegister:e.getAbLoggableObject()})})}function r(){t.on("register:begin",n),t.on("register:end",a),t.on("register:error",o),window.setTimeout(s.bind(),5e3)}var c=[],l=Date.now();return{initialise:r,begin:n,end:a,error:o}}),define("common/modules/analytics/scrollDepth",["common/utils/_","common/utils/mediator"],function(t,e){function i(e){this.opts=t.assign(this.opts,e),this.opts.isContent&&(this.opts.contentEl=this.contentEl||document.getElementById("article")||document.getElementById("live-blog")),this.init()}return i.prototype.opts={changeThreshold:10,isContent:!1,pageEl:document.body},i.prototype.data={page:{start:(new Date).getTime(),depth:0,duration:0},content:{depth:0}},i.prototype.timeSince=function(t){return(new Date).getTime()-t},i.prototype.getPercentageInViewPort=function(t){var e=t.getBoundingClientRect(),i=window.innerHeight||document.body.clientHeight;return e.bottom<0||e.bottom<i?100:e.top>i?0:e.top>0?100/(e.height||1)*(i-e.top):100/(e.height||1)*(Math.abs(e.top)+i)},i.prototype.isInViewport=function(t){var e=t.getBoundingClientRect();return e.top<(window.innerHeight||document.body.clientHeight)&&e.left<(window.innerWidth||document.body.clientWidth)},i.prototype.setData=function(t){var e,i=this.opts[t+"El"];return i?(e=this.getPercentageInViewPort(i),e-this.data[t].depth>this.opts.changeThreshold?(this.data[t].depth=e,"number"==typeof this.data[t].duration&&(this.data[t].duration=this.timeSince(this.data[t].start)),!0):!1):!1},i.prototype.hasDataChanged=function(){var t=this.setData("page"),e=this.opts.isContent?this.setData("content"):!1;(t||e)&&this.log()},i.prototype.assertScrolling=function(){function t(){e.emit("scrolldepth:inactive")}"number"==typeof this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout(t.bind(this),1e3)},i.prototype.log=function(){e.emit("scrolldepth:data",this.data)},i.prototype.init=function(){e.on("window:scroll",t.debounce(this.assertScrolling.bind(this),200)),e.on("scrolldepth:inactive",this.hasDataChanged.bind(this)),e.on("module:clickstream:click",this.hasDataChanged.bind(this))},i}),define("common/utils/scan",["common/utils/_"],function(t){return function(e,i,n){return t.reduce(e,function(e,n){return e.concat(i(t.last(e),n))},[n])}}),define("common/modules/analytics/css-logging",["Promise","common/utils/_","common/utils/config","common/utils/ajax","common/utils/detect","common/utils/url","common/utils/scan","common/utils/mediator","common/modules/analytics/beacon"],function(t,e,i,n,a,o,s,r,c){function l(t){var i=t?t.cssRules||t.rules:null;return i?e.values(i):t}function u(t){return t&&t.selectorText&&t.selectorText.replace(y,"").split(w)}function d(t){var e=t.match(/\.[^\s\.]+\.[^\s]+/g)||[];return e.forEach(function(e){t=t.replace(e,h(e))}),t.replace(/^\s+|\s+$/g,"").replace(/\s+/g," ")}function h(t){return e.sortBy(t.split(".")).join(".")}function p(t){var i,n,a=e.chain(m()).map(l).flatten().map(l).flatten().map(u).flatten().compact().uniq().map(d).value();return t?a:(n=a.length,i=e.random(0,n),a.slice(i,i+k).concat(n>i+k?[]:a.slice(0,(i+k)%n)))}function m(){return e.chain(document.styleSheets).filter(function(t){return t&&e.values(t.rules||t.cssRules).length>0&&t.ownerNode&&"STYLE"===t.ownerNode.nodeName&&t.ownerNode.className.indexOf(_)>-1}).value()}function f(t){return n({url:t.href,crossOrigin:!0}).then(function(t){var e=document.createElement("style");e.className=_,e.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(e)})}function g(){return t.all(e.chain(document.styleSheets).filter(function(t){return t&&t.href&&t.href.match(/\/\/(localhost|assets\.guim\.co\.uk)/)&&(!t.media||"print"!==t.media.mediaText)&&-1===t.ownerNode.className.indexOf(T)}).forEach(function(t){t.ownerNode.className+=" "+T}).map(f).value())}function v(t){g().then(function(){c.postJson("/css",JSON.stringify({selectors:e.chain(p(t)).reduce(function(t,i){return e.isUndefined(t[i])&&(t[i]=!!document.querySelector(i)),t},{}).value(),contentType:i.page.contentType||"unknown",breakpoint:a.getBreakpoint()||"unknown"}),t)})}function b(t){return e.debounce(function(i){(!i||i.samePage)&&setTimeout(function(){v(t)},t?0:e.random(0,3e3))},500)}var k=500,y=new RegExp(/:+[^\s\,]+/g),w=new RegExp(/\s*,\s*/g),_="js-loggable",T="js-inlined",C=!1;return function(t){var i;t=t||"#csslogging"===window.location.hash,(t||1===e.random(1,2500))&&(i=b(t),i(),C||(r.on("module:clickstream:interaction",i),r.on("module:clickstream:click",i),C=!0))}}),define("common/utils/filterPairs",["common/utils/_"],function(t){return function(e){return t.chain(e).filter(function(t){return t[1]}).map(function(t){return t[0]}).value()}}),define("common/modules/analytics/simple-metrics",["common/utils/filterPairs","common/utils/mediator","common/modules/analytics/beacon"],function(t,e,i){return function(){navigator.sendBeacon&&(i.beaconCounts("sm-page-view"),e.on("module:clickstream:click",function(e){var n=t([["sm-interaction-on-same-page",e.samePage],["sm-another-guardian-page",!e.samePage&&e.sameHost],["sm-clicked-related-content",/related-content/.test(e.tag)],["sm-clicked-series-component",/\| series \|/.test(e.tag)],["sm-clicked-most-popular-component",/\| most popular \|/.test(e.tag)]]);n.length>0&&i.beaconCounts(n)}))}}),define("common/modules/navigation/navigation",["bean","qwery","fastdom","common/utils/mediator","common/utils/detect","common/utils/$"],function(t,e,i,n,a,o){var s={init:function(){this.copyMegaNavMenu(),this.enableMegaNavToggle(),this.replaceAllSectionsLink(),a.isIOS()&&a.getUserAgent.version>5&&i.write(function(){o(".navigation__scroll").css({"-webkit-overflow-scrolling":"touch"})})},copyMegaNavMenu:function(){var t=o.create(o(".js-mega-nav").html()),e=o(".js-mega-nav-placeholder");o(".global-navigation",t).addClass("global-navigation--top"),i.write(function(){e.append(t)})},replaceAllSectionsLink:function(){o(".js-navigation-header .js-navigation-toggle").attr("href","#nav-allsections")},enableMegaNavToggle:function(){t.on(document,"click",".js-navigation-toggle",function(t){var e=o("."+t.currentTarget.getAttribute("data-target-nav"));t.preventDefault(),i.write(function(){e.toggleClass("navigation-container--expanded navigation-container--collapsed"),n.emit(e.hasClass("navigation-container--expanded")?"modules:nav:open":"modules:nav:close")})})}};return s}),define("common/modules/commercial/donot-use-adblock",["common/utils/config","common/utils/detect","common/utils/storage","common/utils/template","common/modules/ui/message","common/modules/navigation/navigation","text!common/views/membership-message.html","common/views/svgs"],function(t,e,i,n,a,o,s,r){function c(){var o=i.local.get("alreadyVisited")||0,c="https://membership.theguardian.com/about/supporter?INTCMP=adb-mv";"mobile"!==e.getBreakpoint()&&e.adblockInUse&&t.switches.adblock&&o&&new a("adblock",{pinOnHide:!1,siteMessageLinkName:"adblock message variant",siteMessageCloseBtn:"hide"}).show(n(s,{supporterLink:c,messageText:"We notice you've got an ad-blocker switched on. Perhaps you'd like to support the Guardian another way?",linkText:"Become a supporter today",arrowWhiteRight:r("arrowWhiteRight")})),i.local.set("alreadyVisited",o+1)}return{init:c}}),define("common/utils/formatters",[],function(){return{integerCommas:function(t){var e,i,n,a=parseInt(t,10);if(!isNaN(a)){for(e=a.toFixed(0).split(""),n=e.length,i=e.length-1;i>=1;i--)(n-i)%3===0&&e.splice(i,0,",");return e.join("")}}}}),define("text!common/views/discussion/comment-count.html",[],function(){return'<a class="fc-trail__count fc-trail__count--commentcount" href="<%=url%>" data-link-name="Comment count"><%=icon%> <%=count%></a>\n'}),define("text!common/views/discussion/comment-count--content.html",[],function(){return'<a href="<%=url%>" data-link-name="Comment count" class="commentcount2 tone-colour">\n    <h3 class="commentcount2__heading"><%=icon%> Comments</h3>\n    <span class="commentcount2__value tone-colour"><%=count%></span>\n</a>\n'}),define("common/modules/discussion/comment-count",["bonzo","fastdom","qwery","common/utils/$","common/utils/_","common/utils/ajax","common/utils/formatters","common/utils/mediator","common/utils/template","common/views/svgs","text!common/views/discussion/comment-count.html","text!common/views/discussion/comment-count--content.html"],function(t,e,i,n,a,o,s,r,c,l,u,d){function h(e){var n=i("["+b+"]",e);return a.groupBy(n,function(e){return t(e).attr(b)})}function p(t){return a.chain(t).keys().uniq().sortBy().join(",").value()}function m(t){var e=t.getElementsByTagName("a")[0];return(e?e.pathname:"")+"#comments"}function f(n,o){n.forEach(function(n){a.forEach(o[n.id],function(a){var o,r,u,d,h=t(a),p=h.attr("data-discussion-url")||m(a);("true"!==h.attr("data-discussion-closed")||0!==n.count)&&(o=h.data("commentcount-format"),d=c(y[o]||w,{url:p,icon:l("commentCount16icon",["inline-tone-fill"]),count:s.integerCommas(n.count)}),u=i(".js-item__meta",a),r=u.length?t(u):h,e.write(function(){r.append(d),h.removeAttr(b),h.removeClass("u-h")}))})}),e.write(function(){r.emit("modules:commentcount:loaded",n)})}function g(t){e.read(function(){var e=h(t||document.body),i=p(e);o({url:k+i,type:"json",method:"get",crossOrigin:!0,success:function(t){t&&t.counts&&f(t.counts,e)}})})}function v(){document.body.querySelector("[data-discussion-id]")&&g(document.body),r.on("modules:related:loaded",g)}var b="data-discussion-id",k="/discussion/comment-counts.json?shortUrls=",y={content:d},w=u;return{init:v,getCommentCounts:g,getContentIds:p,getElementsIndexedById:h}}),define("common/modules/identity/facebook-authorizer",[],function(){function t(t){this.appId=t,this.onConnected=new e,this.onFBScriptLoaded=new e,this.onUserDataLoaded=new e,this.onNotAuthorized=new e,this.onNotLoggedIn=new e,this.cancelledLogin=new e}function e(){this.callbacks=[]}var i="facebook-jssdk";return t.DEFAULT_PERMISSIONS={scope:"email,publish_actions,publish_stream"},t.prototype.onConnected=null,t.prototype.onFBScriptLoaded=null,t.prototype.onUserDataLoaded=null,t.prototype.onNotAuthorized=null,t.prototype.onNotLoggedIn=null,t.prototype.cancelledLogin=null,t.accessToken=null,t.userId=null,t.userData=null,t.prototype.login=function(e,i){return(i||!this.accessToken&&!this.loginPending)&&(this.cancelledLogin.reset(),this.onConnected.reset(),this.loginPending=!0,this._loadFacebookAPI().then(function(i){i.login(this._handleGotLoginStatus.bind(this,!0),e||t.DEFAULT_PERMISSIONS)}.bind(this))),this.onConnected},t.prototype.getLoginStatus=function(e){return this.loginStatusPending||(this.loginStatusPending=!0,this._loadFacebookAPI().then(function(i){i.getLoginStatus(this._handleGotLoginStatus.bind(this,!1),e||t.DEFAULT_PERMISSIONS)}.bind(this))),this.onConnected},t.prototype._handleGotLoginStatus=function(t,e){switch(this.loginStatusPending=!1,this.loginPending=!1,e.status){case"connected":this.accessToken=e.authResponse.accessToken,this.userId=e.authResponse.userID,this._getUserData(),this.onConnected.resolve(FB,e.authResponse);break;case"not_authorized":this._getUserData(),this.onNotAuthorized.resolve(this);break;default:t&&this.cancelledLogin.resolve(),this.onNotLoggedIn.resolve()}},t.prototype._getUserData=function(){FB.api("/me",this._handleGotUserData.bind(this))},t.prototype._handleGotUserData=function(t){t&&!t.error&&(this.userData=t,this.onUserDataLoaded.resolve(t))},t.prototype._loadFacebookAPI=function(){return window.FB?this.onFBScriptLoaded.resolve(window.FB):document.getElementById(i)||this._requiredAlready||(this._requiredAlready=!0,this._loadFacebookScript()),this.onFBScriptLoaded},t.prototype._loadFacebookScript=function(){guardian.config.page.isPreview||require(["js!facebook.js"],this._handleScriptLoaded.bind(this))},t.prototype._handleScriptLoaded=function(){FB&&(FB.init({appId:this.appId,status:!0,cookie:!0,xfbml:!0}),this.onFBScriptLoaded.resolve(FB))},e.prototype.resolve=function(){this.args=Array.prototype.slice.apply(arguments);var t,e=this.callbacks.length;for(t=0;e>t;t++)this.callbacks[t].apply(null,this.args);this.callbacks=[]},e.prototype.then=function(t){void 0!==this.args?t.apply(null,this.args):this.callbacks.push(t)},e.prototype.reset=function(){this.args=void 0},t}),define("common/modules/navigation/profile",["bean","bonzo","fastdom","common/utils/config","common/utils/_","common/utils/ajax","common/utils/mediator","common/modules/identity/api"],function(t,e,i,n,a,o,s,r){function c(t){this.opts=a.assign(this.opts,t),this.dom.container=document.body.querySelector("."+c.CONFIG.classes.container),this.dom.content=this.dom.container.querySelector("."+c.CONFIG.classes.content),this.dom.popup=document.body.querySelector("."+c.CONFIG.classes.popup),this.dom.register=document.body.querySelector("."+c.CONFIG.classes.register)}return c.CONFIG={eventName:"modules:profilenav",classes:{container:"js-profile-nav",content:"js-profile-info",popup:"js-profile-popup",register:"js-profile-register"}},c.prototype.opts={url:"https://profile.theguardian.com"},c.prototype.dom={},c.prototype.init=function(){this.setFragmentFromCookie()},c.prototype.setFragmentFromCookie=function(){var t=r.getUserFromCookie(),n=e(this.dom.container),a=e(this.dom.content),o=e(this.dom.popup),s=e(this.dom.register);t&&(n.hasClass("is-signed-in")||i.write(function(){a.text(t.displayName),n.addClass("is-signed-in"),s.hide()}),o.html('<ul class="popup popup__group popup--profile is-off" data-link-name="Sub Sections" data-test-id="popup-profile">'+this.menuListItem("Comment activity",this.opts.url+"/user/id/"+t.id)+this.menuListItem("Edit profile",this.opts.url+"/public/edit")+this.menuListItem("Email preferences",this.opts.url+"/email-prefs")+this.menuListItem("Change password",this.opts.url+"/password/change")+this.menuListItem("Sign out",this.opts.url+"/signout")+"</ul>")),this.emitLoadedEvent(t)},c.prototype.menuListItem=function(t,e){return'<li class="popup__item"><a href="'+e+'" class="brand-bar__item--action" data-link-name="'+t+'">'+t+"</a></li>"},c.prototype.emitLoadedEvent=function(t){s.emit(c.CONFIG.eventName+":loaded",t)},c.prototype.emitErrorEvent=function(){s.emit(c.CONFIG.eventName+":error")},c}),define("common/modules/ui/toggles",["bean","bonzo","common/utils/$","common/utils/_","common/utils/mediator"],function(t,e,i,n,a){var o=function(){var o,s=this,r=["popup--search"],c="js-toggle-ready";this.init=function(){o=Array.prototype.slice.call(document.body.querySelectorAll("[data-toggle]")),o.forEach(function(i){if(!e(i).hasClass(c)){var n=s.getTarget(i);n&&(i.toggleTarget=n,e(i).addClass(c),t.add(i,"click",function(t){t.preventDefault(),s.toggle(i,o)}))}})},this.reset=function(t){o.filter(function(e){return!(t===e||n.contains(r,i(e).attr("data-toggle")))}).map(s.close)},a.on("module:clickstream:click",function(t){s.reset(t?t.target:null)})};return o.prototype.toggle=function(t,i){var n=this;i.forEach(function(i){i===t?n[e(i).hasClass("is-active")?"close":"open"](i):n.close(i)})},o.prototype.getTarget=function(t){var i=e(t).data("toggle");return i?document.body.querySelector("."+i):void 0},o.prototype.open=function(t){e(t).addClass("is-active"),e(t.toggleTarget).removeClass("is-off")},o.prototype.close=function(t){e(t).removeClass("is-active"),e(t.toggleTarget).addClass("is-off")},o}),define("common/modules/identity/autosignin",["bonzo","common/utils/ajax","common/utils/config","common/utils/time","common/modules/analytics/omniture","common/modules/identity/api","common/modules/identity/facebook-authorizer","common/modules/navigation/profile","common/modules/ui/message","common/modules/ui/toggles"],function(t,e,i,n,a,o,r,c,l,u){function d(){var t=this;t.header=document.body,this.init=function(){if(o.shouldAutoSigninInUser()){var e=i.page.fbAppId,a=new r(e);a.getLoginStatus(),a.onConnected.then(function(e,i){a.onUserDataLoaded.then(function(e){e.email&&t.signin(i,e.name)})}),a.onNotLoggedIn.then(function(){var t=n.currentDate();o.setNextFbCheckTime(t.setDate(t.getDate()+1))}),a.onNotAuthorized.then(function(){var t=n.currentDate();o.setNextFbCheckTime(t.setMonth(t.getMonth()+1))})}},this.signin=function(n,o){e({url:i.page.idWebAppUrl+"/jsapi/facebook/autosignup",cache:!1,crossOrigin:!0,type:"jsonp",data:{signedRequest:n.signedRequest,accessToken:n.accessToken},success:function(e){if(t.welcome(o),"ok"===e.status){var n=new c({url:i.page.idUrl});n.init(),(new u).init(),a.populateEventProperties("Social signin auto"),s.eVar13="facebook auto",s.linkTrackVars+=",eVar13",s.tl(this,"o","Social signin auto")}}})},this.welcome=function(t){var e='<p class="site-message__message" data-test-id="facebook-auto-sign-in-banner">Welcome '+t+', you’re signed in to the Guardian using Facebook. <a data-link-name="fb auto : sign out" href="'+i.page.idUrl+'/signout"/>Sign out</a>.</p>';new l("fbauto",{important:!0}).show(e)}}return d}),define("common/modules/ui/smartAppBanner",["common/utils/$","common/utils/cookies","common/utils/detect","common/utils/storage","common/utils/template","common/modules/user-prefs","common/modules/ui/message"],function(t,e,i,n,a,o,s){function r(){return(i.isIOS()||i.isAndroid())&&!i.isFireFoxOSApp()}function c(){return 4>g}function l(){var t=i.isIOS()?"ios":"android",n=new s(t),o=v+("mobile"===i.getBreakpoint()?"":b);n.show(a(o,m[t.toUpperCase()])),e.add(p,g+1)}function u(){r()&&c()&&l()}function d(){return"block"===t(".site-message--android").css("display")||"block"===t(".site-message--ios").css("display")}function h(){return t(".site-message--android").dim().height||t(".site-message--ios").dim().height}var p="GU_SMARTAPPBANNER",m={IOS:{LOGO:"http://assets.guim.co.uk/images/apps/ios-logo.png",SCREENSHOTS:"http://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"http://ad-x.co.uk/API/click/guardian789057jo/web3537df56ab1f7e",STORE:"on the App Store"},ANDROID:{LOGO:"http://assets.guim.co.uk/images/apps/android-logo-2x.png",SCREENSHOTS:"http://assets.guim.co.uk/images/apps/ios-screenshots.jpg",LINK:"http://ad-x.co.uk/API/click/guardian789057jo/web3537df5992e76b",STORE:"in Google Play"}},f=e.get(p),g=f&&!isNaN(f)?parseInt(f,10):0,v='<img src="<%=LOGO%>" class="app__logo" alt="Guardian App logo" /><div class="app__cta"><h4 class="app__heading">The Guardian app</h4><p class="app__copy">Instant alerts. Offline reading.<br/>Tailored to you.</p><p class="app__copy"><strong>FREE</strong> – <%=STORE%></p></div><a href="<%=LINK%>" class="app__link">View</a>',b='<img src="<%=SCREENSHOTS%>" class="app__screenshots" alt="screenshots" />';return{init:u,isMessageShown:d,getMessageHeight:h}}),define("common/modules/navigation/sticky",["bean","qwery","fastdom","common/utils/$","common/utils/_","common/utils/config","common/utils/detect","common/utils/mediator","common/modules/ui/smartAppBanner"],function(t,e,i,n,a,o,s,r,c){function l(){this.$els={},this.config={showHeaderDepth:.5,showHeaderAppleDepth:.3,showNavigationDepth:150,distance:0,direction:"down",showNavigation:!1,thresholdMobile:400,firstLoadDepth:500,isNavigationLocked:!1},this.breakpoint=s.getBreakpoint(),this.isMobile=a.contains(this.breakpoint,"mobile"),this.isTablet=a.contains(this.breakpoint,"tablet"),this.isAppleCampaign=o.page.hasBelowTopNavSlot,this.isSensitivePage="childrens-books-site"===o.page.section||o.page.shouldHideAdverts,this.isProfilePage="identity"===o.page.section,this.isAdblockInUse=s.adblockInUse}return l.prototype.init=function(){this.$els.header=n("#header"),this.$els.bannerDesktop=n(".top-banner-ad-container--above-nav"),this.$els.bannerMobile=n(".top-banner-ad-container--mobile"),this.$els.bannerBelowNav=n(".top-banner-ad-container--below-nav"),this.$els.main=n("#maincontent"),this.$els.navHeader=n(".js-navigation-header"),this.$els.burgerIcon=n(".js-navigation-toggle",this.$els.navHeader),this.$els.logoWrapper=n(".logo-wrapper",this.$els.navHeader),this.$els.navigation=n(".navigation",this.$els.navHeader),this.$els.window=n(window),i.read(function(){this.headerBigHeight=this.$els.navHeader.dim().height,this.navigationClassList=this.$els.navigation.attr("class")}.bind(this)),this.$els.window.scrollTop()>this.config.firstLoadDepth&&(this.isAppleCampaign?this.updatePositionApple():this.updatePosition()),this.isMobile?r.on("window:scroll",a.throttle(function(){this.updatePositionMobile()}.bind(this),10)):this.isAdblockInUse?r.on("window:scroll",a.throttle(function(){this.updatePositionAdblock()}.bind(this),10)):this.isAppleCampaign?r.on("window:scroll",a.throttle(function(){this.updatePositionApple()}.bind(this),10)):this.isProfilePage?this.updatePositionProfile():r.on("window:scroll",a.throttle(function(){this.updatePosition()}.bind(this),10)),r.on("modules:nav:open",function(){this.lockStickyNavigation()}.bind(this)),r.on("modules:nav:close",function(){this.unlockStickyNavigation()}.bind(this)),r.on("modules:search",function(){n(".js-popup--search").hasClass("is-off")?this.unlockStickyNavigation():this.lockStickyNavigation()}.bind(this))},l.prototype.unlockStickyNavigation=function(){this.config.isNavigationLocked=!1,i.write(function(){n(".js-global-navigation").removeClass("navigation__expandable--sticky").attr("height","auto")})},l.prototype.lockStickyNavigation=function(){this.config.isNavigationLocked=!0,i.read(function(){if(this.$els.header.hasClass("l-header--is-slim")||this.isMobile||this.isTablet){var t=window.innerHeight-n(".js-mega-nav-placeholder")[0].getBoundingClientRect().top;i.write(function(){n(".js-global-navigation").addClass("navigation__expandable--sticky").css("height",t)})}}.bind(this))},l.prototype.setScrollDirection=function(t){this.config.direction=t>this.config.prevScroll?"down":"up",this.config.prevScroll=t},l.prototype.shouldShowNavigation=function(t){"up"===this.config.direction&&0===this.config.distance&&(this.config.distance=t),this.config.showNavigation=Math.abs(t-this.config.distance)>this.config.showNavigationDepth},l.prototype.showNavigation=function(n){this.shouldShowNavigation(n),"up"===this.config.direction&&this.config.showNavigation?i.write(function(){this.isTablet||this.isMobile?this.$els.navigation.removeClass("animate-down-mobile").addClass("animate-up-mobile"):this.isSensitivePage?this.$els.navigation.css("display","block"):this.$els.navigation.removeClass("animate-down-desktop").addClass("animate-up-desktop")}.bind(this)):(this.config.showNavigation&&(this.config.distance=0,this.$els.navHeader.hasClass("navigation-container--expanded")&&t.fire(e(".js-navigation-toggle")[0],"click")),i.write(function(){this.isTablet||this.isMobile?this.$els.navigation.removeClass("animate-up-mobile").addClass("animate-down-mobile"):this.isSensitivePage?this.$els.navigation.css("display","none"):this.$els.navigation.removeClass("animate-up-desktop").addClass("animate-down-desktop")}.bind(this)))},l.prototype.setNavigationDefault=function(){i.write(function(){this.$els.navigation.removeAttr("class"),this.$els.navigation.attr("class",this.navigationClassList)}.bind(this))},l.prototype.updatePosition=function(){i.read(function(){var t=0,e=this.$els.window.scrollTop();this.isSensitivePage||(t=this.$els.bannerDesktop.dim().height||128),this.setScrollDirection(e),e>=this.headerBigHeight+t*this.config.showHeaderDepth&&!this.config.isNavigationLocked?(i.write(function(){this.$els.header.css({position:"fixed",
top:0,width:"100%","z-index":"1020","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)","backface-visibility":"hidden"}),this.$els.bannerDesktop.css({position:"absolute",width:"100%",top:this.headerBigHeight}),this.$els.main.css("margin-top",this.headerBigHeight+t),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.config.isNavigationLocked||"Interactive"===o.page.contentType||this.showNavigation(e)):e>=this.headerBigHeight?(i.write(function(){this.$els.bannerDesktop.css({position:"absolute",width:"100%",top:this.headerBigHeight,"z-index":"1019"}),this.config.isNavigationLocked||this.$els.header.addClass("l-header--is-slim")}.bind(this)),this.config.isNavigationLocked||("up"===this.config.direction?i.write(function(){this.$els.header.css({"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)"})}.bind(this)):i.write(function(){this.$els.header.css({position:"absolute","margin-top":t,"-webkit-transform":"translateY(-500%)","-ms-transform":"translateY(-500%)",transform:"translateY(-500%)","z-index":"1018"}),this.$els.main.css("margin-top",this.headerBigHeight+t)}.bind(this)))):(i.write(function(){this.$els.bannerDesktop.css({position:"fixed",top:0,width:"100%","z-index":"1019","backface-visibility":"hidden"}),"Interactive"!==o.page.contentType&&this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"relative",width:"100%","margin-top":t,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"1018"}),this.$els.main.css("margin-top",0),this.isSensitivePage&&this.$els.navigation.css("display","block")}.bind(this)),this.setNavigationDefault()),n(".gssb_c").length>0&&i.write(function(){n(".gssb_c").hide()})}.bind(this))},l.prototype.updatePositionProfile=function(){i.read(function(){var t=this.$els.header.dim().height;i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1020","margin-top":0,"backface-visibility":"hidden"}),this.$els.main.css("padding-top",t)}.bind(this))}.bind(this))},l.prototype.updatePositionAdblock=function(){i.read(function(){var t=this.$els.header.dim().height,e=this.$els.window.scrollTop();this.setScrollDirection(e),e>=t?(i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1000","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)","backface-visibility":"hidden"}),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.showNavigation(e)):(i.write(function(){this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"static",width:"100%","margin-top":0,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"998"})}.bind(this)),this.setNavigationDefault())}.bind(this))},l.prototype.updatePositionApple=function(){i.read(function(){var t=this.$els.bannerBelowNav.dim().height||336,e=this.$els.window.scrollTop();this.setScrollDirection(e),e>=t*this.config.showHeaderAppleDepth?(i.write(function(){this.$els.header.css({position:"fixed",top:0,width:"100%","z-index":"1020","margin-top":0,"-webkit-transform":"translateY(-100%)","-ms-transform":"translateY(-100%)",transform:"translateY(-100%)","backface-visibility":"hidden"}),this.$els.bannerBelowNav.css({position:"static",top:null,width:"100%","z-index":"1019"}),this.$els.header.addClass("l-header--is-slim"),this.$els.header.css({"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)"})}.bind(this)),this.showNavigation(e)):(i.write(function(){this.$els.header.removeClass("l-header--is-slim"),this.$els.header.css({position:"static",width:"100%","margin-top":0,"-webkit-transform":"translateY(0%)","-ms-transform":"translateY(0%)",transform:"translateY(0%)","z-index":"1018"})}.bind(this)),this.setNavigationDefault())}.bind(this))},l.prototype.fixedBannerMobile=function(t,e){i.write(function(){this.$els.header.css({position:"fixed",top:t,width:"100%","z-index":"1021","margin-top":0,"backface-visibility":"hidden"}),this.$els.bannerMobile.css({position:"fixed",top:this.headerBigHeight+t,width:"100%","z-index":"1019","backface-visibility":"hidden"}),this.$els.main.css("margin-top",this.headerBigHeight+e)}.bind(this))},l.prototype.updatePositionMobile=function(){i.read(function(){var t=this.$els.bannerMobile.dim().height,e=this.$els.window.scrollTop(),n=c.getMessageHeight();i.write(function(){this.setScrollDirection(e),c.isMessageShown()?n>e?i.write(function(){this.$els.header.css({position:"static",top:null,width:"100%","z-index":"1021","margin-top":0}),this.$els.bannerMobile.css({position:"static",top:null,width:"100%","z-index":"1019"}),this.$els.main.css("margin-top",0)}.bind(this)):e>n&&e<this.config.thresholdMobile?(i.write(function(){this.fixedBannerMobile(0,t)}.bind(this)),this.setNavigationDefault()):e>this.config.thresholdMobile&&(i.write(function(){this.$els.bannerMobile.css({position:"absolute",top:this.config.thresholdMobile+this.headerBigHeight})}.bind(this)),this.showNavigation(e)):e<this.config.thresholdMobile?(i.write(function(){this.fixedBannerMobile(0,t)}.bind(this)),this.setNavigationDefault()):(i.write(function(){this.$els.bannerMobile.css({position:"absolute",top:this.config.thresholdMobile+this.headerBigHeight})}.bind(this)),this.showNavigation(e))}.bind(this))}.bind(this))},new l}),define("common/modules/navigation/search",["bean","fastdom","common/utils/_","common/utils/$","common/utils/config","common/utils/detect","common/utils/mediator"],function(t,e,i,n,a,o,s){var r=function(){var r,c,l,u,d,h=this;a.switches.googleSearch&&a.page.googleSearchUrl&&a.page.googleSearchId&&(c=a.page.googleSearchUrl+"?cx="+a.page.googleSearchId,l="identity"===a.page.section?3:10,r=i.throttle(function(){h.load()}),t.on(document,"click",".js-search-toggle",function(t){r(),h.checkResults(),h.focusSearchField(),t.preventDefault(),s.emit("modules:search")}),t.on(document,"keydown",".gsc-input",function(){e.read(function(){var t=n(".gssb_c"),i=t.css("top"),a=n(window).scrollTop();e.write(function(){t.css({top:parseInt(i,10)+a,"z-index":"1030"})})})}),t.on(document,"click",".search-results",function(t){var e=t.target;"a"===e.nodeName.toLowerCase()&&(e.target="_self")})),this.focusSearchField=function(){var t=n("input.gsc-input");t.length>0&&(t.focus(),a.switches.viewability&&"Interactive"!==a.page.contentType&&(clearInterval(d),d=setInterval(h.checkResults,250)))},this.checkResults=function(){if(n(".gsc-resultsbox-visible").length>0){var t=n(".js-popup--search");e.write(function(){t.css("height","auto"),n(".gsc-results",t).css({height:"auto","overflow-y":"visible"})}),(n(".l-header--is-slim").length>0||"mobile"===o.getBreakpoint())&&e.read(function(){var i=window.innerHeight-t[0].getBoundingClientRect().top;e.write(function(){t.css("height",i),n(".gsc-results",t).css({height:i-150,"overflow-y":"auto"})})}),clearInterval(d)}},this.load=function(){var t,i;u=document.body.querySelector(".js-search-placeholder"),window.__gcse={callback:h.focusSearchField},Array.prototype.forEach.call(document.querySelectorAll(".js-search-placeholder"),function(t){t!==u&&e.write(function(){t.innerHTML=""})}),u.innerHTML||(e.write(function(){u.innerHTML='<div class="search-box" role="search"><gcse:searchbox></gcse:searchbox></div><div class="search-results" data-link-name="search"><gcse:searchresults webSearchResultSetSize="'+l+'" linkTarget="_self"></gcse:searchresults></div>'}),t=document.createElement("script"),t.async=!0,t.src=c,i=document.getElementsByTagName("script")[0],e.write(function(){i.parentNode.insertBefore(t,i)}))},this.init=function(){}};return r}),define("common/modules/onward/more-tags",["common/utils/$","bean"],function(t,e){function i(){this.init=function(){var i=t(".js-more-tags");0!==i.length&&(i.removeClass("modern-hidden"),e.on(document.querySelector(".js-more-tags__link"),"click",function(){t(".modern-hidden-tag").removeClass("modern-hidden"),i.addClass("modern-hidden")}))}}return i}),define("common/modules/onward/tech-feedback",["bean","fastdom","common/utils/_","common/utils/$"],function(t,e,i,n){function a(t){return i.reduce(t,function(t,e,i){return t+i+": "+e+"\n"},"")}function o(t){return function(){var e=t.attr("href"),i={browser:window.navigator.userAgent,page:window.location,width:window.innerWidth},n="\r\n\r\n\r\n\r\n------------------------------\r\nAdditional technical data about your request - please do not edit:\r\n\r\n"+a(i)+"\r\n\r\n";t.attr("href",e+"?body="+encodeURIComponent(n))}}function s(e){var i=n(e);i.length&&t.on(i[0],"click",o(i))}return function(){s(".js-tech-feedback-mailto"),s(".js-userhelp-mailto")}}),define("common/modules/ui/accessibility-prefs",["common/utils/_","common/utils/$","common/modules/user-prefs"],function(t,e,i){function n(t){var i=t+"(100%)";e("body").css({"-webkit-filter":i,filter:i})}return function(){t.forEach(["sepia","grayscale","invert","contrast","saturate","opacity"],function(t){i.isOn(t)&&n(t)})}}),define("common/modules/ui/clickstream",["bean","common/utils/_","common/utils/mediator","common/modules/experiments/ab"],function(t,e,i,n){var a=function(a){a=a||{};var o=a.filter||[],s=function(t){return o.filter(function(e){return e===t})},r=function(t){var e,i,n,a;return t=t||"",e=t.match(/:\/\/(.[^\/]+)/),e&&(e=e[1],i=t.match(/^(https?:)\/\//),i=i?i[1]:void 0,n=window.location.hostname,a=window.location.protocol),0===t.indexOf("mailto:")?!1:!e||e===n&&i===a},c=function(t,i){if(!t.el)return!1;var n,a=t.el,o=a.tagName.toLowerCase(),l=a.getAttribute("data-link-name");if(l&&t.tag.unshift(l),"body"===o)return t.tag=t.tag.join(" | "),delete t.el,t.validTarget&&a.getAttribute("data-link-test")&&(t.tag=a.getAttribute("data-link-test")+" | "+t.tag),t;var u=JSON.parse(a.getAttribute("data-custom-event-properties")||"{}");return t.customEventProperties=e.merge(u,t.customEventProperties),t.validTarget||(t.validTarget=s(o).length>0||!!i,t.validTarget&&(t.target=a,n=a.getAttribute("href"),t.samePage=n&&0===n.indexOf("#")||"button"===o||a.hasAttribute("data-is-ajax"),t.sameHost=t.samePage||r(n))),!t.linkContext&&a.getAttribute("data-link-context-path")&&(t.linkContextPath=a.getAttribute("data-link-context-path"),t.linkContextName=a.getAttribute("data-link-context-name")),t.el=a.parentNode,c(t)};return a.addListener!==!1&&t.add(document.body,"click",function(t){var a,o={el:t.target,tag:[]};o.target=t.target,o=c(o),a=n.getActiveTestsEventIsApplicableTo(o),void 0!==a&&a.length>0&&(o.tag=e.map(a,function(t){var e=n.getTestVariantId(t);return"AB,"+t+","+e+","+o.tag}).join(",")),i.emit("module:clickstream:click",o)}),{getClickSpec:c}};return a}),define("common/modules/ui/dropdowns",["common/utils/$","bonzo","bean"],function(t,e,i){function n(){i.on(document.body,"click",o.button,function(i){var n=e(t.ancestor(i.currentTarget,o.container.substring(1)));n.toggleClass("dropdown--active"),a(n)})}function a(i){i.each(function(i){var n=e(i).hasClass("dropdown--active");t(o.content,i).attr("aria-hidden",!n),t(o.button,i).attr("aria-expanded",n),t(o.content,i).attr("aria-expanded",n)})}var o={container:".dropdown",button:".dropdown__button",content:".dropdown__content"};return{init:n,updateAria:a}}),define("common/modules/ui/faux-block-link",["bean","bonzo","fastdom","common/utils/$"],function(t,e,i,n){var a=".u-faux-block-link__overlay",o="u-faux-block-link--hover";return function(){t.on(document.body,"mouseenter",a,function(t){i.write(function(){n(t.currentTarget).parent().addClass(o)})}),t.on(document.body,"mouseleave",a,function(t){i.write(function(){n(t.currentTarget).parent().removeClass(o)})})}}),define("common/modules/ui/fonts",["bonzo","qwery","raven","common/utils/$","common/utils/ajax","common/utils/config","common/utils/cookies","common/utils/detect","common/utils/mediator","common/utils/storage"],function(t,e,i,n,a,o,s,r,c,l){function u(){return"off"===s.get("GU_fonts")}var d="gu.fonts.",h=r.getFontFormatSupport(navigator.userAgent);return function(){return!o.switches.webFonts||u()||e(".webfonts").length?!1:(l.local.get(d+"format")||l.local.set(d+"format",h),void n(".webfont:not([data-loaded-from])").each(function(e){var n=t(e),o=n.data("cache-file-"+("Off"===r.fontHinting?"":"hinted-"+r.fontHinting+"-")+h),s=n.data("min-breakpoint");(!s||r.isBreakpoint({min:s}))&&a({url:o,type:"jsonp",jsonpCallbackName:"guFont",success:function(t){if(!t)return void i.captureMessage("Failed to load fonts");var e=o.match(/fonts\/([^/]*?)\/?([^/]*)\.(woff2|woff|tff).json$/),a=e[1],s=e[2];n.text(t.css).attr("data-loaded-from","ajax"),l.local.clearByPrefix(d+s.replace(/(CleartypeHinted|AutoHinted)$/,"")),l.local.set(d+s+"."+a,t.css),c.emit("modules:fonts:loaded",name)}})}))}}),define("common/modules/ui/relativedates",["common/utils/$","common/utils/config","common/utils/mediator","bonzo"],function(t,e,i,n){function a(){return new Date((new Date).getTime()-w)}function o(t){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t]}function s(t){return["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t]}function r(t){return 10>t?"0"+t:t}function c(t){var e=a();return t&&t.toDateString()===e.toDateString()}function l(t){var e=a();return t&&t.valueOf()>e.valueOf()-864e5}function u(t,e){var i=a();return t&&t.valueOf()>i.valueOf()-1e3*(e||0)}function d(t){var e=a(),i=a();return i.setDate(e.getDate()-1),t.toDateString()===i.toDateString()}function h(t){var e=a().valueOf()-6048e5;return t.valueOf()>=e}function p(t){return"[object Date]"!==Object.prototype.toString.call(t)?!1:!isNaN(t.getTime())}function m(t,e,i){var n,a={s:{"short":["s"],med:["s ago"],"long":[" second ago"," seconds ago"]},m:{"short":["m"],med:["m ago"],"long":[" minute ago"," minutes ago"]},h:{"short":["h"],med:["h ago"],"long":[" hour ago"," hours ago"]},d:{"short":["d"],med:["d ago"],"long":[" day ago"," days ago"]}};return a[t]?(n=a[t][e],1===i?n[0]:n[n.length-1]):""}function f(t,e){e=e||{};var i,n,r,u,f=new Date(Number(t)),v=a(),b=e.format||"short",k="short"===e.format||"med"===e.format;return p(f)?(u=parseInt((v.getTime()-f)/1e3,10),0>u?!1:e.notAfter&&u>e.notAfter?!1:55>u?u+m("s",b,u):3300>u?(i=Math.round(u/60,10),i+m("m",b,i)):c(f)||k&&l(f)?(n=Math.round(u/3600),n+m("h",b,n)):k&&h(f)?(r=Math.round(u/3600/24),r+m("d",b,r)):d(f)?"Yesterday"+g(f):432e3>u?[o(f.getDay()),f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(e.showTime?g(f):""):[f.getDate(),s(f.getMonth()),f.getFullYear()].join(" ")+(e.showTime?g(f):"")):!1}function g(t){return" "+t.getHours()+":"+r(t.getMinutes())}function v(){return t(".js-timestamp, .js-item__timestamp")}function b(){var e="js-locale-timestamp";t("."+e).each(function(t){var i,a=n(t),o=parseInt(a.attr("data-timestamp"),10);o&&(i=new Date(o),t.innerHTML=r(i.getHours())+":"+r(i.getMinutes()),a.removeClass(e))})}function k(t){t=t||{},v().each(function(e){var i,a=n(e),o=parseInt(a.attr("data-timestamp"),10)||a.attr("datetime"),s=new Date(o),r=f(s.getTime(),{showTime:n(a.parent()).hasClass("block-time"),format:a.attr("data-relativeformat"),notAfter:t.notAfter});r?(i=a[0].querySelector(".timestamp__text")||a[0],i.getAttribute("title")||i.setAttribute("title",n(i).text()),i.innerHTML=r):t.notAfter&&a.addClass("modern-hidden")})}function y(t){k(t),b(t)}var w=e.page&&e.page.renderTime?Math.max(0,new Date-new Date(e.page.renderTime)):0;return["related","autoupdate"].forEach(function(t){i.on("modules:"+t+":render",k)}),{makeRelativeDate:f,isWithinSeconds:u,init:y}}),define("text!common/views/breaking-news.html",[],function(){return'<div class="js-breaking-news__item breaking-news__item" data-breaking-article-id="<%=id%>">\n    <div class="breaking-news__item-content">\n        <div class="breaking-news__item-header">\n            <%=marque36icon%>\n            <em class="breaking-news__item-kicker">Breaking news</em>\n            <div class="breaking-news__item-headline"><%=headline%></div>\n        </div>\n        <div class="breaking-news__item-options">\n            <button class="js-breaking-news__item__close button button--tertiary u-faux-block-link__promote"\n                    aria-label="Dismiss"\n                    data-link-name="close button"><%=closeIcon%></button>\n        </div>\n    </div>\n    <a class="u-faux-block-link__overlay" href="/<%=id%>"></a>\n</div>\n'}),define("common/modules/onward/breaking-news",["bean","bonzo","common/utils/$","fastdom","qwery","common/utils/_","common/utils/ajax","common/utils/config","common/utils/storage","common/utils/template","common/modules/ui/relativedates","common/modules/analytics/omniture","common/views/svgs","text!common/views/breaking-news.html"],function(t,e,i,n,a,o,s,r,c,l,u,d,h,p){function m(t,e){var i={};return o.forEach(t,function(t){i[t]=e[t]||!1}),i}var f,g,v,b,k=1200,y={sport:"sport",football:"sport"},w="/breaking-news/lite.json",_="gu.breaking-news.hidden",T=1;return function(){var C=r.page,E=c.local.get(_)||{};C&&E[C.pageId]!==!0&&s({url:w,type:"json",crossOrigin:!0}).then(function(s){var r,w=(s.collections||[]).filter(function(t){return o.isArray(t.content)&&t.content.length}).map(function(t){return t.href=(t.href||"").toLowerCase(),t}),S="international"===C.internationalEdition,D=S?"intl":(C.edition||"").toLowerCase(),I=y[C.section],L=o.chain([w.filter(function(t){return"global"===t.href}).map(function(t){return t.content}),w.filter(function(t){return t.href===D}).map(function(t){return t.content}),w.filter(function(t){return I&&t.href===I}).map(function(t){return t.content})]).flatten().filter(function(t){var e=t.frontPublicationDate;return e&&u.isWithinSeconds(new Date(e),k)}).value(),M=L.map(function(t){return t.id}),j=3e3;M.indexOf(C.pageId)>-1&&(E[C.pageId]=!0),c.local.set(_,m(M,E)),r=o.chain(L).filter(function(t){return E[t.id]!==!0}).first(T).value(),r.length&&(f=f||e(a(".js-breaking-news-placeholder")),v=h("marque36icon"),b=h("closeCentralIcon"),o.forEach(r,function(a){var o;a.marque36icon=v,a.closeIcon=b,o=e.create(l(p,a)),t.on(i(".js-breaking-news__item__close",o)[0],"click",function(){n.write(function(){i("[data-breaking-article-id]").hide()}),E[a.id]=!0,c.local.set(_,m(M,E))}),n.write(function(){f.append(o)}),E[a.id]===!1&&(j=0)}),setTimeout(function(){var t,i="breaking news alert shown"+(j?"":" 2 or more times");g=g||e(document.body),t=e(e.create(f[0])).addClass("breaking-news--spectre").removeClass("breaking-news--hidden"),n.write(function(){g.append(t)}),j||n.write(function(){f.removeClass("breaking-news--fade-in")}),n.write(function(){f.removeClass("breaking-news--hidden")}),d.trackLink(this,i)},j))})}}),define("common/modules/social/pinterest",["fastdom","bean","common/utils/$"],function(t,e,i){function n(e){e.preventDefault(),i("img:not(.gu-image):not(.responsive-img):not(.gallery2__img)").each(function(e){t.write(function(){i(e).attr("data-pin-nopin","true")})}),require(["js!https://assets.pinterest.com/js/pinmarklet.js?r="+(new Date).getTime()])}var a,o=".social__item--pinterest";return function(){a=a||i(o),a.each(function(t){e.on(t,"click",n)})}}),define("text!common/views/international-message.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    You’re viewing a beta release of the Guardian’s international edition.\n</p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a href="https://www.surveymonkey.com/s/ZCPVY5Q" data-link-name="survey">Leave feedback</a>\n    </li>\n    <li class="site-message__actions__item">\n        <i class="i i-back"></i>\n        <a class="js-main-site-link" rel="nofollow" href="/preference/edition/uk" data-link-name="opt-out">Opt out and go to UK edition</a>\n    </li>\n</ul>\n'}),define("text!common/views/international-control-message.html",[],function(){return'<p class="site-message__message" id="site-message__message">\n    We\'re testing an international edition and would love your feedback\n</p>\n<ul class="site-message__actions u-unstyled">\n    <li class="site-message__actions__item">\n        <i class="i i-arrow-white-right"></i>\n        <a class="js-main-site-link" rel="nofollow" href="/preference/edition/intl" data-link-name="opt-in">Preview beta</a>\n    </li>\n</ul>\n'}),define("bootstraps/identity-common",["common/utils/robust","common/modules/identity/api"],function(t,e){function i(t){e.init(t),e.isUserLoggedIn()&&(document.documentElement.className=document.documentElement.className.replace(/\bid--signed-out\b/,"id--signed-in"))}return function(){t.catchErrorsAndLog("i-css-class",i)}}),define("bootstraps/common",["bean","bonzo","fastclick","qwery","common/utils/$","common/utils/background","common/utils/config","common/utils/cookies","common/utils/detect","common/utils/mediator","common/utils/template","common/utils/url","common/utils/robust","common/utils/storage","common/modules/analytics/foresee-survey","common/modules/analytics/livestats","common/modules/analytics/media-listener","common/modules/analytics/omniture","common/modules/analytics/register","common/modules/analytics/scrollDepth","common/modules/analytics/css-logging","common/modules/analytics/simple-metrics","common/modules/commercial/user-ad-targeting","common/modules/commercial/donot-use-adblock","common/modules/discussion/comment-count","common/modules/experiments/ab","common/modules/identity/autosignin","common/modules/navigation/navigation","common/modules/navigation/sticky","common/modules/navigation/profile","common/modules/navigation/search","common/modules/onward/history","common/modules/onward/more-tags","common/modules/onward/tech-feedback","common/modules/ui/accessibility-prefs","common/modules/ui/clickstream","common/modules/ui/dropdowns","common/modules/ui/faux-block-link","common/modules/ui/fonts","common/modules/ui/message","common/modules/ui/relativedates","common/modules/ui/smartAppBanner","common/modules/ui/tabs","common/modules/ui/toggles","common/modules/user-prefs","common/modules/onward/breaking-news","common/modules/social/pinterest","common/modules/save-for-later","text!common/views/international-message.html","text!common/views/international-control-message.html","bootstraps/identity-common"],function(t,e,i,n,a,o,s,r,c,l,u,d,h,p,m,f,g,v,b,k,y,w,_,T,C,E,S,D,I,L,M,j,x,N,A,O,P,V,F,R,B,U,H,q,$,z,K,G,Y,W,J){var Q={initFastClick:function(){(s.tests.jspmTest?i:i.attach)(document.body)},initialiseTopNavItems:function(){var t,e=new M,i=document.getElementById("header");i&&s.switches.idProfileNavigation&&(t=new L({url:s.page.idUrl}),t.init()),e.init(i)},initialiseNavigation:function(){D.init()},initialiseStickyHeader:function(){!s.switches.viewability||s.page.isProd&&"Interactive"===s.page.contentType||"Crossword"===s.page.contentType||I.init()},showTabs:function(){var t=new H;["modules:popular:loaded","modules:geomostpopular:ready"].forEach(function(e){l.on(e,function(e){t.init(e)})})},showToggles:function(){var t=new q;t.init(document),t.reset(),P.init()},showRelativeDates:function(){var t=B;t.init(),l.on("fragment:ready:dates",function(e){t.init(e)})},initClickstream:function(){new O({filter:["a","button"]})},showAdblockMessage:function(){T.init()},logLiveStats:function(){f.log()},loadAnalytics:function(){v.go(),s.switches.ophan&&require(["ophan/ng"],function(t){s.switches.scrollDepth&&(l.on("scrolldepth:data",t.record),new k({isContent:/Article|LiveBlog/.test(s.page.contentType)}))})},cleanupCookies:function(){r.cleanUp(["mmcore.pd","mmcore.srv","mmid","GU_ABFACIA","GU_FACIA","GU_ALPHA","GU_ME","at"])},updateHistory:function(){"Network Front"!==s.page.contentType&&j.logSummary(s.page),"Video"===s.page.contentType&&j.logHistory(s.page)},showHistoryInMegaNav:function(){s.switches.historyTags&&l.once("modules:nav:open",function(){j.showInMegaNav()})},initAutoSignin:function(){s.switches.facebookAutosignin&&"mobile"!==c.getBreakpoint()&&(new S).init()},windowEventListeners:function(){["resize","scroll","orientationchange"].forEach(function(e){t.on(window,e,l.emit.bind(l,"window:"+e))})},checkIframe:function(){window.self!==window.top&&a("html").addClass("iframed")},runForseeSurvey:function(){s.switches.foresee&&m.load()},startRegister:function(){s.page.isSSL||b.initialise()},showMoreTagsLink:function(){(new x).init()},initDiscussion:function(){s.switches.discussion&&C.init()},testCookie:function(){var t=d.getUrlVars();t.test&&r.addSessionCookie("GU_TEST",encodeURIComponent(t.test))},adTestCookie:function(){var t=d.getUrlVars();"clear"===t.adtest?r.remove("adtest"):t.adtest&&r.add("adtest",encodeURIComponent(t.adtest),10)},initOpenOverlayOnClick:function(){var i;t.on(document.body,"click","[data-open-overlay-on-click]",function(t){var n=e(t.currentTarget).data("open-overlay-on-click");i=document.body.scrollTop,e(document.body).addClass("has-overlay"),a("#"+n).addClass("overlay--open").appendTo(document.body)}),t.on(document.body,"click",".js-overlay-close",function(t){var n=a.ancestor(t.target,"overlay");n&&e(n).removeClass("overlay--open"),e(document.body).removeClass("has-overlay"),i&&window.setTimeout(function(){document.body.scrollTop=i,i=null},1)})},loadBreakingNews:function(){s.switches.breakingNews&&"identity"!==s.page.section&&z()},runCssLogging:function(){s.switches.cssLogging&&y()},initPublicApi:function(){window.guardian.api={logCss:y}},internationalSignposting:function(){"internationalEdition"in s.page&&("international"===s.page.internationalEdition&&"international"===s.page.pageId?new R("international-with-survey-new",{pinOnHide:!0}).show(u(Y,{})):"control"===s.page.internationalEdition&&"uk"===s.page.pageId&&new R("international",{pinOnHide:!0}).show(u(W,{})))},initPinterest:function(){/Article|LiveBlog|Gallery|Video/.test(s.page.contentType)&&K()},saveForLater:function(){if(s.switches.saveForLater){var t=new G;t.init(!1)}}};return{init:function(){o(h.makeBlocks([["c-analytics",Q.loadAnalytics],["c-fonts",F],["c-identity",J],["c-adverts",_.requestUserSegmentsFromId],["c-discussion",Q.initDiscussion],["c-fast-click",Q.initFastClick],["c-test-cookie",Q.testCookie],["c-ad-cookie",Q.adTestCookie],["c-event-listeners",Q.windowEventListeners],["c-breaking-news",Q.loadBreakingNews],["c-block-link",V],["c-iframe",Q.checkIframe],["c-tabs",Q.showTabs],["c-top-nav",Q.initialiseTopNavItems],["c-init-nav",Q.initialiseNavigation],["c-sticky-header",Q.initialiseStickyHeader],["c-toggles",Q.showToggles],["c-dates",Q.showRelativeDates],["c-clickstream",Q.initClickstream],["c-history",Q.updateHistory],["c-sign-in",Q.initAutoSignin],["c-history-nav",Q.showHistoryInMegaNav],["c-forsee",Q.runForseeSurvey],["c-start-register",Q.startRegister],["c-tag-links",Q.showMoreTagsLink],["c-smart-banner",U.init],["c-adblock",Q.showAdblockMessage],["c-log-stats",Q.logLiveStats],["c-cookies",Q.cleanupCookies],["c-overlay",Q.initOpenOverlayOnClick],["c-css-logging",Q.runCssLogging],["c-public-api",Q.initPublicApi],["c-simple-metrics",w],["c-tech-feedback",N],["c-media-listeners",g],["c-accessibility-prefs",A],["c-international-signposting",Q.internationalSignposting],["c-pinterest",Q.initPinterest],["c-save-for-later",Q.saveForLater]])),window.console&&window.console.log&&!s.page.isDev&&window.console.log("##::::: ##: ########::::::: ###:::: ########:: ########:::: ##:::: ##: ####: ########:: ####: ##::: ##:: ######::\n##: ##: ##: ##.....::::::: ## ##::: ##.... ##: ##.....::::: ##:::: ##:. ##:: ##.... ##:. ##:: ###:: ##: ##... ##:\n##: ##: ##: ##::::::::::: ##:. ##:: ##:::: ##: ##:::::::::: ##:::: ##:: ##:: ##:::: ##:: ##:: ####: ##: ##:::..::\n##: ##: ##: ######:::::: ##:::. ##: ########:: ######:::::: #########:: ##:: ########::: ##:: ## ## ##: ##:: ####\n##: ##: ##: ##...::::::: #########: ##.. ##::: ##...::::::: ##.... ##:: ##:: ##.. ##:::: ##:: ##. ####: ##::: ##:\n##: ##: ##: ##:::::::::: ##.... ##: ##::. ##:: ##:::::::::: ##:::: ##:: ##:: ##::. ##::: ##:: ##:. ###: ##::: ##:\n ###. ###:: ########:::: ##:::: ##: ##:::. ##: ########:::: ##:::: ##: ####: ##:::. ##: ####: ##::. ##:. ######::\n\nEver thought about joining us?\nhttp://developers.theguardian.com/join-the-team.html")}}}),define("common/utils/defer-to-analytics",["common/utils/mediator"],function(t){function e(e){i?e():t.on("analytics:ready",function(){e()})}var i=!1;return t.on("analytics:ready",function(){i=!0}),e}),define("common/modules/analytics/omnitureMedia",["common/utils/_","common/utils/config","qwery"],function(t,e,i){function n(n){function a(t){return n.el().getAttribute(t)}var o,r,c=a("data-embed-path")||e.page.pageId,l=i("audio",n.el()).length?"audio":"video",u=!1,d=!1,h=!!guardian.isEmbed,p={"video:request":"event98","preroll:request":"event97","preroll:play":"event59","preroll:skip":"event99","preroll:end":"event64","video:play":"event17","audio:play":"event19","video:25":"event21","video:50":"event22","video:75":"event23","video:end":"event18","audio:end":"event20","video:fullscreen":"event96",duration:"event57"};this.getDuration=function(){return parseInt(a("data-duration"),10)||void 0},this.getPosition=function(){return n.currentTime()},this.play=function(){"video"===l&&u&&this.startDurationEventTimer()},this.pause=function(){"video"===l&&this.stopDurationEventTimer()},this.sendEvent=function(e,i,n){s.eVar74=n?l+" ad":l+" content",s.eVar43=s.prop43=l.charAt(0).toUpperCase()+l.slice(1),s.eVar44=s.prop44=c,d&&(s.prop41="PrerollMilestone"),s.linkTrackVars="events,eVar11,prop41,eVar43,prop43,eVar44,prop44,prop9,channel",s.linkTrackEvents=t.values(p).join(","),s.events=e,s.tl(!0,"o",i||e),s.prop41=s.eVar44=s.prop44=s.eVar43=s.prop43=void 0},this.sendNamedEvent=function(t,e){this.sendEvent(p[t],t,e)},this.omnitureInit=function(){s.loadModule("Media"),s.Media.autoTrack=!1,s.Media.trackWhilePlaying=!1,s.Media.trackVars="events,eVar7,eVar43,eVar44,prop44,eVar47,eVar61,channel",s.Media.trackEvents="event17,event18,event19,event20,event21,event22,event23,event57,event59,event64,event96,event97,event98",s.Media.segmentByMilestones=!1,s.Media.trackUsingContextData=!1,s.eVar11=s.prop11=h?"Embedded":e.page.sectionName||"",s.eVar7=s.pageName,s.Media.open(c,this.getDuration(),"HTML5 Video"),"video"===l&&this.sendNamedEvent("video:request")},this.getDurationWatched=function(){var t=0,e=new Date,i=(e-o)/1e3;return r&&u&&i>1&&(t=Math.round(i)),o=e,t},this.baseDurationEvent=function(){var t=[],e=this.getDurationWatched();return e&&t.push(p.duration+"="+e),t},this.sendSegment=function(t){var e=this.baseDurationEvent();e.push(t),this.sendEvent(e.join(","))},this.sendDurationEvent=function(){var t=this.baseDurationEvent();t&&t.length>0&&this.sendEvent(t.join(","))},this.startDurationEventTimer=function(){this.stopDurationEventTimer(),o=new Date,r=window.setInterval(this.sendDurationEvent.bind(this),1e4)},this.stopDurationEventTimer=function(){this.sendDurationEvent(),r&&window.clearInterval(r),r=!1},this.onContentPlay=function(){u=!0,this.sendNamedEvent("video:play"),this.startDurationEventTimer()},this.onPrerollPlay=function(){d=!0,this.sendNamedEvent("preroll:play",!0)},this.init=function(){this.omnitureInit(),n.on("play",this.play.bind(this)),n.on("pause",this.pause.bind(this)),n.one("video:preroll:request",this.sendNamedEvent.bind(this,"preroll:request",!0)),n.one("video:preroll:play",this.onPrerollPlay.bind(this)),n.one("video:preroll:end",this.sendNamedEvent.bind(this,"preroll:end",!0)),n.one("video:content:play",this.onContentPlay.bind(this)),n.one("audio:content:play",this.sendNamedEvent.bind(this,"audio:play")),n.one("video:content:25",this.sendNamedEvent.bind(this,"video:25")),n.one("video:content:50",this.sendNamedEvent.bind(this,"video:50")),n.one("video:content:75",this.sendNamedEvent.bind(this,"video:75")),
n.one("video:content:end",this.sendNamedEvent.bind(this,"video:end")),n.one("audio:content:end",this.sendNamedEvent.bind(this,"audio:end")),n.on("player:fullscreen",this.sendNamedEvent.bind(this,"video:fullscreen"))}}return n}),define("text!common/views/ui/video-ads-skip-overlay.html",[],function(){return'<div class="js-ads-skip vjs-ads-skip">\n    <span class="vjs-ads-skip__countdown">You may skip this advert in <span class="js-skip-remaining-time"><%=skipTimeout%></span> seconds</span>\n</div>\n'}),define("common/modules/video/events",["bean","qwery","raven","common/utils/$","common/utils/_","common/utils/config","common/utils/detect","common/utils/template","common/modules/analytics/omnitureMedia","common/modules/onward/history","text!common/views/ui/video-ads-skip-overlay.html"],function(t,e,i,n,a,o,s,r,c,l,u){function d(t){return E?"video":t.guMediaType}function h(t){return C&&!l.isRevisit(o.page.pageId)&&t.guAutoplay}function p(t,e){return d(e)+":"+t}function m(t,e,i){var n=E?"ophan/embed":"ophan/ng";t&&require([n],function(n){var a={};a[d(i)]={id:t,eventType:e.type},n.record(a)})}function f(t,e){D.concat(S.map(function(t){return"content:"+t})).forEach(function(i){t.one(p(i,t),function(i){m(e,i,t)})})}function g(t){new c(t).init()}function v(t){var e={end:function(){t.trigger(p("preroll:end",t)),t.removeClass("vjs-ad-playing--vpaid"),b(t,!0)},start:function(){var i=t.duration();i?t.trigger(p("preroll:play",t)):t.one("durationchange",e.start)},vpaidStarted:function(){t.addClass("vjs-ad-playing--vpaid")},ready:function(){t.trigger(p("preroll:ready",t)),t.one("adstart",e.start),t.one("adend",e.end),t.one("Vpaid::AdStarted",e.vpaidStarted),h(t)&&t.play()}};t.one("adsready",e.ready),t.one("adtimeout",function(){t.trigger("adscanceled"),b(t)})}function b(t){var e={end:function(){t.trigger(p("content:end",t))},play:function(){var i=t.duration();i?t.trigger(p("content:play",t)):t.one("durationchange",e.play)},timeupdate:function(){var e=Math.round(parseInt(t.currentTime()/t.duration()*100,10));S.reverse().some(function(i){return e>=i?(t.trigger(p("content:"+i,t)),!0):!1})},ready:function(){t.trigger(p("content:ready",t)),t.one("play",e.play),t.on("timeupdate",a.throttle(e.timeupdate,1e3)),t.one("ended",e.end),h(t)&&t.play()}};e.ready()}function k(e){e.on("playing",function(){t.fire(document.body,"videoPlaying")}),e.on("pause",function(){t.fire(document.body,"videoPause")}),e.on("ended",function(){t.fire(document.body,"videoEnded")})}function y(i){var a,o={update:function(){var s=this.ima.getAdsManager(),r=s.getCurrentAd().getDuration()-s.getRemainingTime(),c=parseInt((i-r).toFixed(),10);c>0?n(".js-skip-remaining-time",this.el()).text(c):(window.clearInterval(a),n(".js-ads-skip",this.el()).html('<button class="js-ads-skip-button vjs-ads-skip__button" data-link-name="Skip video advert"><i class="i i-play-icon-grey skip-icon"></i><i class="i i-play-icon-gold skip-icon"></i>Skip advert</button>'),t.on(e(".js-ads-skip-button")[0],"click",o.skip.bind(this)))},skip:function(){n(".js-ads-skip",this.el()).hide(),this.trigger(p("preroll:skip",this)),this.ima.onAdComplete_(),this.ima.onContentResumeRequested_(),this.ima.getAdsManager().stop()},init:function(){var t=r(u,{skipTimeout:i});n(this.el()).append(t),a=setInterval(o.update.bind(this),250),this.one(p("content:play",this),function(){n(".js-ads-skip",this.el()).hide(),window.clearInterval(a)})}};this.one(p("preroll:play",this),o.init.bind(this))}function w(t){t&&"message"in t&&"code"in t&&i.captureException(new Error(t.message),{tags:{feature:"player",vjsCode:t.code}})}function _(t){var e=t.error();return null!==e?(w(e),4===e.code):!1}function T(t){t.on("error",function(){w(t.error()),n(".vjs-big-play-button").hide()})}var C=s.isBreakpoint({min:"desktop"}),E=!!guardian.isEmbed,S=[25,50,75],D=["preroll:request","preroll:ready","preroll:play","preroll:end","content:ready","content:play","content:end"];return{constructEventName:p,bindContentEvents:b,bindPrerollEvents:v,bindGlobalEvents:k,initOphanTracking:f,initOmnitureTracking:g,adSkipCountdown:y,handleInitialMediaError:_,bindErrorHandler:T}}),define("common/modules/video/fullscreener",["bean","bonzo"],function(t,e){function i(){var i=this,n=e.create('<div class="vjs-fullscreen-clickbox"></div>')[0],a={click:function(t){this.paused()?this.play():this.pause(),t.stop()},dblclick:function(t){t.stop(),this.isFullScreen()?this.exitFullscreen():this.requestFullscreen()}};e(n).appendTo(i.contentEl()),t.on(n,"click",a.click.bind(i)),t.on(n,"dblclick",a.dblclick.bind(i)),i.on("fullscreenchange",function(){this.isFullScreen()&&i.trigger("player:fullscreen")})}return i}),define("common/modules/video/supportedBrowsers",["bean","common/utils/$","common/utils/_","common/utils/detect","common/utils/config"],function(t,e,i,n,a){function o(i){t.on(e("."+r)[0],"click",function(){i.error(null)})}var s={Firefox:"25",Chrome:"28",IE:"9",Opera:"14",Safari:"6"},r="vjs-error-display__close",c=n.getUserAgent,l='Your browser is no longer supported. <a href="http://whatbrowser.org" target="_blank">Update your browser?</a> <button class="'+r+'">close</button>';return function(t){var e=i.some(s,function(t,e){return c.browser===e&&c.version<t});e&&a.switches.mediaPlayerSupportedBrowsers&&(t.error(l),o(t))}}),define("common/modules/video/tech-order",["common/utils/$","common/utils/_","common/utils/config"],function(t,e,i){function n(e){return t("source",e).map(function(t){var e=t.getAttribute("type");return o[e]?o[e]:e})}function a(t){return e.chain(n(t)).map(function(e){return t.canPlayType(e)}).compact().contains("probably").value()}var o={"video/m3u8":'video/m3u8; codecs="avc1.42C01e, mp4a.40.2"',"video/mp4":'video/mp4; codecs="avc1.42C01e, mp4a.40.2"',"video/3gp:large":'video/3gp:large; codecs="avc1.42C01e, mp4a.40.2"',"video/3gp:small":'video/3gp:small; codecs="avc1.42C01e, mp4a.40.2"',"video/webm":'video/webm; codecs="vp8, vorbis"'};return function(t){var e=["flash","html5"];return i.switches.html5MediaCompatibilityCheck&&"canPlayType"in t&&a(t)?e.reverse():e}}),define("text!common/views/ui/loading.html",[],function(){return'<div class="pamplemousse">\n    <div class="pamplemousse__pip"><i></i></div>\n    <div class="pamplemousse__pip"><i></i></div>\n    <div class="pamplemousse__pip"><i></i></div>\n</div>\n'}),define("bootstraps/media",["bean","bonzo","fastdom","raven","common/utils/$","common/utils/_","common/utils/config","common/utils/defer-to-analytics","common/utils/detect","common/utils/mediator","common/utils/url","common/modules/analytics/beacon","common/modules/commercial/build-page-targeting","common/modules/component","common/modules/video/events","common/modules/video/fullscreener","common/modules/video/supportedBrowsers","common/modules/video/tech-order","text!common/views/ui/loading.html"],function(t,e,i,n,a,o,s,r,c,l,u,d,h,p,m,f,g,v,b){function k(){var t={ad_rule:1,correlator:(new Date).getTime(),cust_params:encodeURIComponent(u.constructQuery(h())),env:"vp",gdfp_req:1,impl:"s",iu:s.page.adUnit,output:"xml_vast2",scp:encodeURIComponent("slot=video"),sz:"400x300",unviewed_position_start:1};return"http://"+s.page.dfpHost+"/gampad/ads?"+u.constructQuery(t)}function y(t){t.loadingSpinner.contentEl().innerHTML=b}function w(t){a(".vjs-tech",t.el()).attr("aria-hidden",!0),a(".vjs-big-play-button",t.el()).attr("aria-hidden",!0),a(".vjs-current-time",t.el()).attr("aria-hidden",!0),a(".vjs-time-divider",t.el()).attr("aria-hidden",!0),a(".vjs-duration",t.el()).attr("aria-hidden",!0),a(".vjs-embed-button",t.el()).attr("aria-hidden",!0),a(".vjs-play-control",t.el()).attr("aria-label","video play"),a(".vjs-mute-control",t.el()).attr("aria-label","video mute"),a(".vjs-fullscreen-control",t.el()).attr("aria-label","video fullscreen")}function _(t,i){var n=videojs(t,i),o=a(t),s=parseInt(o.attr("data-duration"),10);return isNaN(s)||(n.duration(s),n.trigger("timeupdate")),n.guAutoplay="true"===a(t).attr("data-auto-play"),n.height(e(n.el()).parent().dim().height),n.width(e(n.el()).parent().dim().width),m.handleInitialMediaError(n)&&(n.dispose(),i.techOrder=v(t).reverse(),n=videojs(t,i)),n}function T(t){return t.target.firstChild&&t.target.firstChild.id&&t.target.firstChild.id.indexOf("flash_api")>0}function C(n){i.read(function(){a(".js-video-play-button",n).each(function(n){var o=e(n);t.on(n,"click",function(){var t,s,r;r=e(n).parent().parent(),t=a(".js-video-placeholder",r),s=a(".js-video-player",r),i.write(function(){t.removeClass("media__placeholder--active").addClass("media__placeholder--hidden"),s.removeClass("media__container--hidden").addClass("media__container--active"),o.removeClass("media__placeholder--active").addClass("media__placeholder--hidden"),S(a("video",s).get(0),!0)})}),i.write(function(){o.removeClass("media__placeholder--hidden").addClass("media__placeholder--active")})})})}function E(){s.page.videoJsFlashSwf&&(videojs.options.flash.swf=s.page.videoJsFlashSwf),videojs.plugin("adSkipCountdown",m.adSkipCountdown),videojs.plugin("fullscreener",f),i.read(function(){a(".js-gu-media--enhance").each(function(t){S(t,!1)})}),C(document.body),l.on("modules:related:loaded",C),l.on("page:media:moreinloaded",C)}function S(t,i){var a,l,u=t.tagName.toLowerCase(),h=e(t).addClass("vjs vjs-tech-"+videojs.options.techOrder[0]),p=h.attr("data-media-id"),f="true"===h.attr("data-block-video-ads"),b="true"===h.attr("data-show-end-slate"),C=h.attr("data-end-slate"),E=h.attr("data-embed-path"),S=v(t);s.page.videoJsVpaidSwf&&s.switches.vpaidAdverts&&(S=["vpaid"].concat(S),videojs.options.vpaid={swf:s.page.videoJsVpaidSwf}),a=_(t,{techOrder:S,controls:!0,autoplay:i,preload:"auto",plugins:{embed:{embeddable:!s.page.isFront&&s.switches.externalVideoEmbeds&&("Video"===s.page.contentType||"true"===h.attr("data-embeddable")),location:s.page.externalEmbedHost+"/embed/video/"+(E?E:s.page.pageId)}}}),m.bindErrorHandler(a),a.guMediaType=u,a.ready(function(){var t;y(a),m.bindGlobalEvents(a),w(a),g(a),a.one("playing",function(t){T(t)?d.counts("video-tech-flash"):d.counts("video-tech-html5")}),t=a.volume(),t&&(a.volume(0),a.volume(t)),a.persistvolume({namespace:"gu.vjs"}),r(function(){m.initOmnitureTracking(a),m.initOphanTracking(a,p),"video"===u?(a.fullscreener(),!s.switches.videoAdverts||f||s.page.isPreview?m.bindContentEvents(a):n.wrap({tags:{feature:"media"}},function(){m.bindPrerollEvents(a),a.adSkipCountdown(10),require(["js!http://imasdk.googleapis.com/js/sdkloader/ima3.js"],function(){a.ima({id:p,adTagUrl:k()}),a.trigger(m.constructEventName("preroll:request",a)),a.ima.requestAds()})})(),b&&c.isBreakpoint({min:"desktop"})&&D(a,C)):(a.playlist({mediaType:"audio",continuous:!1}),m.bindContentEvents(a))})}),l=o.debounce(function(){a.removeClass("vjs-mousemoved")},500),a.on("mousemove",function(){a.addClass("vjs-mousemoved"),l()})}function D(t,i){var n=new p,a="vjs-has-ended";n.endpoint=i,n.fetch(t.el(),"html"),t.one(m.constructEventName("content:play",t),function(){t.on("ended",function(){e(t.el()).addClass(a)})}),t.on("playing",function(){e(t.el()).removeClass(a)})}function I(){if(s.isMedia&&s.page.showRelatedContent){var t=s.page.contentType.toLowerCase(),e=new p,i=a(".js-onward")[0],n="/"+t+"/section/"+s.page.section;"seriesId"in s.page&&(n+="/"+s.page.seriesId),n+=".json?shortUrl="+s.page.shortUrl,"video"===t&&(n+="&exclude-tag=guardian-professional/guardian-professional"),e.endpoint=n,e.fetch(i).then(function(){l.emit("page:media:moreinloaded",i),l.emit("page:new-content",i)})}}function L(){if(s.isMedia){var t=s.page.contentType.toLowerCase(),e=new p,i=a("video"===t?".js-video-components-container":".js-media-popular")[0],n="/"+(s.page.isPodcast?"podcast":t)+"/most-viewed.json";e.manipulationType="video"===t?"append":"html",e.endpoint=n,e.fetch(i,"html").then(function(){l.emit("page:new-content")})}}function M(){s.switches.enhancedMediaPlayer&&require(["bootstraps/video-player"],n.wrap({tags:{feature:"media"}},E)),I(),L()}return{init:M}}),define("bootstraps/sport",["common/utils/$","common/utils/config","common/modules/component"],function(t,e,i){function n(){var n,a,o=e.page.cricketMatch;o&&(n=new i,a=t(".js-cricket-score")[0],n.endpoint="/sport/cricket/match/"+o+".json",n.fetch(a,"summary"))}return{init:n}}),define("bootstraps/app",["qwery","raven","common/utils/config","common/utils/detect","common/utils/mediator","common/utils/user-timing","bootstraps/common","bootstraps/media","bootstraps/sport"],function(t,e,i,n,a,o,s,r,c){var l=function(t,i){e.context({tags:{feature:t}},i.init,[])},u=function(){o.mark("App Begin"),l("common",s),i.page.isFront&&require(["bootstraps/facia"],function(t){l("facia",t)}),"lifeandstyle"===i.page.section&&"Sudoku"===i.page.series&&require(["bootstraps/sudoku"],function(t){l("sudoku",t)}),"Article"===i.page.contentType&&require(["bootstraps/article","bootstraps/image-content"],function(t,e){l("article",t),l("article : image-content",e)}),"LiveBlog"===i.page.contentType&&require(["bootstraps/liveblog","bootstraps/image-content"],function(t,e){l("liveBlog",t),l("liveBlog : image-content",e)}),(i.isMedia||"Interactive"===i.page.contentType)&&require(["bootstraps/trail"],function(t){l("media : trail",{init:t})}),(i.isMedia||t("video, audio").length)&&l("media",r),"Gallery"===i.page.contentType&&require(["bootstraps/gallery","bootstraps/image-content"],function(t,e){l("gallery",t),l("gallery : image-content",e)}),"ImageContent"===i.page.contentType&&require(["bootstraps/image-content","bootstraps/trail"],function(t,e){l("image-content",t),l("image-content : trail",{init:e})}),"football"===i.page.section&&require(["bootstraps/football"],function(t){l("football",t)}),"sport"===i.page.section&&l("sport",c),"identity"===i.page.section&&require(["bootstraps/profile"],function(t){l("profile",t)}),i.page.isPreferencesPage&&require(["bootstraps/preferences"],function(t){l("preferences",t)}),"help/accessibility-help"===i.page.pageId&&require(["bootstraps/accessibility"],function(t){l("accessibility",t)}),o.mark("App End")};return{go:u}});
//# sourceMappingURL=app.js.map